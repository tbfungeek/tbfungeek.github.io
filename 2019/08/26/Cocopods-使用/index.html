
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>Cocopods 使用 | Edgar&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Edgar">
    

    
    <meta name="description" content="Cocopods GitHubCocopods 使用说明 开篇叨叨一般一款软件都往往由几个人同时协作开发，并且开发期间会使用多个开源库，从而避免重复造轮子，这样可以加快开发的速度，但是这也带来了一个问题：如何管理这些依赖，这是一个十分浪费时间并且容易出错的工作，我们不但要定期管理这些三方库的更新，还需要往目标项目工程上添加三方库所需要的依赖库，对于某些开源库可能还需要添加某些编译参数。稍稍完备一点">
<meta property="og:type" content="article">
<meta property="og:title" content="Cocopods 使用">
<meta property="og:url" content="http://yoursite.com/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="Edgar&#39;s Blog">
<meta property="og:description" content="Cocopods GitHubCocopods 使用说明 开篇叨叨一般一款软件都往往由几个人同时协作开发，并且开发期间会使用多个开源库，从而避免重复造轮子，这样可以加快开发的速度，但是这也带来了一个问题：如何管理这些依赖，这是一个十分浪费时间并且容易出错的工作，我们不但要定期管理这些三方库的更新，还需要往目标项目工程上添加三方库所需要的依赖库，对于某些开源库可能还需要添加某些编译参数。稍稍完备一点">
<meta property="og:locale">
<meta property="og:image" content="http://yoursite.com/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/00002.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/00003.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/0000004.png">
<meta property="article:published_time" content="2019-08-25T17:58:47.000Z">
<meta property="article:modified_time" content="2020-02-25T16:25:44.000Z">
<meta property="article:author" content="Edgar">
<meta property="article:tag" content="iOS 理论基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/00002.png">

    
    <link rel="alternative" href="atom.xml" title="Edgar&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/unnamed4_n_mSY_icon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/profile.png">
    <link rel="apple-touch-icon-precomposed" href="/img/profile.png">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.2.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Edgar&#39;s Blog">Edgar&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="Search" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/08/26/Cocopods-使用/" title="Cocopods 使用" itemprop="url">Cocopods 使用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2019-08-25T17:58:47.000Z" itemprop="datePublished"> Published 2019-08-26</time>
    
  </p>
</header>
	<div class="article-content">
		
		<p><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/CocoaPods">Cocopods GitHub</a><br><a target="_blank" rel="noopener" href="https://guides.cocoapods.org/">Cocopods 使用说明</a></p>
<h5 id="开篇叨叨"><a href="#开篇叨叨" class="headerlink" title="开篇叨叨"></a><strong><strong>开篇叨叨</strong></strong></h5><p>一般一款软件都往往由几个人同时协作开发，并且开发期间会使用多个开源库，从而避免重复造轮子，这样可以加快开发的速度，但是这也带来了一个问题：如何管理这些依赖，这是一个十分浪费时间并且容易出错的工作，我们不但要定期管理这些三方库的更新，还需要往目标项目工程上添加三方库所需要的依赖库，对于某些开源库可能还需要添加某些编译参数。稍稍完备一点的编程语言一般都会引入依赖管理工具，来减轻这些负担。比如Java语言的Maven,Nodejs的npm，Android的Gradle，Ruby的gem。iOS也有它的依赖管理工具 — CocoaPods。</p>
<h5 id="CocoaPods-安装"><a href="#CocoaPods-安装" class="headerlink" title="CocoaPods 安装"></a><strong><strong>CocoaPods 安装</strong></strong></h5><ol>
<li>CocoaPods 是使用Ruby 实现的，它使用gem命令进行下载并安装，在安装前最好使用下面的命令来更新下gem</li>
</ol>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line">sudo gem <span class="keyword">update</span> --<span class="keyword">system</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>gem是从对应的Ruby软件库中下载对应的软件的，默认情况下使用的是<a target="_blank" rel="noopener" href="https://rubygems.org/">https://rubygems.org</a>它托管在亚马逊云服务上，国内可能会被墙，所以一般会使用国内的源来替换，如果你遇到了这个问题可以使用下面的命令来替换Ruby软件库：</li>
</ol>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">gem sources -l                                  <span class="string">//</span>查看Ruby数据源</span><br><span class="line">gem sources <span class="params">--remove</span> https:<span class="string">//rubygems.org/</span>      <span class="string">//</span>移除原有的Ruby软件库</span><br><span class="line">gem sources -a https:<span class="string">//ruby.taobao.org/</span>         <span class="string">//</span>使用国内淘宝的Ruby软件库</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>安装最新版本的CocoaPods</li>
</ol>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">sudo gem <span class="keyword">install</span> cocoapods</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>安装指定版本的CocoaPods</li>
</ol>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo</span> gem install cocoapods -v <span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>查看当前本地安装的CocoaPods版本</li>
</ol>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">gem list cocoapods</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>卸载当前安装的CocoaPods</li>
</ol>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo gem uninstall cocoapods</span></span><br></pre></td></tr></table></figure>

<p>有时候卸载不干净可以通过上面的gem list cocoapods列出所有相关的库，并通过下面命令卸载</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">gem uninstall cocoapods</span><br><span class="line">gem uninstall cocoapods-core</span><br><span class="line">gem uninstall cocoapods-downloader</span><br><span class="line">gem uninstall cocoapods-plugins</span><br><span class="line">gem uninstall cocoapods-<span class="built_in">search</span></span><br><span class="line">gem uninstall cocoapods-stats</span><br><span class="line">gem uninstall cocoapods-trunk</span><br><span class="line">gem uninstall cocoapods-<span class="keyword">try</span></span><br></pre></td></tr></table></figure>

<ol start="7">
<li>初始化CocoaPods repo</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">pod setup</span><br></pre></td></tr></table></figure>
<p>这一步是比较耗时的，它是将 pod repo 的 镜像索引信息下载到 ~&#x2F;.cocoapods&#x2F;repos目录下,如果这个进度实在等得太久了可以试着 cd 到那个目录，用du -sh *来查看下载进度，我们怎么知道我们有哪些repo呢？</p>
<p>可以使用pod repo命令来查看：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">master</span><br><span class="line">- Type: git (master)</span><br><span class="line">- URL:  https:<span class="regexp">//gi</span>thub.com<span class="regexp">/CocoaPods/</span>Specs.git</span><br><span class="line">- Path: <span class="regexp">/Users/</span>huya<span class="regexp">/.cocoapods/</span>repos/master</span><br></pre></td></tr></table></figure>

<p>URL表示远程的repo库地址，Path表示下载存放的地址。Type 是代码库类型，上图表示的是从<a target="_blank" rel="noopener" href="https://github.com/CocoaPods/Specs.git">https://github.com/CocoaPods/Specs.git</a>这个地址，将镜像索引下载到本地的&#x2F;Users&#x2F;huya&#x2F;.cocoapods&#x2F;repos&#x2F;master 文件夹下。</p>
<p>镜像索引其实是一个配置文件，里面包含了某个库当前的版本，这些库的地址,如下图所示：<br><img src="/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/00002.png"></p>
<p>我们可以手动添加删除pod repo库</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">pod repo remove <span class="keyword">master</span></span><br><span class="line"><span class="title">pod</span> repo add <span class="keyword">master</span> <span class="title">https</span>://gitcafe.com/akuandev/Specs.git</span><br></pre></td></tr></table></figure>

<p>当然可以通过在Podfile中通过source来添加，这个后面会举例说明。</p>
<p>一旦setup之后，后续如果需要更新repo库可以通过来更新。</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod repo update</span></span><br></pre></td></tr></table></figure>

<h5 id="CocoaPods-常用命令行"><a href="#CocoaPods-常用命令行" class="headerlink" title="CocoaPods 常用命令行"></a><strong><strong>CocoaPods 常用命令行</strong></strong></h5><ol>
<li>初始化Pod</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">pod <span class="keyword">init</span></span><br></pre></td></tr></table></figure>
<p>这时候会在当前目录下新创建一个Podfile,后面将专门介绍如何编写Podfile</p>
<ol start="2">
<li>安装依赖</li>
</ol>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pod <span class="keyword">install</span></span><br></pre></td></tr></table></figure>
<p>这时候会参照Podfile从～&#x2F;.cocoapods&#x2F;repos&#x2F;对应的目录下寻找对应库的下载地址并将库下载到Pod文件夹下，然后生成对应的workspace文件，这个在后面介绍原理的时候再详细介绍</p>
<ol start="3">
<li>查找对应的pod库</li>
</ol>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod search</span></span><br></pre></td></tr></table></figure>

<p>如果只是开发的话一般上面几个命令就够用了</p>
<ol start="4">
<li>使用指定版本执行命令</li>
</ol>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod</span> <span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span> install</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>install 的时候输出详细过程Log</li>
</ol>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pod <span class="keyword">install</span> –verbose</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>更新某一个组件</li>
</ol>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> 不添加组件名则更新所有</span><br><span class="line">pod update [组件名]</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>更新本地依赖</li>
</ol>
<p>如果 github 或者私有仓库上面有最新版本，本地搜到的还是旧版本。如果 <code>Podfile</code> 中使用新的版本号，这样是无法执行成功的,这时候必须对本地依赖库进行一次更新。</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod repo update</span></span><br></pre></td></tr></table></figure>

<h5 id="多版本CocoaPods管理"><a href="#多版本CocoaPods管理" class="headerlink" title="多版本CocoaPods管理"></a><strong><strong>多版本CocoaPods管理</strong></strong></h5><p>有时候会遇到比如工作中我们协商好都用1.4.0 但是我们自己的某些练习项目需要用到1.8.4 这时候是最头疼的一件事情，为了解决这个问题我目前使用<strong><strong>Bundler</strong></strong>来管理各个项目的CocoaPods版本：</p>
<p>安装bundler:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">gem <span class="keyword">install</span> bundler</span><br></pre></td></tr></table></figure>

<p>和Cocoapods的Podfile文件一样，我们需要创建一个Gemfile文件，文件位置和Podifle所在位置相同即可，可以使用：</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">bundle <span class="keyword">init</span></span><br></pre></td></tr></table></figure>

<p>在Gemfile文件中，配置所需的Cocoapods版本：</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">source</span> <span class="string">&quot;https://rubygems.org&quot;</span></span><br><span class="line"><span class="attribute">gem</span> &#x27;cocoapods&#x27;, &#x27;<span class="number">1</span>.<span class="number">8</span>.<span class="number">4</span>&#x27;</span><br></pre></td></tr></table></figure>

<p>执行bundle install</p>
<p>之后就可以在相应位置，执行bundle exec pod xxxxx 就可以了。</p>
<h5 id="Podfile"><a href="#Podfile" class="headerlink" title="****Podfile ****"></a>****Podfile ****</h5><p>最全面的还是官方文档：<a target="_blank" rel="noopener" href="https://guides.cocoapods.org/syntax/podfile.html">Podfile 官方文档</a></p>
<p>一个比较简单的Podfile如下所示</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">source <span class="string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span></span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">&#x27;9.0&#x27;</span></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;IDLFundation&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># Pods for IDLFundation</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;IDLFundationTest&#x27;</span> <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># Pods for IDLFundationTest</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h6 id="1-install"><a href="#1-install" class="headerlink" title="1. install"></a>1. install</h6><p>这个命令是cocoapods声明的一个安装命令，用于安装引入Podfile里面的依赖库,也就是pod install执行时的一些参数设置，在项目中没有使用过，在这里先不做过多介绍，后面如果有机会会带大家过一下CocoaPods源码，到时候再看下这个配置的作用。</p>
<h6 id="2-source"><a href="#2-source" class="headerlink" title="2. source"></a>2. source</h6><p>source 用于指定specs的位置，sources的顺序是有关系的。CocoaPods将使用pod第一次出现的source中的最高版本.cocoapods 官方source是隐式的需要的，如果只有一个cocoapods官方的source则可以省去不写，但是一旦你指定了其他source 你就需要也把官方的指定上。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="3-target"><a href="#3-target" class="headerlink" title="3. target"></a>3. target</h6><p>target指明当前的依赖是针对哪个项目target的,可以在target块里面为某个指定的target定义依赖项,一般我们会通过def定义一个依赖集合，然后在不同的target引用，</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">common_Pods</span></span></span><br><span class="line">    <span class="comment">#架构基本</span></span><br><span class="line">    pod <span class="string">&#x27;ReactiveObjC&#x27;</span>, <span class="string">&#x27;~&gt; 3.1.1&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;PromiseKit&#x27;</span>, <span class="string">&#x27;~&gt; 1.0&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;Aspects&#x27;</span>, <span class="string">&#x27;~&gt; 1.4.1&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;Objection&#x27;</span>, <span class="string">&#x27;~&gt; 1.6.1&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;BlocksKit&#x27;</span>, <span class="string">&#x27;~&gt; 2.2.5&#x27;</span></span><br><span class="line">    </span><br><span class="line">    //.....</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">&#x27;9.0&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;IDLFundation&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  common_Pods</span><br><span class="line">  <span class="comment"># Pods for IDLFundation</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;IDLFundationTest&#x27;</span> <span class="keyword">do</span></span><br><span class="line">    common_Pods</span><br><span class="line">    <span class="comment"># Pods for IDLFundationTest</span></span><br><span class="line">    //........</span><br><span class="line">    pod <span class="string">&#x27;LookinServer&#x27;</span>, <span class="symbol">:configurations</span> =&gt; [<span class="string">&#x27;Debug&#x27;</span>]</span><br><span class="line">    pod <span class="string">&#x27;Reveal-SDK&#x27;</span>, <span class="symbol">:configurations</span> =&gt; [<span class="string">&#x27;Debug&#x27;</span>]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h6 id="4-platform"><a href="#4-platform" class="headerlink" title="4. platform"></a>4. platform</h6><p>platform指定了静态库应该被编译在哪个平台.下面是各个平台platform的默认值。</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">iOS</span> -&gt; <span class="number">4</span>.<span class="number">3</span></span><br><span class="line"><span class="attribute">OS</span> X -&gt; <span class="number">10</span>.<span class="number">6</span></span><br><span class="line"><span class="attribute">tvOS</span> -&gt; <span class="number">9</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">watchOS</span> -&gt; <span class="number">2</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<h6 id="5-inhibit-all-warnings"><a href="#5-inhibit-all-warnings" class="headerlink" title="5. inhibit_all_warnings"></a>5. inhibit_all_warnings</h6><p>inhibit_all_warnings! 用于屏蔽cocoapods库里面的所有警告，它也可以用于屏蔽某个库的编译警告</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;SSZipArchive&#x27;</span>, :<span class="function"><span class="params">inhibit_warnings</span> =&gt;</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="6-use-frameworks"><a href="#6-use-frameworks" class="headerlink" title="6. use_frameworks"></a>6. use_frameworks</h6><p>use_frameworks用于告诉CocoaPods我们想使用Frameworks而不是Static Libraries。不显式指定的话会默认使用Static Libraries，会在Pods工程下的Products目录下生成.a的静态库，如果指定的话会在Pods工程下的Frameworks目录下生成依赖库的framework，由于Swift不支持静态库，所以如果项目中使用到Swift库的话就必须使用use_frameworks!，纯OC项目是不用use_frameworks的。</p>
<h6 id="7-Pod"><a href="#7-Pod" class="headerlink" title="7. Pod"></a>7. Pod</h6><p>指定每个target的依赖项</p>
<ul>
<li>如果后面不写依赖库的具体版本号，那么cocoapods会默认选取最新版本,一般不推荐使用这种方式，因为库升级的时候可能会带来不兼容或者其他怪异的问题，一般我们项目中都不会使用这种方式，而是在使用库的时候明确指明库对应的版本，如果要升级库也要我们明确，库的升级是否会给我们带来问题，并通过测试后才能升级发布，否则一个项目中有几十个库，很难追踪问题是哪个库升级导致的。</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod</span> <span class="string">&#x27;SSZipArchive&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>要特定的依赖库的版本，只需要在后面写上具体版本号即可：</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod</span> <span class="string">&#x27;Objection&#x27;</span>, <span class="string">&#x27;0.9&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当然除了指定特定版本外还可以通过下面的来指定版本范围，但是个人还是推荐明确指明所依赖的库的版本。</li>
</ul>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="bullet">* </span>&gt; 0.1 高于0.1版本（不包含0.1版本）的任意一个版本</span><br><span class="line"><span class="bullet">* </span>&gt;= 0.1 高于0.1版本（包含0.1版本）的任意一个版本</span><br><span class="line"><span class="bullet">* </span>&lt; 0.1 低于0.1版本（不包含0.1版本）的任意一个</span><br><span class="line"><span class="bullet">* </span>&lt;= 0.1低于0.1版本（包含0.1版本）的任意一个</span><br><span class="line"><span class="bullet">* </span>~&gt; 0.1.2 版本 这个例子等效于&gt;= 0.1.2并且 &lt;0.2.0，并且始终是你指定范围内的最新版本,一般同一个版本簇的API都是需要兼容的，所以这也是一个比较合理的方式，但是很难避免某些三方库的开发人员没有这方面的考虑和支持，因此还是推荐明确指定使用的版本。</span><br></pre></td></tr></table></figure>
<ul>
<li>pod 中还可以指定当前依赖只在某些给定的build configuration中被启用，比如：</li>
</ul>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;LookinServer&#x27;</span>, :<span class="function"><span class="params">configurations</span> =&gt;</span> [<span class="string">&#x27;Debug&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>正常情况下我们会通过依赖库的名称来引入，但是有些依赖库是有多个子依赖的，比如:</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">pod</span> <span class="string">&#x27;Firebase/Analytics&#x27;</span></span><br><span class="line">pod <span class="string">&#x27;Firebase/Performance&#x27;</span></span><br><span class="line">pod <span class="string">&#x27;Firebase/RemoteConfig&#x27;</span></span><br></pre></td></tr></table></figure>
<p>这种除了使用上面写法外，还可以通过Subspecs来代替,但是个人还是推荐上面的写法比较简单：</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;Firebase&#x27;</span>, :<span class="function"><span class="params">subspecs</span> =&gt;</span> [<span class="string">&#x27;RemoteConfig&#x27;</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>使用本地依赖</li>
</ul>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;AFNetworking&#x27;</span>, :<span class="function"><span class="params">path</span> =&gt;</span> <span class="string">&#x27;~/Documents/AFNetworking&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用指定远程依赖</li>
</ul>
<p>引入master分支（默认）</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;AFNetworking&#x27;</span>, :<span class="function"><span class="params">git</span> =&gt;</span> <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span></span><br></pre></td></tr></table></figure>
<p>引入指定的分支</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;AFNetworking&#x27;</span>, :<span class="function"><span class="params">git</span> =&gt;</span> <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span>, :<span class="function"><span class="params">branch</span> =&gt;</span> <span class="string">&#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure>
<p>引入某个Tag标签的代码</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;AFNetworking&#x27;</span>, :<span class="function"><span class="params">git</span> =&gt;</span> <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span>, :<span class="function"><span class="params">tag</span> =&gt;</span> <span class="string">&#x27;0.7.0&#x27;</span></span><br></pre></td></tr></table></figure>
<p>引入某个特殊的提交节点</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;AFNetworking&#x27;</span>, :<span class="function"><span class="params">git</span> =&gt;</span> <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span>, :<span class="function"><span class="params">commit</span> =&gt;</span> <span class="string">&#x27;082f8319af&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>从另一个源库引入</li>
</ul>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;PonyDebugger&#x27;</span>, :<span class="function"><span class="params">source</span> =&gt;</span> <span class="string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod <span class="string">&#x27;JSONKit&#x27;</span>, :<span class="function"><span class="params">podspec</span> =&gt;</span> <span class="string">&#x27;https://example.com/JSONKit.podspec&#x27;</span></span><br></pre></td></tr></table></figure>

<p>podspec 用于指定podspec的信息：</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 不指定表示使用根目录下的podspec，默认一般都会放在根目录下,并且使用库名作为名称</span></span><br><span class="line">podspec</span><br><span class="line"><span class="comment"># 如果podspec的名字与库名不一样，可以通过这样来指定</span></span><br><span class="line">podspec <span class="symbol">:name</span> =&gt; <span class="string">&#x27;DemoPodSpect&#x27;</span></span><br><span class="line"><span class="comment"># 如果podspec不是在根目录下，那么可以通过:path来指定路径</span></span><br><span class="line">podspec <span class="symbol">:path</span> =&gt; <span class="string">&#x27;/Documents/PrettyKit/PrettyKit.podspec&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="8-project"><a href="#8-project" class="headerlink" title="8. project"></a>8. project</h6><p>用于指定当前target要应用到哪个project，这个用在多project的情况下，如果没有指定说明该target要应用到Podfile目录下与target同名的工程</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># MusicApp这个target只有在MyMusic工程中才会链接</span></span><br><span class="line">target <span class="string">&#x27;MusicApp&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  project <span class="string">&#x27;MyMusic&#x27;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NotesApp这个target只有在MyNotes工程中才会链接</span></span><br><span class="line">target <span class="string">&#x27;NotesApp&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  project <span class="string">&#x27;MyNotes&#x27;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h6 id="9-workspace"><a href="#9-workspace" class="headerlink" title="9. workspace"></a>9. workspace</h6><p>默认情况下不需要指定，直接使用与Podfile所在目录的工程名一样就可以了。如果要指定另外的名称，而不是使用工程的名称，可以使用workspace来指定：</p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line"><span class="keyword">workspace</span> <span class="string">&#x27;MyWorkspace&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="10-def"><a href="#10-def" class="headerlink" title="10. def"></a>10. def</h6><p>def命令来声明一个pod集, 然后在需要引入的target中引入：</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">common_Pods</span></span></span><br><span class="line">    <span class="comment">#架构基本</span></span><br><span class="line">    pod <span class="string">&#x27;ReactiveObjC&#x27;</span>, <span class="string">&#x27;~&gt; 3.1.1&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;PromiseKit&#x27;</span>, <span class="string">&#x27;~&gt; 1.0&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;Aspects&#x27;</span>, <span class="string">&#x27;~&gt; 1.4.1&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;Objection&#x27;</span>, <span class="string">&#x27;~&gt; 1.6.1&#x27;</span></span><br><span class="line">    pod <span class="string">&#x27;BlocksKit&#x27;</span>, <span class="string">&#x27;~&gt; 2.2.5&#x27;</span></span><br><span class="line">    </span><br><span class="line">    //.....</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">&#x27;9.0&#x27;</span></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;IDLFundation&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  common_Pods</span><br><span class="line">  <span class="comment"># Pods for IDLFundation</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;IDLFundationTest&#x27;</span> <span class="keyword">do</span></span><br><span class="line">    common_Pods</span><br><span class="line">    <span class="comment"># Pods for IDLFundationTest</span></span><br><span class="line">    //........</span><br><span class="line">    pod <span class="string">&#x27;LookinServer&#x27;</span>, <span class="symbol">:configurations</span> =&gt; [<span class="string">&#x27;Debug&#x27;</span>]</span><br><span class="line">    pod <span class="string">&#x27;Reveal-SDK&#x27;</span>, <span class="symbol">:configurations</span> =&gt; [<span class="string">&#x27;Debug&#x27;</span>]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h6 id="11-pre-install"><a href="#11-pre-install" class="headerlink" title="11. pre_install"></a>11. pre_install</h6><p>这个允许用户在Pods下载完成，但还未安装前对Pods做一些修改，它有一个唯一参数Pod::Installer</p>
<figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">pre_install <span class="built_in">do</span> |<span class="type">installer</span>|</span><br><span class="line">  <span class="type">#......</span></span><br><span class="line"><span class="type">end</span></span><br></pre></td></tr></table></figure>

<h6 id="12-post-install"><a href="#12-post-install" class="headerlink" title="12. post_install"></a>12. post_install</h6><p>当我们安装完成，但是生成的工程还没有写入磁盘之时，我们可以指定要执行的操作。比如，我们可以在写入磁盘之前，修改一些工程的配置：<br>这两个在项目中暂时没有遇到过。</p>
<figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">post_install <span class="built_in">do</span> |<span class="type">installer</span>| <span class="type">installer</span>.pods_project.targets.each <span class="built_in">do</span> |<span class="type">target</span>| </span><br><span class="line">        <span class="type">target</span>.build_configurations.each <span class="built_in">do</span> |<span class="type">config</span>| </span><br><span class="line">            <span class="type">config</span>.build_settings[&#x27;GCC_ENABLE_OBJC_GC&#x27;] = &#x27;supported&#x27; </span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>下面是一个比较全的一个Podfile模版,供大家参考：</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">source <span class="string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span> <span class="comment"># 组件依赖文件所存放仓库，根据需求可引入多个</span></span><br><span class="line">source <span class="string">&#x27;https://github.com/artsy/Specs.git&#x27;</span></span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">&#x27;8.0&#x27;</span>            <span class="comment"># </span></span><br><span class="line">inhibit_all_warnings!           <span class="comment"># 忽视引用的代码中的警告</span></span><br><span class="line">workspace <span class="string">&#x27;CocoaPodsDemo&#x27;</span>       <span class="comment"># 指定生成的 workspace 名字</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">common_pods</span></span>                 <span class="comment"># 如果有多个 target，可以将公共部分进行 def 定义再引入</span></span><br><span class="line">    pod <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">&#x27;CocoaPodsDemo&#x27;</span> <span class="keyword">do</span></span><br><span class="line">    project <span class="string">&#x27;DemoProject&#x27;</span>       <span class="comment"># 可用于指定实际的工程</span></span><br><span class="line">    use_frameworks!             <span class="comment"># 是否以 framework 形式引入。swift 必须有这个关键字 </span></span><br><span class="line">    common_pods              <span class="comment"># 公共引入的组件</span></span><br><span class="line">    pod <span class="string">&#x27;SSipArchive&#x27;</span>, <span class="symbol">:inhibit_warnings</span> =&gt; <span class="literal">true</span>   <span class="comment"># 屏蔽某个 pod 的 warning</span></span><br><span class="line">    pod <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="string">&#x27;3.2&#x27;</span>   <span class="comment"># 使用 3.2 版本</span></span><br><span class="line">    pod <span class="string">&#x27;YYCache&#x27;</span>, <span class="string">&#x27;~&gt; 0.3&#x27;</span>     <span class="comment"># pod update 时最高升级到 &lt; 1.0，不包括 1.0</span></span><br><span class="line">    </span><br><span class="line">   <span class="comment"># Build 环境配置</span></span><br><span class="line">   pod <span class="string">&#x27;PonyDebugger&#x27;</span>, <span class="symbol">:configurations</span> =&gt; [<span class="string">&#x27;Debug&#x27;</span>, <span class="string">&#x27;Beta&#x27;</span>]</span><br><span class="line">   pod <span class="string">&#x27;PonyDebugger&#x27;</span>, <span class="symbol">:configuration</span> =&gt; <span class="string">&#x27;Debug&#x27;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 使用具体的某个 subspec</span></span><br><span class="line">   pod <span class="string">&#x27;QueryKit/Attribute&#x27;</span></span><br><span class="line">   pod <span class="string">&#x27;QueryKit&#x27;</span>, <span class="symbol">:subspecs</span> =&gt; [<span class="string">&#x27;Attribute&#x27;</span>, <span class="string">&#x27;QuerySet&#x27;</span>]</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 引用本地组件</span></span><br><span class="line">   pod <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="symbol">:path</span> =&gt; <span class="string">&#x27;~/Documents/AFNetworking&#x27;</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 使用具体仓库</span></span><br><span class="line">   pod <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="symbol">:git</span> =&gt; <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span></span><br><span class="line">   <span class="comment"># 使用具体仓库具体分支</span></span><br><span class="line">   pod <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="symbol">:git</span> =&gt; <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span>, <span class="symbol">:branch</span> =&gt; <span class="string">&#x27;dev&#x27;</span></span><br><span class="line">   <span class="comment"># 使用具体仓库的某个 tag</span></span><br><span class="line">   pod <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="symbol">:git</span> =&gt; <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span>, <span class="symbol">:tag</span> =&gt; <span class="string">&#x27;0.7.0&#x27;</span></span><br><span class="line">   <span class="comment"># 使用具体仓库的某个 commit</span></span><br><span class="line">   pod <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="symbol">:git</span> =&gt; <span class="string">&#x27;https://github.com/gowalla/AFNetworking.git&#x27;</span>, <span class="symbol">:commit</span> =&gt; <span class="string">&#x27;082f8319af&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用指定路径的 spec 文件</span></span><br><span class="line">   pod <span class="string">&#x27;JSONKit&#x27;</span>, <span class="symbol">:podspec</span> =&gt; <span class="string">&#x27;https://example.com/JSONKit.podspec&#x27;</span></span><br><span class="line">   </span><br><span class="line">   target <span class="string">&#x27;ShowsApp&#x27;</span> <span class="keyword">do</span></span><br><span class="line">     pod <span class="string">&#x27;ShowsKit&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># Has its own copy of ShowsKit + ShowTVAuth</span></span><br><span class="line">       target <span class="string">&#x27;ShowsTV&#x27;</span> <span class="keyword">do</span></span><br><span class="line">       pod <span class="string">&#x27;ShowTVAuth&#x27;</span></span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># Has its own copy of Specta + Expecta</span></span><br><span class="line">      <span class="comment"># and has access to ShowsKit via the app</span></span><br><span class="line">     <span class="comment"># that the test target is bundled into</span></span><br><span class="line">      target <span class="string">&#x27;ShowsTests&#x27;</span> <span class="keyword">do</span></span><br><span class="line">       <span class="comment"># inherit！ 有三种类型：&#x27;:complete&#x27; 继承父级所有行为；&#x27;:none&#x27; 什么行为都不继承；&#x27;:search_paths&#x27; 继承父级的 search paths</span></span><br><span class="line">        inherit! <span class="symbol">:search_paths</span></span><br><span class="line">        pod <span class="string">&#x27;Specta&#x27;</span></span><br><span class="line">        pod <span class="string">&#x27;Expecta&#x27;</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hook 配置, 在 preparing 阶段后，install 之前</span></span><br><span class="line">pre_install <span class="keyword">do</span> |installer|</span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hook 配置，在 pod install 之后，可用于修改工程配置等</span></span><br><span class="line">post_install <span class="keyword">do</span> |installer|</span><br><span class="line">  installer.pods_project.targets.each <span class="keyword">do</span> |target|</span><br><span class="line">    target.build_configurations.each <span class="keyword">do</span> |config|</span><br><span class="line">      config.build_settings[<span class="string">&#x27;GCC_ENABLE_OBJC_GC&#x27;</span>] = <span class="string">&#x27;supported&#x27;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="CocoaPods-工作原理"><a href="#CocoaPods-工作原理" class="headerlink" title="CocoaPods 工作原理"></a><strong><strong>CocoaPods 工作原理</strong></strong></h5><p>关于CocoaPods的工作原理的细节大家可以翻看下CocoaPods的源码看下整个流程：<br>下面推荐几篇CocoaPod源码解析文章给大家，大家可以结合这些文章对源码进行解析：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://draveness.me/cocoapods">CocoaPods 都做了什么？</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5b1cfaff6fb9a01e417b6051">我所理解的 CocoaPods</a></li>
<li><a target="_blank" rel="noopener" href="https://myseven.github.io/2018-04-25/Cocoapods%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">Cocoapods源码解析</a></li>
</ul>
<p>这里只想从使用者的角度来介绍下CocoaPods工作原理,主要包括</p>
<ol>
<li>CocoaPods的组成</li>
<li>CocoaPods的工作流</li>
<li>pod install,pod update，Podfile.lock,Manifest.lock</li>
</ol>
<ul>
<li><strong><strong>CocoaPods的组成</strong></strong></li>
</ul>
<p>CocoaPods 本身是由Ruby编写的，它是由多个Ruby包组成的，最主要包括CocoaPods Core，CocoaPods Downloader，Xcodeproj，CLAide，Molinillo这些Ruby包，这些包是通过gem进行管理的，当我们执行pod 命令的时候就会调用对应的模块完成对应的任务，下面是对应模块的源码地址，作用，以及对应的帮助文档，大家在遇到问题的时候可以查找这些资料来解决问题。</p>
<table>
<thead>
<tr>
<th>模块</th>
<th>说明</th>
<th>帮助文档</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/Specs.git">CocoaPods&#x2F;Specs</a></td>
<td>三方库Podspec文件托管仓库</td>
<td><a target="_blank" rel="noopener" href="https://guides.cocoapods.org/making/specs-and-specs-repo.html">Doc</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a></td>
<td>CocoaPod 命令行工具</td>
<td><a target="_blank" rel="noopener" href="https://guides.cocoapods.org/">Guide</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/Core">CocoaPods Core</a></td>
<td>CocoaPods 相关文件(Specification,Podfile,Source)的处理</td>
<td><a target="_blank" rel="noopener" href="https://guides.cocoapods.org/">Guide</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/cocoapods-downloader">CocoaPods Downloader</a></td>
<td>支持git&#x2F;SVN&#x2F;等多种协议的代码下载器</td>
<td><a target="_blank" rel="noopener" href="https://www.rubydoc.info/gems/cocoapods-downloader">Guide</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/Xcodeproj">Xcodeproj</a></td>
<td>创建和修改Xcode projects文件</td>
<td><a target="_blank" rel="noopener" href="https://www.rubydoc.info/gems/xcodeproj">Guide</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/CLAide">CLAide</a></td>
<td>命令行接口框架</td>
<td><a target="_blank" rel="noopener" href="https://www.rubydoc.info/gems/claide">Guide</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/CocoaPods/Molinillo">Molinillo</a></td>
<td>通用依赖解析器</td>
<td><a target="_blank" rel="noopener" href="https://www.rubydoc.info/gems/molinillo">Guide</a></td>
</tr>
</tbody></table>
<ul>
<li><strong><strong>CocoaPods的工作流</strong></strong></li>
</ul>
<p>整个CocoaPods涉及到了三方组件库的开发者，CocoaPods Repo，三方组件库的使用者，三方面对象，整个关系如下图所示：<br><img src="/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/00003.png"></p>
<ol>
<li><p>首先三方组件库的开发者编写完三方库的代码后会将组件代码上传到GitHub&#x2F;SVN等代码托管仓库，然后创建一个 podspec 文件，该文件包含了该组件包含的代码及资源，以及依赖关系，版本信息，以及该组件的存储地址,然后将这个podspec推送到CocoaPods共有仓库或者私有Spec管理仓库。</p>
</li>
<li><p>在运行pod setup或者pod install的时候会查看source指令，将source指令所指定的repo 下载到<del>&#x2F;.cocoapods&#x2F;repos目录下。这个文件夹下包含了各个三方组件对应版本以及该版本的podspec文件和podspec.json文件，后续需要下载的时候就可以根据podspec中指定的下载路径下载三方组件了。如果有一个第三方库发布了一个最新的版本，如果不执行pod repo update，那么本地是不会知道有一个最新版本的，还一直以本地的资源目录为准。那么我们永远都拿不到这个库的最新版本，但是有时候我们不执行pod repo update发现也可以拿到最新的库，那是因为pod update会先拉取远程最新目录，再根据目录中的资源重新更新一遍pod，但是如果podfile没有为每个库指定明确的版本，那么每次都会拉取一遍最新库，这时候如果不想每次都拉取，可以使用pod update –no-repo-update。正常情况下pod repo update 会将</del>&#x2F;.cocoapods&#x2F;repos&#x2F;下的所有组件库都更新一遍，如果只想更新某个私有库那么只需要带上需要更新的文件夹就可以只更新某个repo了。</p>
 <figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">pod repo update ~<span class="regexp">/.cocoapods/</span>repos<span class="regexp">/XXX/</span></span><br></pre></td></tr></table></figure></li>
<li><p>三方组件库使用者要使用某个组件，需要在Podfile中指定组件名字，版本，repo 源，然后运行pod install命令，CocoaPods 会首先使用eval运行Podfile，并开始解析Podfile。</p>
<p> <strong><strong>pod install可以分成如下阶段</strong></strong>：</p>
</li>
</ol>
<ul>
<li><p>prepare 准备阶段<br>在该阶段首先会先检查当前运行目录是否是项目根目录，为啥要在根目录？因为pod init的时候需要从.xcodeproj中获取target信息，这就导致了生成的Podfile在项目根目录，而pod install需要Podfile所以也必须需要在根目录。接着检查Podfile.lock文件cocoapods和当前的cocoapods版本是否一致，Podfile中的plugin插件是否已经安装完成并加载，一旦这些检查完毕就会创建Pods以及子目录，并运行pre_install。</p>
</li>
<li><p>resolve_dependencies 解决依赖冲突<br>这个阶段主要是解析podfile文件中的pod 以及 target等信息以及之间的关系，存储到对应的数据结构中。如果Podfile中有删除的库, 先进行文件清理。</p>
</li>
<li><p>download_dependencies 下载依赖<br>这个阶段会拿着组件名，组件版本到~&#x2F;.cocoapods&#x2F;repos&#x2F;中去寻找对应的podspec，在podspec文件中找到三方组件存放的地址，从而从远程下载。当然不是每个都需要下载，如果某个组件已经下载，并且版本没有变化的情况下就不会从远程下载。</p>
</li>
<li><p>validate_targets target校验<br>这阶段将会对下载的依赖进行校验，比如校验是否有多重引用framework 或者 library 的情况，检查不同target所使用的swift版本是否相同，如果使用swift的情况下，检查Podfile是否添加了use_frameworks!。</p>
</li>
<li><p>generate_pods_project 生成 Pod project 文件<br>这阶段将会生成Pods.xcodeproj工程文件,并将下载的依赖文件，Library 加入工程，处理 target 依赖，并将项目文件以及Pods项目文件添加到新生成的.xcworkspace文件。</p>
</li>
<li><p><strong><strong>pod install,pod update，Podfile.lock,Manifest.lock</strong></strong></p>
</li>
</ul>
<p>其实上面已经对这部分内容有所介绍了，这里将这些内容放在一起对比下会更加明显：</p>
<p>在项目第一次使用Cocoapods时候，或者在podfile文件中增加或者删除某个组件的时候需要使用pod install而不是pod update。</p>
<p>当运行pod install，它只解析Podfile.lock中没有的pod的依赖库.对于Podfile.lock中已经有的组件库, Podfile.lock不会尝试检查~&#x2F;.cocoapods&#x2F;repos是否有更新的版本.对于没有在Podfile.lock中列出的组件库,pod会搜索与Podfile匹配的版本或最新的版本，并将每个组件已经安装的版本写入到Podfile.lock中.也就是说Podfile.lock 的功能是用于跟踪每个组件的已安装版本并锁定这些版本。</p>
<p>简单说：pod install会优先考虑Podfile里指定的版本信息，其次考虑Podfile.lock 里指定的版本信息来安装对应的依赖库，而不会每次都考虑~&#x2F;.cocoapods&#x2F;repos的最新版本</p>
<p>当运行pod update的时候CocoaPods将尝试查找更新的组件版本, 并且会忽略掉Podfile.lock中已经存在的版本.</p>
<p>在多人协作的项目中一般需要将Podfile.lock文件提交到版本控制库中，这样大家就会保证同一时刻使用的三方组件库是一致的，只有在确认某个更新需要同步的时候，某人运行pod update后将Podfile.lock再次提交到代码仓库，其他人拉取到这个最新的Podfile.lock的时候就会提示需要更新，这时候其他人就也需要使用pod update 更新本地的三方组件，但是不论怎样，整个团队的三方组件库总是一致的。</p>
<p>上面介绍了Podfile.lock 那么 Manifest.lock 的作用又是什么？Manifest.lock 是 Podfile.lock 的副本，每次只要生成 Podfile.lock 时就会生成一个一样的 Manifest.lock 存储在 Pods 文件夹下。在每次项目 Build 的时候，会跑一下脚本检查一下 Podfile.lock 和 Manifest.lock 是否一致。也就是说Manifest.lock是用于记录本地&#x2F;Pod目录下各个组件库的版本信息，那不是和Podfile.lock重复了么？不是的，因为一般我们会将Podfile.lock放到代码仓库中，这部分是有可能其他人远程改动后，我们拉下来，这时候有可能导致Podfile.lock中指定的组件版本和本地的组件版本不一致，那么我们怎么发现这种不一致呢？靠Podfile？这是不可能的，一般就是因为Podfile改了，pod update后导致Podfile.lock发生改动，这样如果没有Manifest.lock 就难以判断远程的是否和本地的版本有差异了，也就是说Manifest.lock 用于标记本地sandbox中三方组件的版本，这也是为什么有了Podfile.lock之后还需要Manifest.lock 的原因了。</p>
<h5 id="CocoaPods-私有库-x2F-共有库-制作依赖库"><a href="#CocoaPods-私有库-x2F-共有库-制作依赖库" class="headerlink" title="CocoaPods 私有库&#x2F;共有库 制作依赖库"></a><strong><strong>CocoaPods 私有库&#x2F;共有库 制作依赖库</strong></strong></h5><h6 id="1-创建组件库工程"><a href="#1-创建组件库工程" class="headerlink" title="1 创建组件库工程"></a>1 创建组件库工程</h6><p>将代码clone到本地，在根目录运行：</p>
<figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">pod <span class="keyword">lib</span> <span class="keyword">create</span> IDLUtils</span><br></pre></td></tr></table></figure>

<p>会自动引导我们创建一个组件库：</p>
<p><img src="/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/0000004.png"></p>
<p>这时候会生成IDLUtils.podspec文件，文件内容如下：</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"># 在提交前需要先运行 pod lib lint IDLUtils.podspec 来对当前文件进行校验，并且删除包括所有无用的注释。 </span><br><span class="line"># </span><br><span class="line"># 如果有关于Podspec 的可以查看 https:<span class="comment">//guides.cocoapods.org/syntax/podspec.html 文档</span></span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">Pod::Spec.new do |s|</span><br><span class="line"></span><br><span class="line">  # 组件名</span><br><span class="line">  s.name             = <span class="string">&#x27;IDLUtils&#x27;</span></span><br><span class="line">  # 组件版本号，命名规则遵循 https:<span class="comment">//semver.org/</span></span><br><span class="line">  s.version          = <span class="string">&#x27;0.0.1&#x27;</span></span><br><span class="line">  # 概要</span><br><span class="line">  s.summary          = <span class="string">&#x27;IDLUtils is a Collection of Utils Help to speed up your develop.&#x27;</span></span><br><span class="line"></span><br><span class="line">  # 这个描述会出现在搜索结果上，因此我们可以描述以下信息：</span><br><span class="line">  #</span><br><span class="line">  #   * 这个库的功能是什么？为什么要实现它，它的关注点在哪里</span><br><span class="line">  #   * 尽量简单明了.</span><br><span class="line">  #   * 在下面的DESC分隔符之间写下描述</span><br><span class="line">  #   * 最后，不要担心缩进，CocoaPods会自动删除它</span><br><span class="line"></span><br><span class="line">  s.description      = <span class="string">&quot;IDLUtils is a Collection of Utils Help to speed up your develop. Hope you like it &quot;</span></span><br><span class="line"></span><br><span class="line">  # 仓库主页</span><br><span class="line">  s.homepage         = <span class="string">&#x27;http://coderlin.coding.me&#x27;</span></span><br><span class="line">  # s.screenshots     = <span class="string">&#x27;www.example.com/screenshots_1&#x27;</span>, <span class="string">&#x27;www.example.com/screenshots_2&#x27;</span></span><br><span class="line">  # 遵循的协议</span><br><span class="line">  s.license          = &#123; :type =&gt; <span class="string">&#x27;MIT&#x27;</span>, :file =&gt; <span class="string">&#x27;LICENSE&#x27;</span> &#125;</span><br><span class="line">  # 作者</span><br><span class="line">  s.author           = &#123; <span class="string">&#x27;tbfungeek&#x27;</span> =&gt; <span class="string">&#x27;tbfungeek@163.com&#x27;</span> &#125;</span><br><span class="line">  # 在线源码仓库</span><br><span class="line">  s.source           = &#123; :git =&gt; <span class="string">&#x27;https://github.com/tbfungeek/IDLUtils.git&#x27;</span>, :tag =&gt; s.version.to_s &#125;</span><br><span class="line">  # 作者社交联系地址</span><br><span class="line">  # s.social_media_url = <span class="string">&#x27;https://twitter.com/&lt;TWITTER_USERNAME&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">  # 目标版本</span><br><span class="line">  s.ios.deployment_target = <span class="string">&#x27;9.0&#x27;</span></span><br><span class="line">  # 源文件</span><br><span class="line">  s.source_files = <span class="string">&#x27;IDLUtils/Classes/**/*&#x27;</span></span><br><span class="line">  </span><br><span class="line">  #资源</span><br><span class="line">  # s.resource_bundles = &#123;</span><br><span class="line">  #   <span class="string">&#x27;IDLUtils&#x27;</span> =&gt; [<span class="string">&#x27;IDLUtils/Assets/*.png&#x27;</span>]</span><br><span class="line">  # &#125;</span><br><span class="line"></span><br><span class="line">  #公开的头文件</span><br><span class="line">  # s.public_header_files = <span class="string">&#x27;Pod/Classes/**/*.h&#x27;</span></span><br><span class="line">  #依赖的库</span><br><span class="line">  # s.frameworks = <span class="string">&#x27;UIKit&#x27;</span>, <span class="string">&#x27;MapKit&#x27;</span></span><br><span class="line">  # s.dependency <span class="string">&#x27;AFNetworking&#x27;</span>, <span class="string">&#x27;~&gt; 2.3&#x27;</span></span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下面是pod spec create 创建的大家可以对比下，这种方式生成的选项更多，但是pod lib create 对于简单的组件已经够用了。 </p>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line">#  在提交前需要先运行 pod spec lint IDLKeyChainTool.podspec 来对当前文件进行校验，并且删除包括所有无用的注释。</span><br><span class="line">#</span><br><span class="line">#  如果要查看Podspec的属性可以查看：http:<span class="comment">//docs.cocoapods.org/specification.html</span></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">Pod::Spec.new do |s|</span><br><span class="line"></span><br><span class="line">  # ―――  Spec Metadata  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  # 这些信息主要用于方便使用者能够快速查找到我们这个组件库，所以最好写得简单明了</span><br><span class="line">  #</span><br><span class="line">  # 组件名</span><br><span class="line">  s.name         = <span class="string">&quot;IDLKeyChainTool&quot;</span></span><br><span class="line">  # 组件版本号，命名规则遵循 https:<span class="comment">//semver.org/</span></span><br><span class="line">  s.version      = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">  # 概要</span><br><span class="line">  s.summary      = <span class="string">&quot;A short description of IDLKeyChainTool.&quot;</span></span><br><span class="line"></span><br><span class="line">  # 这个描述会出现在搜索结果上，因此我们可以描述以下信息：</span><br><span class="line">  #</span><br><span class="line">  #   * 这个库的功能是什么？为什么要实现它，它的关注点在哪里</span><br><span class="line">  #   * 尽量简单明了.</span><br><span class="line">  #   * 在下面的DESC分隔符之间写下描述</span><br><span class="line">  #   * 最后，不要担心缩进，CocoaPods会自动删除它</span><br><span class="line">  # 详细描述，很重要的</span><br><span class="line">  s.description  = <span class="string">&quot;This is a KeyChain Tool for Objective C&quot;</span></span><br><span class="line">  # 仓库主页</span><br><span class="line">  s.homepage     = <span class="string">&quot;http://EXAMPLE/IDLKeyChainTool&quot;</span></span><br><span class="line">  # 展示截图</span><br><span class="line">  # s.screenshots  = <span class="string">&quot;www.example.com/screenshots_1.gif&quot;</span>, <span class="string">&quot;www.example.com/screenshots_2.gif&quot;</span></span><br><span class="line"></span><br><span class="line">  # ―――  Spec License  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  #  当前组件库所使用的证书，可以查看 http:<span class="comment">//choosealicense.com 对应的说明，CocoaPods将会查看对应的组件库是否有文件名为LICENSE*的文件</span></span><br><span class="line">  #  比较常见的有 <span class="string">&#x27;MIT&#x27;</span>, <span class="string">&#x27;BSD&#x27;</span><span class="string">&#x27;Apache License, Version 2.0&#x27;</span> 类型</span><br><span class="line">  #</span><br><span class="line">  # 许可证</span><br><span class="line">  s.license      = <span class="string">&quot;MIT (example)&quot;</span></span><br><span class="line">  # s.license      = &#123; :type =&gt; <span class="string">&quot;MIT&quot;</span>, :file =&gt; <span class="string">&quot;FILE_LICENSE&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">  # ――― Author Metadata  ――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  #  这里可以指定作者名称，邮箱，以及社交网站主页地址</span><br><span class="line">  #</span><br><span class="line">  s.author             = &#123; <span class="string">&quot;Xiaohai.lin&quot;</span> =&gt; <span class="string">&quot;tbfungeek@163.com&quot;</span> &#125;</span><br><span class="line">  # Or just: s.author    = <span class="string">&quot;Xiaohai.lin&quot;</span></span><br><span class="line">  # s.authors            = &#123; <span class="string">&quot;Xiaohai.lin&quot;</span> =&gt; <span class="string">&quot;tbfungeek@163.com&quot;</span> &#125;</span><br><span class="line">  # s.social_media_url   = <span class="string">&quot;http://twitter.com/Xiaohai.lin&quot;</span></span><br><span class="line"></span><br><span class="line">  # ――― Platform Specifics ――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  #  这里可以指定对应的平台信息</span><br><span class="line">  #</span><br><span class="line">  # s.platform     = :ios</span><br><span class="line">  s.platform     = :ios, <span class="string">&quot;9.0&quot;</span></span><br><span class="line"></span><br><span class="line">  #  When using multiple platforms</span><br><span class="line">  # s.ios.deployment_target = <span class="string">&quot;5.0&quot;</span></span><br><span class="line">  # s.osx.deployment_target = <span class="string">&quot;10.7&quot;</span></span><br><span class="line">  # s.watchos.deployment_target = <span class="string">&quot;2.0&quot;</span></span><br><span class="line">  # s.tvos.deployment_target = <span class="string">&quot;9.0&quot;</span></span><br><span class="line">  # ――― Source Location ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  #  这里用于指定到哪里获取代码，CocoasPods支持git, hg, bzr, svn， HTTP等协议的代码托管地址</span><br><span class="line">  #</span><br><span class="line"></span><br><span class="line">  s.source       = &#123; :git =&gt; <span class="string">&quot;https://github.com/tbfungeek/IDLKeyChainTool.git&quot;</span>, :tag =&gt; <span class="string">&quot;#&#123;s.version&#125;&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">  # ――― Source Code ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  #  CocoaPods 中一般使用一个文件夹作为代码文件夹，文件夹下可以包含</span><br><span class="line">  #  swift, h, m, mm, c/cpp文件，只要在s.source_files中指定就好</span><br><span class="line">  #  s.exclude_files中指定的文件会被剔除，而s.public_header_files文件将会对全局可见</span><br><span class="line">  #</span><br><span class="line"></span><br><span class="line">  s.source_files  = <span class="string">&quot;Classes&quot;</span>, <span class="string">&quot;Classes/**/*.&#123;h,m&#125;&quot;</span></span><br><span class="line">  s.exclude_files = <span class="string">&quot;Classes/Exclude&quot;</span></span><br><span class="line">  # 引入的共有头文件</span><br><span class="line">  # s.public_header_files = <span class="string">&quot;Classes/**/*.h&quot;</span></span><br><span class="line">  # 引入的私有头文件</span><br><span class="line">  #spec.private_header_files = <span class="string">&#x27;Headers/Private/*.h&#x27;</span></span><br><span class="line"></span><br><span class="line">  # ――― Resources ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――</span><br><span class="line">  #</span><br><span class="line">  #  下面指定的资源将会通过build phase脚本拷贝到指定的bundle。</span><br><span class="line">  #</span><br><span class="line"></span><br><span class="line">  # s.resource  = <span class="string">&quot;icon.png&quot;</span></span><br><span class="line">  # s.resources = <span class="string">&quot;Resources/*.png&quot;</span></span><br><span class="line">  # s.preserve_paths = <span class="string">&quot;FilesToSave&quot;</span>, <span class="string">&quot;MoreFilesToSave&quot;</span></span><br><span class="line"></span><br><span class="line">  # ――― Project Linking ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  #  该组件库相关的frameworks以及libraries，其中libraries不用包括它的名字前缀</span><br><span class="line">  #</span><br><span class="line"></span><br><span class="line">  # s.framework  = <span class="string">&quot;SomeFramework&quot;</span></span><br><span class="line">  # s.frameworks = <span class="string">&quot;SomeFramework&quot;</span>, <span class="string">&quot;AnotherFramework&quot;</span></span><br><span class="line"></span><br><span class="line">  # s.library   = <span class="string">&quot;iconv&quot;</span></span><br><span class="line">  # s.libraries = <span class="string">&quot;iconv&quot;</span>, <span class="string">&quot;xml2&quot;</span></span><br><span class="line"></span><br><span class="line">  # ――― Project Settings ――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  # 在这里可以指定对应的编译选项以及依赖的三方库</span><br><span class="line">  #</span><br><span class="line"></span><br><span class="line">  s.requires_arc = true</span><br><span class="line">  # s.xcconfig = &#123; <span class="string">&quot;HEADER_SEARCH_PATHS&quot;</span> =&gt; <span class="string">&quot;$(SDKROOT)/usr/include/libxml2&quot;</span> &#125;</span><br><span class="line">  # s.dependency <span class="string">&quot;JSONKit&quot;</span>, <span class="string">&quot;~&gt; 1.4&quot;</span></span><br><span class="line"></span><br><span class="line">  # ――― Subspecs ――――――――――――――――――――――――――――――――――――――――――――――――――――――――― #</span><br><span class="line">  #</span><br><span class="line">  # 将组件分为多个子组件，接入方可以根据需求只接入几个子组件，减少包体积</span><br><span class="line">  #subspec <span class="string">&#x27;Twitter&#x27;</span> do |sp|</span><br><span class="line">  #   sp.source_files = <span class="string">&#x27;Classes/Twitter&#x27;</span></span><br><span class="line">  #end</span><br><span class="line"></span><br><span class="line">  # 测试组件</span><br><span class="line">  #spec.test_spec do |test_spec|</span><br><span class="line">  #    test_spec.source_files = <span class="string">&#x27;NSAttributedString+CCLFormatTests.m&#x27;</span></span><br><span class="line">  #    test_spec.dependency <span class="string">&#x27;Expecta&#x27;</span></span><br><span class="line">  #end</span><br><span class="line">  # 默认子组件。也就是当接入方不作区分时，直接使用组件名引入时，所引入子组件</span><br><span class="line">  #spec.default_subspec = <span class="string">&#x27;Core&#x27;</span></span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> </p>
<h6 id="1-创建GitHub-代码仓库"><a href="#1-创建GitHub-代码仓库" class="headerlink" title="1 创建GitHub 代码仓库"></a>1 创建GitHub 代码仓库</h6><p>这里需要创建两个GitHub库，一个是Spec仓库,一个是组件代码仓库，我们这里先介绍组件代码仓库，最后的时候会给大家介绍Spec仓库：</p>
<p>首先创建一个代码仓库用于存放组件代码，如下所示：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/tbfungeek/IDLUtils.git">https://github.com/tbfungeek/IDLUtils.git</a></p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;xxxxxxxxxx&quot;</span></span><br><span class="line">git remote add origin https:<span class="regexp">//gi</span>thub.com<span class="regexp">/tbfungeek/</span>IDLUtils.git</span><br><span class="line"><span class="regexp">//gi</span>t pull --rebase origin master</span><br><span class="line"><span class="regexp">//</span>解决冲突</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>将组件代码push到远端仓库，新建tag</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">git</span> tag <span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>将本地的tag推送到远程仓库</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">git push <span class="comment">--tags</span></span><br></pre></td></tr></table></figure>

<p>注意tag号要和s.version保持一致</p>
<p>在上面工作完成后运行<strong><strong>pod lib lint IDLUtils.podspec</strong></strong>对podspec文件进行校验。如果遇到有问题可以通过****–verbose****来看详细的过程。</p>
<p>下面是可能会遇到的导致校验不过的可能问题：</p>
<p><strong><strong>情景一：</strong></strong></p>
<figure class="highlight vhdl"><table><tr><td class="code"><pre><span class="line">[!] IDLUtils did <span class="keyword">not</span> pass validation, due <span class="keyword">to</span> <span class="number">1</span> <span class="literal">warning</span> (but you can <span class="keyword">use</span> `<span class="comment">--allow-warnings` to ignore it).</span></span><br><span class="line">You can <span class="keyword">use</span> the `<span class="comment">--no-clean` option to inspect any issue.</span></span><br></pre></td></tr></table></figure>

<p>这种情况下通过****–verbose**** 看下如果warning没问题可以通过****–allow-warnings**** 忽略错误。</p>
<p><strong><strong>情景二：</strong></strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">.podspec error <span class="operator">-</span> source_files` <span class="keyword">pattern</span> did <span class="keyword">not</span> <span class="keyword">match</span> <span class="keyword">any</span> file</span><br></pre></td></tr></table></figure>
<p>这种一般是只是将文件放置到Class目录，没有将Class添加到XCode的引用关系中。</p>
<p><strong><strong>情景三：</strong></strong></p>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">C<span class="function"><span class="title">ould</span> <span class="built_in">not</span> find a `ios` simulator， Ensure that Xcode -&gt;</span> W<span class="function"><span class="title">indow</span> -&gt;</span> Devices has <span class="built_in">at</span> least on</span><br></pre></td></tr></table></figure>
<p>升级cocoaPods版本。</p>
<p><strong><strong>情景四：</strong></strong></p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="string">[!]</span> Found multiple specifications</span><br></pre></td></tr></table></figure>

<p>将私有仓库拉到本地时可能会存在两个。移除重复的库。</p>
<p>有时候你会发现什么都对，但是结果不对，你就可以进入对应的缓存中查看下实际的内容是怎样的？或者使用下面的命令清除缓存看下：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">rm ~<span class="regexp">/Library/</span>Caches<span class="regexp">/CocoaPods/</span>search_index.json</span><br><span class="line">rm -fr  ~<span class="regexp">/Library/</span>Caches<span class="regexp">/CocoaPods/</span>Pods<span class="regexp">/External/</span>IDLUtils</span><br><span class="line">rm -fr  ~<span class="regexp">/Library/</span>Caches<span class="regexp">/CocoaPods/</span>Pods<span class="regexp">/Specs/</span>External<span class="regexp">/IDLUtils/</span></span><br></pre></td></tr></table></figure>

<h6 id="3-注册CocoaPods"><a href="#3-注册CocoaPods" class="headerlink" title="3 注册CocoaPods"></a>3 注册CocoaPods</h6><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">pod trunk register tbfungeek@<span class="number">163</span><span class="selector-class">.com</span> <span class="string">&#x27;tbfungeek&#x27;</span> <span class="attr">--description</span>=<span class="string">&#x27;tbfungeek&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这时候注册邮箱会收到一份验证邮件，通过邮件链接可以完成注册</p>
<h6 id="4-将podspec-push-到-CocoaPods-Specs"><a href="#4-将podspec-push-到-CocoaPods-Specs" class="headerlink" title="4 将podspec push 到 CocoaPods Specs"></a>4 将podspec push 到 CocoaPods Specs</h6><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod trunk <span class="built_in">push</span> IDLUtils.podspec</span><br></pre></td></tr></table></figure>

<h5 id="创建私有Spec-仓库"><a href="#创建私有Spec-仓库" class="headerlink" title="创建私有Spec 仓库"></a>创建私有Spec 仓库</h5><h6 id="1-新建私有仓库"><a href="#1-新建私有仓库" class="headerlink" title="1.新建私有仓库"></a>1.新建私有仓库</h6><p>目前github也支持私有仓库了，所以可以在github，gitlab上创建一个。</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/tbfungeek/</span>IDLPodSpecs.git</span><br></pre></td></tr></table></figure>

<h6 id="2-将私有仓库添加到本地"><a href="#2-将私有仓库添加到本地" class="headerlink" title="2.将私有仓库添加到本地"></a>2.将私有仓库添加到本地</h6><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">pod repo add IDLPodSpecs https:<span class="regexp">//gi</span>thub.com<span class="regexp">/tbfungeek/</span>IDLPodSpecs.git</span><br></pre></td></tr></table></figure>
<p>这时候会将IDLPodSpecs clone 到 ~&#x2F;.cocoapods&#x2F;repos 目录</p>
<h6 id="3-提交-podspec-至私有-Spec-仓库"><a href="#3-提交-podspec-至私有-Spec-仓库" class="headerlink" title="3. 提交 podspec 至私有 Spec 仓库"></a>3. 提交 podspec 至私有 Spec 仓库</h6><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">pod repo <span class="built_in">push</span> IDLPodSpecs IDLUtils.podspec</span><br></pre></td></tr></table></figure>

<h6 id="4-在项目中应用该私有库"><a href="#4-在项目中应用该私有库" class="headerlink" title="4. 在项目中应用该私有库"></a>4. 在项目中应用该私有库</h6><p>在Podfile 头部添加repo 源</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="string">&#x27;https://github.com/tbfungeek/IDLPodSpecs.git&#x27;</span></span><br><span class="line"><span class="built_in">source</span> <span class="string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span></span><br></pre></td></tr></table></figure>
<p>接下来就可以使用了</p>
<h5 id="更深入学习"><a href="#更深入学习" class="headerlink" title="更深入学习"></a><strong><strong>更深入学习</strong></strong></h5><p>学习了上面的技术够一般项目使用了，但是随着项目推进，你会发现项目编译速度会越来越慢，甚至达到难以容忍的地步，这时候就需要进行CocoaPods 的组件二进制化，这样就省去了各个组件库的编译速度。这个会在后续章节中专门开一篇博客进行介绍，大家如果感兴趣可以事先了解下，下面是一篇个人认为写得比较好的一篇博客，推荐给大家。</p>
<p><a target="_blank" rel="noopener" href="https://dmanager.github.io/ios/2019/01/21/%E5%9F%BA%E4%BA%8ECocoaPods%E7%9A%84%E7%BB%84%E4%BB%B6%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%8C%96%E5%AE%9E%E8%B7%B5/">基于 CocoaPods 的组件二进制化实践</a><br><a target="_blank" rel="noopener" href="https://www.google.com/search?q=CocoaPods+%E7%9A%84%E7%BB%84%E4%BB%B6%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%8C%96&oq=CocoaPods+%E7%9A%84%E7%BB%84%E4%BB%B6%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%8C%96&aqs=chrome..69i57j69i64j69i60.360j0j0&sourceid=chrome&ie=UTF-8">Google – CocoaPods 的组件二进制化</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/">iOS 理论基础</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS-理论基础/">iOS 理论基础</a>
  </div>

</div>



</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2019/08/28/iOS-推送总结/" title="iOS 推送总结">
  <span>
  iOS 推送总结</span>
</a>
</div>


<div class="next">
<a href="/2019/08/24/使用LLDB来辅助调试iOS程序/"  title="使用LLDB来辅助调试iOS程序">
 <span>使用LLDB来辅助调试iOS程序
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2019/08/26/Cocopods-使用/" data-title="Cocopods 使用" data-url="http://yoursite.com/2019/08/26/Cocopods-%E4%BD%BF%E7%94%A8/"></div>
</section>


<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%80%E7%AF%87%E5%8F%A8%E5%8F%A8"><span class="toc-number">1.</span> <span class="toc-text">开篇叨叨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CocoaPods-%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">CocoaPods 安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CocoaPods-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">3.</span> <span class="toc-text">CocoaPods 常用命令行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E7%89%88%E6%9C%ACCocoaPods%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">多版本CocoaPods管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Podfile"><span class="toc-number">5.</span> <span class="toc-text">****Podfile ****</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-install"><span class="toc-number">5.1.</span> <span class="toc-text">1. install</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-source"><span class="toc-number">5.2.</span> <span class="toc-text">2. source</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-target"><span class="toc-number">5.3.</span> <span class="toc-text">3. target</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-platform"><span class="toc-number">5.4.</span> <span class="toc-text">4. platform</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-inhibit-all-warnings"><span class="toc-number">5.5.</span> <span class="toc-text">5. inhibit_all_warnings</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-use-frameworks"><span class="toc-number">5.6.</span> <span class="toc-text">6. use_frameworks</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-Pod"><span class="toc-number">5.7.</span> <span class="toc-text">7. Pod</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-project"><span class="toc-number">5.8.</span> <span class="toc-text">8. project</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-workspace"><span class="toc-number">5.9.</span> <span class="toc-text">9. workspace</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-def"><span class="toc-number">5.10.</span> <span class="toc-text">10. def</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#11-pre-install"><span class="toc-number">5.11.</span> <span class="toc-text">11. pre_install</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#12-post-install"><span class="toc-number">5.12.</span> <span class="toc-text">12. post_install</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CocoaPods-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">CocoaPods 工作原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CocoaPods-%E7%A7%81%E6%9C%89%E5%BA%93-x2F-%E5%85%B1%E6%9C%89%E5%BA%93-%E5%88%B6%E4%BD%9C%E4%BE%9D%E8%B5%96%E5%BA%93"><span class="toc-number">7.</span> <span class="toc-text">CocoaPods 私有库&#x2F;共有库 制作依赖库</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93%E5%B7%A5%E7%A8%8B"><span class="toc-number">7.1.</span> <span class="toc-text">1 创建组件库工程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BAGitHub-%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93"><span class="toc-number">7.2.</span> <span class="toc-text">1 创建GitHub 代码仓库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%B3%A8%E5%86%8CCocoaPods"><span class="toc-number">7.3.</span> <span class="toc-text">3 注册CocoaPods</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E5%B0%86podspec-push-%E5%88%B0-CocoaPods-Specs"><span class="toc-number">7.4.</span> <span class="toc-text">4 将podspec push 到 CocoaPods Specs</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89Spec-%E4%BB%93%E5%BA%93"><span class="toc-number">8.</span> <span class="toc-text">创建私有Spec 仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E6%96%B0%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"><span class="toc-number">8.1.</span> <span class="toc-text">1.新建私有仓库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E5%B0%86%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E6%B7%BB%E5%8A%A0%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-number">8.2.</span> <span class="toc-text">2.将私有仓库添加到本地</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%8F%90%E4%BA%A4-podspec-%E8%87%B3%E7%A7%81%E6%9C%89-Spec-%E4%BB%93%E5%BA%93"><span class="toc-number">8.3.</span> <span class="toc-text">3. 提交 podspec 至私有 Spec 仓库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BA%94%E7%94%A8%E8%AF%A5%E7%A7%81%E6%9C%89%E5%BA%93"><span class="toc-number">8.4.</span> <span class="toc-text">4. 在项目中应用该私有库</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0"><span class="toc-number">9.</span> <span class="toc-text">更深入学习</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">
<div id="authorInfo">
	
		<div class="author-img"></div>		
	
	<div class="social-info" class="clearfix">
		
		
		<a href="https://github.com/tbfungeek" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		
		<a href="mailto:tbfungeek@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		

	</div>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Android-小经验/" title="Android 小经验">Android 小经验<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android-源码分析/" title="Android 源码分析">Android 源码分析<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android其他/" title="Android其他">Android其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android初步/" title="Android初步">Android初步<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android进阶/" title="Android进阶">Android进阶<sup>100</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript理论/" title="JavaScript理论">JavaScript理论<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Objective-C-相关/" title="Objective C 相关">Objective C 相关<sup>24</sup></a></li>
		  
		
		  
			<li><a href="/categories/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/ROS/" title="ROS">ROS<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-工具使用/" title="iOS 工具使用">iOS 工具使用<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-开源库分析/" title="iOS 开源库分析">iOS 开源库分析<sup>36</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-理论基础/" title="iOS 理论基础">iOS 理论基础<sup>14</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-进阶/" title="iOS 进阶">iOS 进阶<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/个人收藏/" title="个人收藏">个人收藏<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/代码规范/" title="代码规范">代码规范<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/其他/" title="其他">其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/博客分类目录/" title="博客分类目录">博客分类目录<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/叨叨系列/" title="叨叨系列">叨叨系列<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源代码分析/" title="开源代码分析">开源代码分析<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源库分析/" title="开源库分析">开源库分析<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/版本控制/" title="版本控制">版本控制<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/直播/" title="直播">直播<sup>6</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS-开源库分析/" title="iOS 开源库分析">iOS 开源库分析<sup>36</sup></a></li>
			
		
			
				<li><a href="/tags/Android-设计模式/" title="Android 设计模式">Android 设计模式<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Objective-C-相关/" title="Objective C 相关">Objective C 相关<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/Android基础/" title="Android基础">Android基础<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/AOSP-源码/" title="AOSP 源码">AOSP 源码<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Android-常用第三方库/" title="Android 常用第三方库">Android 常用第三方库<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-理论基础/" title="iOS 理论基础">iOS 理论基础<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/ROS/" title="ROS">ROS<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Android-动画进阶/" title="Android 动画进阶">Android 动画进阶<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Android-JNI/" title="Android JNI">Android JNI<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-绘图进阶/" title="Android 绘图进阶">Android 绘图进阶<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android性能优化/" title="Android性能优化">Android性能优化<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自动化测试/" title="Android 自动化测试">Android 自动化测试<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/直播/" title="直播">直播<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-开源源码/" title="Android 开源源码">Android 开源源码<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自定义View进阶/" title="Android 自定义View进阶">Android 自定义View进阶<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-进阶/" title="iOS 进阶">iOS 进阶<sup>4</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://hexo.io" target="_blank" title="Hexo">Hexo</a>
            
          </li>
        
          <li>
            
            	<a href="https://pages.github.com/" target="_blank" title="GitHub">GitHub</a>
            
          </li>
        
          <li>
            
            	<a href="http://pf18.github.io/" target="_blank" title="PF18">PF18</a>
            
          </li>
        
          <li>
            
            	<a href="http://toutiao.io/" target="_blank" title="开发者头条">开发者头条</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.jcodecraeer.com/" target="_blank" title="泡在网上的日子">泡在网上的日子</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/AOSP-%E6%BA%90%E7%A0%81/" style="font-size: 17.14px;">AOSP 源码</a> <a href="/tags/Android-APK-%E7%AD%BE%E5%90%8D/" style="font-size: 10px;">Android APK 签名</a> <a href="/tags/Android-JNI/" style="font-size: 12.86px;">Android JNI</a> <a href="/tags/Android-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6/" style="font-size: 10.71px;">Android 事件处理进阶</a> <a href="/tags/Android-%E5%8A%A8%E7%94%BB%E8%BF%9B%E9%98%B6/" style="font-size: 13.57px;">Android 动画进阶</a> <a href="/tags/Android-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/" style="font-size: 10px;">Android 多线程开发</a> <a href="/tags/Android-%E5%B0%8F%E7%BB%8F%E9%AA%8C/" style="font-size: 10px;">Android 小经验</a> <a href="/tags/Android-%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" style="font-size: 16.43px;">Android 常用第三方库</a> <a href="/tags/Android-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">Android 开发流程</a> <a href="/tags/Android-%E5%BC%80%E6%BA%90%E6%BA%90%E7%A0%81/" style="font-size: 12.14px;">Android 开源源码</a> <a href="/tags/Android-%E7%BB%98%E5%9B%BE%E8%BF%9B%E9%98%B6/" style="font-size: 12.86px;">Android 绘图进阶</a> <a href="/tags/Android-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" style="font-size: 12.86px;">Android 自动化测试</a> <a href="/tags/Android-%E8%87%AA%E5%AE%9A%E4%B9%89View%E8%BF%9B%E9%98%B6/" style="font-size: 12.14px;">Android 自定义View进阶</a> <a href="/tags/Android-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 19.29px;">Android 设计模式</a> <a href="/tags/Android%E5%85%B6%E4%BB%96/" style="font-size: 10px;">Android其他</a> <a href="/tags/Android%E5%9F%BA%E7%A1%80/" style="font-size: 17.86px;">Android基础</a> <a href="/tags/Android%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">Android开发流程</a> <a href="/tags/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 12.86px;">Android性能优化</a> <a href="/tags/Android%E6%B7%B7%E6%B7%86%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">Android混淆技术</a> <a href="/tags/Android%E8%B4%A8%E9%87%8F%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" style="font-size: 11.43px;">Android质量管理工具</a> <a href="/tags/Android%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" style="font-size: 10px;">Android逆向工程</a> <a href="/tags/Git-github/" style="font-size: 10px;">Git && github</a> <a href="/tags/Hexo-%E4%BD%BF%E7%94%A8/" style="font-size: 15px;">Hexo 使用</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux-%E4%BD%BF%E7%94%A8/" style="font-size: 10px;">Linux 使用</a> <a href="/tags/Objective-C-%E7%9B%B8%E5%85%B3/" style="font-size: 18.57px;">Objective C 相关</a> <a href="/tags/OpenCV/" style="font-size: 12.86px;">OpenCV</a> <a href="/tags/ROS/" style="font-size: 14.29px;">ROS</a> <a href="/tags/iOS-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 10.71px;">iOS 工具使用</a> <a href="/tags/iOS-%E5%BC%80%E6%BA%90%E5%BA%93%E5%88%86%E6%9E%90/" style="font-size: 20px;">iOS 开源库分析</a> <a href="/tags/iOS-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" style="font-size: 15.71px;">iOS 理论基础</a> <a href="/tags/iOS-%E8%BF%9B%E9%98%B6/" style="font-size: 12.14px;">iOS 进阶</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 10px;">代码规范</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E5%88%86%E7%B1%BB%E7%9B%AE%E5%BD%95/" style="font-size: 10.71px;">博客分类目录</a> <a href="/tags/%E5%8F%A8%E5%8F%A8%E7%B3%BB%E5%88%97/" style="font-size: 10px;">叨叨系列</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 11.43px;">工具的使用</a> <a href="/tags/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 10.71px;">开源代码分析</a> <a href="/tags/%E5%BC%80%E6%BA%90%E5%BA%93%E5%88%86%E6%9E%90/" style="font-size: 10px;">开源库分析</a> <a href="/tags/%E6%9D%82%E7%B1%BB/" style="font-size: 10px;">杂类</a> <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 12.14px;">树莓派</a> <a href="/tags/%E7%9B%B4%E6%92%AD/" style="font-size: 12.86px;">直播</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E5%B7%A7/" style="font-size: 10.71px;">编程技巧</a> <a href="/tags/%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F/" style="font-size: 10px;">网站收藏</a> <a href="/tags/%E9%87%8D%E8%A6%81%E6%8E%A7%E4%BB%B6/" style="font-size: 11.43px;">重要控件</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
		
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/hsihohuang/kiddochan" target="_blank" title="Kiddochan">Kiddochan</a> © 2022 
		
		<a href="/about" target="_blank" title="Edgar">Edgar</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"tbfungeek"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'tbfungeek';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?7c9443b0374f1cf6b1dbb5ab84d939cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
