
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>Android 进阶之第三方库的介绍 Picasso | Edgar&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Edgar">
    

    
    <meta name="description" content="Picasso是什么？它是一个图片的加载和缓存库，它能以最简单的方式来加载一张图片，目前最新的版本为2.5.2我们可以到如下的官网下载最新的jar包，或者在Android studio 在module build.gradle配置文件中加入如下的配置：Picasso 官网 compile &amp;#x27;com.squareup.picasso:picasso:2.5.2&amp;#x27; Picasso">
<meta property="og:type" content="article">
<meta property="og:title" content="Android 进阶之第三方库的介绍 Picasso">
<meta property="og:url" content="http://yoursite.com/2016/06/08/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-Picasso/index.html">
<meta property="og:site_name" content="Edgar&#39;s Blog">
<meta property="og:description" content="Picasso是什么？它是一个图片的加载和缓存库，它能以最简单的方式来加载一张图片，目前最新的版本为2.5.2我们可以到如下的官网下载最新的jar包，或者在Android studio 在module build.gradle配置文件中加入如下的配置：Picasso 官网 compile &amp;#x27;com.squareup.picasso:picasso:2.5.2&amp;#x27; Picasso">
<meta property="og:locale">
<meta property="og:image" content="http://yoursite.com/2016/06/08/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-Picasso/logo.png">
<meta property="article:published_time" content="2016-06-08T14:52:11.000Z">
<meta property="article:modified_time" content="2016-07-18T22:11:20.000Z">
<meta property="article:author" content="Edgar">
<meta property="article:tag" content="Android 常用第三方库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2016/06/08/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-Picasso/logo.png">

    
    <link rel="alternative" href="atom.xml" title="Edgar&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/unnamed4_n_mSY_icon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/profile.png">
    <link rel="apple-touch-icon-precomposed" href="/img/profile.png">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.2.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Edgar&#39;s Blog">Edgar&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="Search" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/08/Android-进阶之第三方库的介绍-Picasso/" title="Android 进阶之第三方库的介绍 Picasso" itemprop="url">Android 进阶之第三方库的介绍 Picasso</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-08T14:52:11.000Z" itemprop="datePublished"> Published 2016-06-08</time>
    
  </p>
</header>
	<div class="article-content">
		
		<p><img src="/2016/06/08/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-Picasso/logo.png"></p>
<h4 id="Picasso是什么？"><a href="#Picasso是什么？" class="headerlink" title="Picasso是什么？"></a>Picasso是什么？</h4><p>它是一个图片的加载和缓存库，它能以最简单的方式来加载一张图片，目前最新的版本为2.5.2我们可以到如下的官网下载最新的jar包，或者在Android studio 在module build.gradle配置文件中加入如下的配置：<br><a target="_blank" rel="noopener" href="http://square.github.io/picasso/">Picasso 官网</a></p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">compile</span> &#x27;com.squareup.picasso:picasso:<span class="number">2</span>.<span class="number">5</span>.<span class="number">2</span>&#x27;</span><br></pre></td></tr></table></figure>
<p>Picasso的用法十分简单,并且不仅仅能加载网络资源,也能加载本地图片,Android资源文件,以及使用URI地址对图片进行加载。</p>
<h3 id="创建Picasso实例："><a href="#创建Picasso实例：" class="headerlink" title="创建Picasso实例："></a>创建Picasso实例：</h3><ul>
<li>标准的Picasso实例<br>创建Picasso实例的最简单方法就是调用它的with方法并传入对应的context.这时候创建的是标准的Picasso对象。<br>如下所示：<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context)</span><br></pre></td></tr></table></figure></li>
<li>自定义Picasso实例</li>
</ul>
<p>但是有时候标准的Picasso对象并不能满足我们特定情形的要求，所以就需要使用 Picasso.Builder：</p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">Picasso.Builder customPicassoBuilder <span class="operator">=</span> new Picasso.Builder(context)<span class="comment">;</span></span><br><span class="line">Picasso customPicasso <span class="operator">=</span> picassoBuilder.build()<span class="comment">;  </span></span><br><span class="line">picasso  </span><br><span class="line">    .load(imageUrl)</span><br><span class="line">    .into(imageView1)<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如何将自定义的Picasso作为全局使用的Picasso：<br>这里需要注意的是如果在创建Picasso的时候Picasso已经被设置过这时出现异常，在定义完自定义的Picasso后在在Picasso.with(context)调用之后进行设置也会出现该异常，所以需要添加一个try{ }catch{ }<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    Picasso.Builder picassoBuilder = <span class="keyword">new</span> Picasso.<span class="constructor">Builder(<span class="params">context</span>)</span>;</span><br><span class="line">    Picasso picasso = picassoBuilder.build<span class="literal">()</span>;  </span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span>set<span class="constructor">SingletonInstance(<span class="params">picasso</span>)</span>;</span><br><span class="line">&#125;catch(IllegalStateException ignored)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="使用Picasso加载缓存图片："><a href="#使用Picasso加载缓存图片：" class="headerlink" title="使用Picasso加载缓存图片："></a>使用Picasso加载缓存图片：</h3><ul>
<li>加载Android资源文件：<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">ImageView imageView = (ImageView) find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">imageView</span>)</span>;</span><br><span class="line"><span class="built_in">int</span> resId = <span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>mipmap.ic_launcher;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context).load(resId).into(imageView);</span><br></pre></td></tr></table></figure></li>
<li>加载本地文件：<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">ImageView imageView = (ImageView) find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">imageView</span>)</span>;</span><br><span class="line">File file = <span class="keyword">new</span> <span class="constructor">File(Environment.<span class="params">getExternalStoragePublicDirectory</span>(Environment.DIRECTORY_PICTURES)</span>, <span class="string">&quot;test.png&quot;</span>);</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context).load(file).into(imageView); </span><br></pre></td></tr></table></figure></li>
<li>加载网络资源：<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">ImageView imageView <span class="operator">=</span> (ImageView) findViewById(R.id.imageView)<span class="comment">;</span></span><br><span class="line">String imageUrl <span class="operator">=</span> <span class="string">&quot;http://xxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="comment">;</span></span><br><span class="line">Picasso.with(context).load(imageUrl).into(imageView)<span class="comment">;</span></span><br></pre></td></tr></table></figure></li>
<li>在ListView中使用：<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">public View get<span class="constructor">View(<span class="params">int</span> <span class="params">position</span>, View <span class="params">convertView</span>, ViewGroup <span class="params">parent</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (convertView==null)&#123;</span><br><span class="line">        convertView = <span class="module-access"><span class="module"><span class="identifier">View</span>.</span></span>inflate(context,<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>layout.item_picasso,null);</span><br><span class="line">    &#125;</span><br><span class="line">    ImageView imageView = (ImageView)convertView;</span><br><span class="line">    <span class="keyword">if</span> (<span class="module-access"><span class="module"><span class="identifier">TextUtils</span>.</span></span>is<span class="constructor">Empty(<span class="params">imageUrls</span>[<span class="params">position</span>])</span>)&#123;</span><br><span class="line">        <span class="comment">//如果是空uri图片那么取消请求</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context).cancel<span class="constructor">Request(<span class="params">imageView</span>)</span>;</span><br><span class="line">        imageView.set<span class="constructor">ImageDrawable(<span class="params">null</span>)</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//加载图片</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context)</span><br><span class="line">               .load(imageUrls<span class="literal">[<span class="identifier">position</span>]</span>)</span><br><span class="line">               .placeholder(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>mipmap.ic_launcher)<span class="comment">//如果没有图片的时候的占位图</span></span><br><span class="line">               .error(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>mipmap.ic_launcher) <span class="comment">//发生错误时候的图片</span></span><br><span class="line">               .into((ImageView) convertView);</span><br><span class="line">    &#125;</span><br><span class="line">    return convertView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="一些常见的属性设置："><a href="#一些常见的属性设置：" class="headerlink" title="一些常见的属性设置："></a>一些常见的属性设置：</h3><ul>
<li>自定义图片大小处理：<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">ImageView imageView = (ImageView) find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">imageView</span>)</span>;</span><br><span class="line"><span class="built_in">int</span> resId = <span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>mipmap.ic_launcher;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context).load(resId).resize(<span class="number">1028</span>, <span class="number">2000</span>).into(imageView);</span><br></pre></td></tr></table></figure></li>
<li>onlyScaleDown<br>如果调用了resize(x,y)来设定图片的大小的话，Picasso一般会重新以改变图片的加载质量,但是如果我们的原图是比我们从新resize的新图规格大的时候,我们就可以调用onlyScaleDown()来直接进行展示而不再重新计算.<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.resize</span><span class="params">(6000, 2000)</span></span><br><span class="line">    <span class="string">.onlyScaleDown</span><span class="params">()</span> </span><br><span class="line">    <span class="string">.into</span><span class="params">(xxxxxxxxx)</span>;</span><br></pre></td></tr></table></figure></li>
<li>图片的缩放拉伸处理<br>Picasso提供了两种选择用户处理图片的拉伸处理：<br>centerCrop() - 图片会被剪切<br>centerInside()- 图片会被完整的展示,可能图片不会填充满ImageView。</li>
</ul>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.resize</span><span class="params">(600, 200)</span></span><br><span class="line">    <span class="string">.centerInside</span><span class="params">()</span> </span><br><span class="line">    <span class="string">.into</span><span class="params">(xxxxxxxxxxxxxxxxx)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>图片的旋转处理</li>
</ul>
<p>当我们对一张图片只需要进行简单的旋转处理时,只需要调用传入大于0小于360的旋转角度即可：</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">Picasso<span class="selector-class">.with</span>(context)</span><br><span class="line">    <span class="selector-class">.load</span>(xxxxxxxxxxxxxxx)</span><br><span class="line">    <span class="selector-class">.rotate</span>(<span class="number">180</span>f)</span><br><span class="line">    <span class="selector-class">.into</span>(xxxxxxx);</span><br></pre></td></tr></table></figure>
<p>除了上述的旋转，还可以为旋转设定一个支点，只需要将上述的rotate换作rotate(float degrees, float pivotX, float pivotY) 即可：</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.rotate</span><span class="params">(145f, 20f, 10f)</span></span><br><span class="line">    <span class="string">.into</span><span class="params">(xxxxxxxxx)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>对无效Uri的响应图片：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.placeholder</span>(R<span class="selector-class">.mipmap</span>.ic_launcher)  </span><br></pre></td></tr></table></figure></li>
<li><p>对访问错误时的响应图片</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">.<span class="keyword">error</span>(R.mipmap.<span class="keyword">error</span>)  </span><br></pre></td></tr></table></figure>
</li>
<li><p>不使用默认的淡入的效果，加载的图片直接显示在ImageView上：</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(imageUri)</span></span><br><span class="line">    <span class="string">.noFade</span><span class="params">()</span> <span class="string">//</span>不使用默认的淡入的效果</span><br><span class="line">    <span class="string">.into</span><span class="params">(imageView)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>第二次图片进来的时候不使用占位图片noPlaceholder</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">.<span class="keyword">with</span>(context)</span><br><span class="line">.load(imageUri)</span><br><span class="line">.placeholder(R.mipmap.ic_launcher)  </span><br><span class="line">.<span class="keyword">into</span>(imageView, <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span>()</span> &#123;</span><br><span class="line">        Picasso</span><br><span class="line">            .<span class="keyword">with</span>(context)</span><br><span class="line">            .load(imageUri)</span><br><span class="line">            .noPlaceholder() </span><br><span class="line">            .<span class="keyword">into</span>(imageView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span>()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用fit 优化减小内存空间占用<br>使用fit Picasso会对图片的大小及ImageView控件进行测量,计算出最佳的大小及最佳的图片质量以减少内存;</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(yyyyyyyyyyyyyy)</span></span><br><span class="line">    <span class="string">.fit</span><span class="params">()</span></span><br><span class="line">    <span class="string">.into</span><span class="params">(rrrrrrrrrrrrrr)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置图片加载的优先级</p>
</li>
</ul>
<p>Picasso支持设置优先级,分为HIGH, MEDIUM, 和 LOW,所有的加载默认优先级为MEDIUM,但是这种设置并不能保证图片一定会优先加载，只是会偏向于优先加载，这个和给某个变量声明为regiter是一个道理的</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.fit</span><span class="params">()</span></span><br><span class="line">    <span class="string">.priority</span><span class="params">(Picasso.Priority.HIGH)</span></span><br><span class="line">    <span class="string">.into</span><span class="params">(xxxxxxxxxxxx)</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用TAG来处理请求：</li>
</ul>
<p>在ListView中使用网络图片是很常见的，在我们滑动ListView的时候Picasso是会不断在进行网络请求，取消请求，再次请求，取消请求的状态进行的，这往往会对性能产生严重影响。使用TAG标签,可以在用户在快速滑动的时候全部停止请求,只有在滑动停止时再去请求。<br>Picasso提供了三种设置Tag的方式</p>
<figure class="highlight isbl"><table><tr><td class="code"><pre><span class="line">暂停标记 <span class="function"><span class="title">pauseTag</span>()</span></span><br><span class="line">恢复标记 <span class="function"><span class="title">resumeTag</span>()</span></span><br><span class="line">取消标记 <span class="function"><span class="title">cancleTag</span>()</span></span><br></pre></td></tr></table></figure>
<p>用法：<br>首先为某个Picasso对象添加一个标签：</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line"><span class="meta">    .with</span>(context)</span><br><span class="line"><span class="meta">    .load</span>(xxxxxxxxxxxxxxxxxxx)</span><br><span class="line"><span class="meta">    .tag</span>(<span class="string">&quot;ListView Item&quot;</span>)</span><br><span class="line"><span class="meta">    .into</span>(xxxxxxxxxxxxxxxxxx<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>然后实现滑动监听,在监听中操作Tag</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line">  public void on<span class="constructor">ScrollStateChanged(AbsListView <span class="params">view</span>, <span class="params">int</span> <span class="params">scrollState</span>)</span> &#123;</span><br><span class="line">    final Picasso picasso = <span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context);</span><br><span class="line">    <span class="keyword">if</span> (scrollState<span class="operator"> == </span>SCROLL_STATE_IDLE<span class="operator"> || </span>scrollState<span class="operator"> == </span>SCROLL_STATE_TOUCH_SCROLL) &#123;</span><br><span class="line">          picasso.resume<span class="constructor">Tag(<span class="string">&quot;ListView Item&quot;</span>)</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          picasso.pause<span class="constructor">Tag(<span class="string">&quot;ListView Item&quot;</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>cancleTag() 一般在不再需要进行网络请求的时候进行调用，并且在使用TAG的时候要记住如果tag状态为pause或者resume的话,Picasso会对tag持有一个引用，如果没有及时处理当前Activity退出的时候,执行垃圾回收的时候,就会出现内存泄露,所以要注意在onDestory()方法中进行相应处理。以避免这种情况的发生。</p>
<ul>
<li>使用 fetch() .get() .target()</li>
</ul>
<p>.fetch() 不会返回Bitmap，更不会展现在ImageView上，它只是将数据加载到本地和内存中从而加快后期的加载速度。<br>.get()  使用get会返回一个Bitmap，但是该方法不能在主线程中调用,因为会造成线程阻塞;<br>.target() 上面的例子我们都是使用.into()方法,将图片资源加载到ImageView中,除了这种方法还可以使用方法来实现同样的功能:</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title class_">Target</span> target = <span class="keyword">new</span> <span class="title class_">Target</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">onBitmapLoaded</span>(<span class="params">Bitmap bitmap, Picasso.LoadedFrom <span class="keyword">from</span></span>) &#123;</span><br><span class="line">        <span class="comment">//加载成功后会得到一个bitmap,可以自定义操作</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">onBitmapFailed</span>(<span class="params">Drawable errorDrawable</span>) &#123;</span><br><span class="line">        <span class="comment">// 加载失败的时候会执行这里的方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">onPrepareLoad</span>(<span class="params">Drawable placeHolderDrawable</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxx)</span></span><br><span class="line">    <span class="string">.into</span><span class="params">(target)</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>在自定义Notifications上使用Picasso:</li>
</ul>
<p>使用Picasso可以将图片加载到RemoteViews上，从而可以在锁屏，Widget，以及Notification上使用Picasso。下面是对应的用法：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">RemoteViews remoteViews = <span class="keyword">new</span> <span class="constructor">RemoteViews(<span class="params">getPackageName</span>()</span>,<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>layout.item_picasso);</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(<span class="module-access"><span class="module"><span class="identifier">MainActivity</span>.</span></span>this)</span><br><span class="line">        .load(xxxxxxxxx)</span><br><span class="line">        .into(remoteViews,<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.remoteview_layout,NOTIFICATION_ID,notification);</span><br></pre></td></tr></table></figure>

<ul>
<li>对图片进行模糊处理</li>
</ul>
<p>首先通过实现Transformation 接口来实现一个Transformation</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">public <span class="keyword">class</span> BlurByPicasso implements Transformation &#123;</span><br><span class="line">    RenderScript rs;</span><br><span class="line">    public <span class="constructor">BlurByPicasso(Context <span class="params">context</span>)</span> &#123;</span><br><span class="line">        super<span class="literal">()</span>;</span><br><span class="line">        rs = <span class="module-access"><span class="module"><span class="identifier">RenderScript</span>.</span></span>create(context);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public Bitmap transform(Bitmap bitmap) &#123;</span><br><span class="line">        Bitmap blurredBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, <span class="literal">true</span>);</span><br><span class="line">        Allocation input = <span class="module-access"><span class="module"><span class="identifier">Allocation</span>.</span></span>create<span class="constructor">FromBitmap(<span class="params">rs</span>, <span class="params">blurredBitmap</span>, Allocation.MipmapControl.MIPMAP_FULL, Allocation.USAGE_SHARED)</span>;</span><br><span class="line">        Allocation output = <span class="module-access"><span class="module"><span class="identifier">Allocation</span>.</span></span>create<span class="constructor">Typed(<span class="params">rs</span>, <span class="params">input</span>.<span class="params">getType</span>()</span>);</span><br><span class="line">        ScriptIntrinsicBlur script = <span class="module-access"><span class="module"><span class="identifier">ScriptIntrinsicBlur</span>.</span></span>create(rs, Element.<span class="constructor">U8_4(<span class="params">rs</span>)</span>);</span><br><span class="line">        script.set<span class="constructor">Input(<span class="params">input</span>)</span>;</span><br><span class="line">        script.set<span class="constructor">Radius(15)</span>;</span><br><span class="line">        script.<span class="keyword">for</span><span class="constructor">Each(<span class="params">output</span>)</span>;</span><br><span class="line">        output.copy<span class="constructor">To(<span class="params">blurredBitmap</span>)</span>;</span><br><span class="line">        bitmap.recycle<span class="literal">()</span>;</span><br><span class="line">        return blurredBitmap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String key<span class="literal">()</span> &#123;</span><br><span class="line">        return <span class="string">&quot;blurbyPicasso&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为其设置效果：</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">Picasso</span><br><span class="line">    .with(<span class="built_in">context</span>)</span><br><span class="line">    .<span class="built_in">load</span>(xxxxxxxxxxxx)</span><br><span class="line">    .<span class="built_in">transform</span>(<span class="built_in">new</span> BlurByPicasso(<span class="built_in">context</span>))</span><br><span class="line">    .into(imageView);</span><br></pre></td></tr></table></figure>

<ul>
<li>对图片进行多种处理</li>
</ul>
<p>除了对图片进行单种处理外还可以将多个处理应用到Picasso上，这就需要用到transform(List&lt;? extends Transformation&gt; transformations)</p>
<p>&#96;&#96;&#96;&#96;<br>public class TransformationOne implements Transformation {<br>    private final Picasso picasso;<br>    public TransformationOne(Picasso picasso) {<br>        this.picasso &#x3D; picasso;<br>    }<br>    @Override<br>    public Bitmap transform(Bitmap source) {<br>        &#x2F;&#x2F;在这里对图片进行各种转换<br>        return result;<br>    }<br>    @Override<br>    public String key() {<br>        return “TransformationOne”;<br>    }<br>}</p>
<p>public class TransformationTwo implements Transformation {<br>    private final Picasso picasso;<br>    public TransformationTwo(Picasso picasso) {<br>        this.picasso &#x3D; picasso;<br>    }<br>    @Override<br>    public Bitmap transform(Bitmap source) {<br>        &#x2F;&#x2F;在这里对图片进行各种转换<br>        return result;<br>    }<br>    @Override<br>    public String key() {<br>        return “TransformationTwo”;<br>    }<br>}</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">接下创建一个Transformation 列表，将上述的转换添加到列表上：</span><br><span class="line">List&lt;Transformation&gt; transformations = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">transformations.add(<span class="keyword">new</span> <span class="constructor">TransformationOne(Picasso.<span class="params">with</span>(<span class="params">context</span>)</span>));</span><br><span class="line">transformations.add(<span class="keyword">new</span> <span class="constructor">TransformationTwo(Picasso.<span class="params">with</span>(<span class="params">context</span>)</span>));</span><br><span class="line">将Transformation集合应用到Picasso上：</span><br></pre></td></tr></table></figure>
<p>Picasso<br>    .with(context)<br>    .load(xxxxxxxxxxxxxxxxxx)<br>    .transform(transformations)<br>    .into(imageView);</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### Picasso的缓存配置：</span><br><span class="line"></span><br><span class="line">* Picasso默认的缓存分配大小规则如下:</span><br></pre></td></tr></table></figure>

<pre><code>LRU缓存占应用程序可用内存的15%
本地缓存占到硬盘空间的2%但不超过50M并且不小于5M
Picasso默认开启3个线程来进行本地与网络之间的访问
Picasso加载图片顺序, 内存–&gt;本地–&gt;网络
</code></pre>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">* 存储策略</span><br><span class="line"></span><br><span class="line">可能有的时候你不想让Picasso去内存中进行读取这种情况下可以通过memory<span class="constructor">Policy(MemoryPolicy <span class="params">policy</span>, MemoryPolicy<span class="operator">...</span> <span class="params">additional</span>)</span>,MemoryPolicy有如下两种选择：</span><br></pre></td></tr></table></figure>
<p>NO_CACHE - 不将图片缓存在内存中<br>NO_STORE - 这个适用于所加载的图片只加载一次就没用了,这种情况Picasso使用完图片就不会在内存及本地缓存了<br>Picasso<br>    .with(context)<br>    .load(xxxxxxxxxx)<br>    .memoryPolicy(MemoryPolicy.NO_CACHE)<br>    .into(imageView);<br>或者：<br>Picasso<br>    .with(context)<br>    .load(xxxxxxxxxx)<br>    .memoryPolicy(MemoryPolicy.NO_CACHE, MemoryPolicy.NO_STORE)<br>    .into(imageView);</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">调用<span class="built_in">memoryPolicy</span>(MemoryPolicy.NO_CACHE)虽然能避免Picasso从内存中读取资源,但是并不能避免从本地读取资源，Picasso提供了另一个策略NetworkPolicy：</span><br><span class="line">就像MemoryPolicy负责管理内存缓存一样,NetworkPolicy就是负责管理本地缓存的,并且二者的用法一模一样：</span><br></pre></td></tr></table></figure>
<p>NO_CACHE - 让Picasso跳过从本地读取资源这一过程<br>NO_STORE - 让Picasso不进行本地图片缓存<br>OFFLINE -  让Picasso加载图片的时候只从本地读取，除非联网正常并且本地找不到资源的情况下</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line">Picasso  </span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.networkPolicy</span><span class="params">(NetworkPolicy.NO_CACHE)</span></span><br><span class="line">    <span class="string">.into</span><span class="params">(imageView)</span>;</span><br></pre></td></tr></table></figure>

<p>同时memoryPolicy和networkPolicy还可以一起使用：</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso  </span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.memoryPolicy</span><span class="params">(MemoryPolicy.NO_CACHE, MemoryPolicy.NO_STORE)</span></span><br><span class="line">    <span class="string">.networkPolicy</span><span class="params">(NetworkPolicy.NO_CACHE)</span></span><br><span class="line">    <span class="string">.into</span><span class="params">(imageView)</span>; </span><br></pre></td></tr></table></figure>
<h3 id="图片缓存指示器"><a href="#图片缓存指示器" class="headerlink" title="图片缓存指示器"></a>图片缓存指示器</h3><ul>
<li>使用图片缓存指示器：<br>要想知道到底图片来源于何处可以使用setIndicatorsEnabled(true)打开图片来源指示器：<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">Picasso  </span><br><span class="line">    <span class="string">.with</span><span class="params">(context)</span></span><br><span class="line">    <span class="string">.load</span><span class="params">(xxxxxxxxxx)</span></span><br><span class="line">    <span class="string">.setIndicatorsEnabled</span><span class="params">(true)</span>;</span><br></pre></td></tr></table></figure>
使用图片来源指示器后就会在图片的左上角出现一个颜色标记蓝色,绿色,红色;<figure class="highlight"><table><tr><td class="code"><pre><span class="line">蓝色 - 从内存中获取,是最佳性能展示</span><br><span class="line">绿色 - 从本地获取,性能一般</span><br><span class="line">红色 - 从网络加载,性能最差</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="对应Log信息输出："><a href="#对应Log信息输出：" class="headerlink" title="对应Log信息输出："></a>对应Log信息输出：</h3><ul>
<li>使用图片加载Log查看图片加载信息：<br>如果要查看图片加载所用的时间可以使用setLoggingEnabled(true)，这时候每张网络请求的资源所用的时间可以以Log的形式输出：<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">Picasso  </span><br><span class="line">    .<span class="keyword">with</span>(context)</span><br><span class="line">    .set<span class="constructor">LoggingEnabled(<span class="params">true</span>)</span>;</span><br></pre></td></tr></table></figure>
如果要对整个图片的加载尺寸等数据进行查看可以使用getSnapshot方法</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">StatsSnapshot picassosnapStats = <span class="module-access"><span class="module"><span class="identifier">Picasso</span>.</span></span><span class="keyword">with</span>(context).get<span class="constructor">Snapshot()</span>;  </span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(<span class="string">&quot;xiaohai.lin&quot;</span>, picassosnapStats.<span class="keyword">to</span><span class="constructor">String()</span>); </span><br></pre></td></tr></table></figure>  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android-常用第三方库/">Android 常用第三方库</a>
  </div>

</div>



</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/06/09/Android-进阶之第三方库的介绍-Glide/" title="Android 进阶之第三方库的介绍 Glide">
  <span>
  Android 进阶之第三方库的介绍 Glide</span>
</a>
</div>


<div class="next">
<a href="/2016/06/07/Android-进阶之第三方库的介绍-butterknife/"  title="Android 进阶之第三方库的介绍 butterknife">
 <span>Android 进阶之第三方库的介绍 butterknife
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/06/08/Android-进阶之第三方库的介绍-Picasso/" data-title="Android 进阶之第三方库的介绍 Picasso" data-url="http://yoursite.com/2016/06/08/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-Picasso/"></div>
</section>


<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Picasso%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">Picasso是什么？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAPicasso%E5%AE%9E%E4%BE%8B%EF%BC%9A"><span class="toc-number"></span> <span class="toc-text">创建Picasso实例：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Picasso%E5%8A%A0%E8%BD%BD%E7%BC%93%E5%AD%98%E5%9B%BE%E7%89%87%EF%BC%9A"><span class="toc-number"></span> <span class="toc-text">使用Picasso加载缓存图片：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%EF%BC%9A"><span class="toc-number"></span> <span class="toc-text">一些常见的属性设置：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98%E6%8C%87%E7%A4%BA%E5%99%A8"><span class="toc-number"></span> <span class="toc-text">图片缓存指示器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%BA%94Log%E4%BF%A1%E6%81%AF%E8%BE%93%E5%87%BA%EF%BC%9A"><span class="toc-number"></span> <span class="toc-text">对应Log信息输出：</span></a>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">
<div id="authorInfo">
	
		<div class="author-img"></div>		
	
	<div class="social-info" class="clearfix">
		
		
		<a href="https://github.com/tbfungeek" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		
		<a href="mailto:tbfungeek@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		

	</div>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Android-小经验/" title="Android 小经验">Android 小经验<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android-源码分析/" title="Android 源码分析">Android 源码分析<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android其他/" title="Android其他">Android其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android初步/" title="Android初步">Android初步<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android进阶/" title="Android进阶">Android进阶<sup>100</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript理论/" title="JavaScript理论">JavaScript理论<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Objective-C-相关/" title="Objective C 相关">Objective C 相关<sup>24</sup></a></li>
		  
		
		  
			<li><a href="/categories/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/ROS/" title="ROS">ROS<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-工具使用/" title="iOS 工具使用">iOS 工具使用<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-开源库分析/" title="iOS 开源库分析">iOS 开源库分析<sup>36</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-理论基础/" title="iOS 理论基础">iOS 理论基础<sup>14</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-进阶/" title="iOS 进阶">iOS 进阶<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/个人收藏/" title="个人收藏">个人收藏<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/代码规范/" title="代码规范">代码规范<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/其他/" title="其他">其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/博客分类目录/" title="博客分类目录">博客分类目录<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/叨叨系列/" title="叨叨系列">叨叨系列<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源代码分析/" title="开源代码分析">开源代码分析<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源库分析/" title="开源库分析">开源库分析<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/版本控制/" title="版本控制">版本控制<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/直播/" title="直播">直播<sup>6</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS-开源库分析/" title="iOS 开源库分析">iOS 开源库分析<sup>36</sup></a></li>
			
		
			
				<li><a href="/tags/Android-设计模式/" title="Android 设计模式">Android 设计模式<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Objective-C-相关/" title="Objective C 相关">Objective C 相关<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/Android基础/" title="Android基础">Android基础<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/AOSP-源码/" title="AOSP 源码">AOSP 源码<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Android-常用第三方库/" title="Android 常用第三方库">Android 常用第三方库<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-理论基础/" title="iOS 理论基础">iOS 理论基础<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/ROS/" title="ROS">ROS<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Android-动画进阶/" title="Android 动画进阶">Android 动画进阶<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Android-JNI/" title="Android JNI">Android JNI<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-绘图进阶/" title="Android 绘图进阶">Android 绘图进阶<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android性能优化/" title="Android性能优化">Android性能优化<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自动化测试/" title="Android 自动化测试">Android 自动化测试<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/直播/" title="直播">直播<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-开源源码/" title="Android 开源源码">Android 开源源码<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自定义View进阶/" title="Android 自定义View进阶">Android 自定义View进阶<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-进阶/" title="iOS 进阶">iOS 进阶<sup>4</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://hexo.io" target="_blank" title="Hexo">Hexo</a>
            
          </li>
        
          <li>
            
            	<a href="https://pages.github.com/" target="_blank" title="GitHub">GitHub</a>
            
          </li>
        
          <li>
            
            	<a href="http://pf18.github.io/" target="_blank" title="PF18">PF18</a>
            
          </li>
        
          <li>
            
            	<a href="http://toutiao.io/" target="_blank" title="开发者头条">开发者头条</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.jcodecraeer.com/" target="_blank" title="泡在网上的日子">泡在网上的日子</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/AOSP-%E6%BA%90%E7%A0%81/" style="font-size: 17.14px;">AOSP 源码</a> <a href="/tags/Android-APK-%E7%AD%BE%E5%90%8D/" style="font-size: 10px;">Android APK 签名</a> <a href="/tags/Android-JNI/" style="font-size: 12.86px;">Android JNI</a> <a href="/tags/Android-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6/" style="font-size: 10.71px;">Android 事件处理进阶</a> <a href="/tags/Android-%E5%8A%A8%E7%94%BB%E8%BF%9B%E9%98%B6/" style="font-size: 13.57px;">Android 动画进阶</a> <a href="/tags/Android-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/" style="font-size: 10px;">Android 多线程开发</a> <a href="/tags/Android-%E5%B0%8F%E7%BB%8F%E9%AA%8C/" style="font-size: 10px;">Android 小经验</a> <a href="/tags/Android-%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" style="font-size: 16.43px;">Android 常用第三方库</a> <a href="/tags/Android-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">Android 开发流程</a> <a href="/tags/Android-%E5%BC%80%E6%BA%90%E6%BA%90%E7%A0%81/" style="font-size: 12.14px;">Android 开源源码</a> <a href="/tags/Android-%E7%BB%98%E5%9B%BE%E8%BF%9B%E9%98%B6/" style="font-size: 12.86px;">Android 绘图进阶</a> <a href="/tags/Android-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" style="font-size: 12.86px;">Android 自动化测试</a> <a href="/tags/Android-%E8%87%AA%E5%AE%9A%E4%B9%89View%E8%BF%9B%E9%98%B6/" style="font-size: 12.14px;">Android 自定义View进阶</a> <a href="/tags/Android-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 19.29px;">Android 设计模式</a> <a href="/tags/Android%E5%85%B6%E4%BB%96/" style="font-size: 10px;">Android其他</a> <a href="/tags/Android%E5%9F%BA%E7%A1%80/" style="font-size: 17.86px;">Android基础</a> <a href="/tags/Android%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">Android开发流程</a> <a href="/tags/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 12.86px;">Android性能优化</a> <a href="/tags/Android%E6%B7%B7%E6%B7%86%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">Android混淆技术</a> <a href="/tags/Android%E8%B4%A8%E9%87%8F%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" style="font-size: 11.43px;">Android质量管理工具</a> <a href="/tags/Android%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" style="font-size: 10px;">Android逆向工程</a> <a href="/tags/Git-github/" style="font-size: 10px;">Git && github</a> <a href="/tags/Hexo-%E4%BD%BF%E7%94%A8/" style="font-size: 15px;">Hexo 使用</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux-%E4%BD%BF%E7%94%A8/" style="font-size: 10px;">Linux 使用</a> <a href="/tags/Objective-C-%E7%9B%B8%E5%85%B3/" style="font-size: 18.57px;">Objective C 相关</a> <a href="/tags/OpenCV/" style="font-size: 12.86px;">OpenCV</a> <a href="/tags/ROS/" style="font-size: 14.29px;">ROS</a> <a href="/tags/iOS-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 10.71px;">iOS 工具使用</a> <a href="/tags/iOS-%E5%BC%80%E6%BA%90%E5%BA%93%E5%88%86%E6%9E%90/" style="font-size: 20px;">iOS 开源库分析</a> <a href="/tags/iOS-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" style="font-size: 15.71px;">iOS 理论基础</a> <a href="/tags/iOS-%E8%BF%9B%E9%98%B6/" style="font-size: 12.14px;">iOS 进阶</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 10px;">代码规范</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E5%88%86%E7%B1%BB%E7%9B%AE%E5%BD%95/" style="font-size: 10.71px;">博客分类目录</a> <a href="/tags/%E5%8F%A8%E5%8F%A8%E7%B3%BB%E5%88%97/" style="font-size: 10px;">叨叨系列</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 11.43px;">工具的使用</a> <a href="/tags/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 10.71px;">开源代码分析</a> <a href="/tags/%E5%BC%80%E6%BA%90%E5%BA%93%E5%88%86%E6%9E%90/" style="font-size: 10px;">开源库分析</a> <a href="/tags/%E6%9D%82%E7%B1%BB/" style="font-size: 10px;">杂类</a> <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 12.14px;">树莓派</a> <a href="/tags/%E7%9B%B4%E6%92%AD/" style="font-size: 12.86px;">直播</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E5%B7%A7/" style="font-size: 10.71px;">编程技巧</a> <a href="/tags/%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F/" style="font-size: 10px;">网站收藏</a> <a href="/tags/%E9%87%8D%E8%A6%81%E6%8E%A7%E4%BB%B6/" style="font-size: 11.43px;">重要控件</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
		
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/hsihohuang/kiddochan" target="_blank" title="Kiddochan">Kiddochan</a> © 2022 
		
		<a href="/about" target="_blank" title="Edgar">Edgar</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"tbfungeek"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'tbfungeek';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?7c9443b0374f1cf6b1dbb5ab84d939cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
