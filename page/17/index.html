
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>Edgar&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Edgar">
    

    
    <meta name="description" content="Android | 全栈工程师">
<meta property="og:type" content="website">
<meta property="og:title" content="Edgar&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/17/index.html">
<meta property="og:site_name" content="Edgar&#39;s Blog">
<meta property="og:description" content="Android | 全栈工程师">
<meta property="og:locale">
<meta property="article:author" content="Edgar">
<meta name="twitter:card" content="summary">

    
    <link rel="alternative" href="atom.xml" title="Edgar&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/unnamed4_n_mSY_icon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/profile.png">
    <link rel="apple-touch-icon-precomposed" href="/img/profile.png">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.2.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Edgar&#39;s Blog">Edgar&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="Search" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/27/Android-进阶之自动化构建工具Travis-CI/" title="Android 进阶之自动化构建工具Travis CI" itemprop="url">Android 进阶之自动化构建工具Travis CI</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-27T13:47:06.000Z" itemprop="datePublished"> Published 2016-06-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>持续集成对于大多数的工程师应该是比较熟悉的一个概念，大部分的公司都有集成这一说法，如果不知道可以看看百度百科的定义:</p>
<blockquote>
<p>持续集成是一种软件开发实践，即团队开发成员经常集成他们的工作，通常每个成员每天至少集成一次，也就意味着每天可能会发生多次集成。每次集成都通过自动化的构建（包括编译，发布，自动化测试)来验证，从而尽快地发现集成错误。许多团队发现这个过程可以大大减少集成的问题，让团队能够更快的开发内聚的软件。</p>
</blockquote>
<p>说白了就是你提交代码后会手动或者自动触发软件编译，并在编译出对应版本软件后对其进行自动化测试和对外发布。<br>目前有很多自动化集成构建工具，可能大家最熟悉的就是jinkins了，但是随着Github的兴起，更多的人更偏向于借助一个已经搭建好的自动化构建服务器，而不是自己去搭建。如果你还在为选择GitHub集成工具而苦恼，那么可以先看下如下的这篇文章：<br><a target="_blank" rel="noopener" href="http://developer.51cto.com/art/201405/439242.htm">程序员必读：七款出色的GitHub功能集成工具</a><br>我个人选择的是Travis CI，也没啥原因就是感觉合胃口。这篇文章将会对Travis CI的使用进行一个介绍：<br>在开始介绍之前先贴出一篇Travis CI CEO对整个的见解：<br><a target="_blank" rel="noopener" href="http://www.paperplanes.de/2013/10/18/the-smallest-distributed-system.html">The Smallest Distributed System</a></p>
<p>至于为啥要使用Travis CI，就我个人而言就两点：</p>
<ul>
<li>满足我日常需求</li>
<li>易用</li>
</ul>
<p>如果你需要更为官方的理由来说服你，那么就看下下面的文章吧,其实没多大必要，每个软件都会有受众，并且都有人说好，有人说坏，简单了解下就可以了：</p>
<p><a target="_blank" rel="noopener" href="https://improveandrepeat.com/2015/03/5-great-reasons-to-use-travis-ci/?utm_source=tuicool&utm_medium=referral">5 Great Reasons to Use Travis-CI</a></p>
<p><img src="/2016/06/27/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7Travis-CI/1.png"></p>
<ol>
<li>首先登入：<a target="_blank" rel="noopener" href="https://travis-ci.org/">Travis-CI 官网</a></li>
</ol>
<p><img src="/2016/06/27/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7Travis-CI/2.png"></p>
<ol start="2">
<li><p>点击右上角的sign in with github按钮，会进入github的登入界面：</p>
</li>
<li><p>在要触发编译的项目上打开开关：</p>
</li>
</ol>
<p><img src="/2016/06/27/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7Travis-CI/3.png"></p>
<ol start="4">
<li>先在项目根目录创建.travis.yml文件，在.travis.yml文件中配置Travis-CI:<br>目前Travis已经支持如下编程语言的编译了：<br><img src="/2016/06/27/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7Travis-CI/5.png"></li>
</ol>
<p>但是这里我们只介绍用于Android项目中的.travis.yml的编写，要学习.travis.yml的编写，最高效的方法就是查看别人开源库中怎么配置，为什么要这么配置，每项配置的含义：<br>下面是我自己使用的比较完整的一个配置文件，每个项目根据自己的需求来对这些开关进行配置。最简单的.travis.yml 一般只需要包含language，jdk，android，components，before_script，script 即可，配置越多编译完成地越慢。</p>
<figure class="highlight nestedtext"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 表示当前的项目为Android项目,Travis CI 看到这个配置后将会提供 JVM 语言所需要的编译工具比如JDKs, Ant, Gradle, Maven等.</span></span><br><span class="line"><span class="attribute">language</span><span class="punctuation">:</span> <span class="string">android</span></span><br><span class="line"><span class="attribute">jdk</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">oraclejdk8</span></span><br><span class="line">  <span class="comment">#- openjdk7</span></span><br><span class="line">  <span class="comment">#- oraclejdk7</span></span><br><span class="line"><span class="comment"># 配置一些环境变量</span></span><br><span class="line"><span class="attribute">env</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">global</span><span class="punctuation">:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ANDROID_API_LEVEL=23</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ANDROID_BUILD_TOOLS_VERSION=23.0.3</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ANDROID_ABI=armeabi-v7a</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ADB_INSTALL_TIMEOUT=8 # minutes (2 minutes by default)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ANDROID_EMULATOR_API=23</span></span><br><span class="line"><span class="comment"># 编译的分支选择</span></span><br><span class="line"><span class="attribute">branches</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">only</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">  <span class="comment">#except:</span></span><br><span class="line">  <span class="comment">#- xxxx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 所需的部件</span></span><br><span class="line"><span class="attribute">android</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">components</span><span class="punctuation">:</span></span><br><span class="line"><span class="comment"># 使用最新的Android SDK工具</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">platform-tools</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tools</span></span><br><span class="line"><span class="comment"># 编译工具的版本，这个可以在Build.gradle中查看</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">build-tools-$ANDROID_BUILD_TOOLS_VERSION</span></span><br><span class="line"><span class="comment"># 编译项目所需要的SDK 版本</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">android-$ANDROID_API_LEVEL</span></span><br><span class="line"><span class="comment"># 额外的components</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">extra</span></span><br><span class="line">    <span class="comment">#- add-on</span></span><br><span class="line">    <span class="comment"># 更具体的方式</span></span><br><span class="line">    <span class="comment">#- extra-google-google_play_services</span></span><br><span class="line">    <span class="comment">#- extra-google-m2repository</span></span><br><span class="line">    <span class="comment">#- extra-android-m2repository</span></span><br><span class="line">    <span class="comment">#- addon-google_apis-google-19</span></span><br><span class="line">    <span class="comment"># 用于运行测试用例的模拟器</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">sys-img-x86-android-$ANDROID_EMULATOR_API</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">sys-img-armeabi-v7a-android-$ANDROID_EMULATOR_API</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 在运行脚本之前创建模拟器</span></span><br><span class="line"><span class="comment"># Emulator Management: Create, Start and Wait</span></span><br><span class="line"><span class="attribute">before_script</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod +x gradlew</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">echo no | android create avd --force -n test -t android-$ANDROID_EMULATOR_API --abi $ANDROID_ABI</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">emulator -avd test -no-audio -no-window &amp;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">android-wait-for-emulator</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">adb shell input keyevent 82 &amp;</span></span><br><span class="line"><span class="comment"># 要运行的脚本</span></span><br><span class="line"><span class="attribute">script</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">android list target</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./gradlew connectedAndroidTest</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./gradlew clean assemble check</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装代码统计</span></span><br><span class="line"><span class="attribute">before_install</span><span class="punctuation">:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">pip install --user codecov</span></span><br><span class="line"><span class="attribute">after_success</span><span class="punctuation">:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">codecov</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个不知道啥用</span></span><br><span class="line"><span class="attribute">before_cache</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">rm -f $HOME/.gradle/caches/modules-2/modules-2.lock</span></span><br><span class="line"><span class="attribute">cache</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">directories</span><span class="punctuation">:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">$HOME/.m2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">$HOME/.gradle/caches/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">$HOME/.gradle/wrapper/</span></span><br><span class="line"><span class="comment"># 是否邮件通知结果</span></span><br><span class="line"><span class="attribute">notifications</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">email</span><span class="punctuation">:</span> <span class="string">false</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 证书相关</span></span><br><span class="line"><span class="comment">#licenses:</span></span><br><span class="line"><span class="comment">#  - android-sdk-license-.+</span></span><br><span class="line"><span class="comment">#  - google-gdk-license-.+</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>Travis-CI 生命周期</li>
</ol>
<p>下面是Travis-CI的生命周期，我们可以对这些生命周期节点进行配置如上面所示：</p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">before_install</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">install</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">before_script</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">script</span></span><br><span class="line"><span class="keyword"></span>after_success <span class="keyword">or </span>after_failure</span><br><span class="line">OPTIONAL <span class="keyword">before_deploy</span></span><br><span class="line"><span class="keyword"></span>OPTIONAL deploy</span><br><span class="line">OPTIONAL after_deploy</span><br><span class="line">after_script</span><br></pre></td></tr></table></figure>



        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android-开发流程/">Android 开发流程</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/27/Android-进阶之自动化构建工具Travis-CI/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/27/Android-进阶之自动化构建工具Travis-CI/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/27/Android-进阶之-逆向工程/" title="Android 进阶之 反编译" itemprop="url">Android 进阶之 反编译</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-27T13:03:31.000Z" itemprop="datePublished"> Published 2016-06-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>之前听到反编译一直以为反编译只能获取到资源以及AndroidManifest文件，但是在有次工作中分析问题的时候涉及到第三方的Apk，和我合作的工程师居然通过反编译获取到代码，但是刚刚工作不久感到很吃惊所以回去查找了一些资料后终于掌握了反编译技术，在后面的工作中也陆陆续续用到。今天将通过这篇博客来将自己学到的分享出来：<br>这篇文章将只介绍Linux系统下的反编译过程，至于Window系统和Mac系统，只是工具不同而已：</p>
<h4 id="反编译源码"><a href="#反编译源码" class="headerlink" title="反编译源码"></a>反编译源码</h4><p>反编译源码涉及到如下工具：<br>dex2jar  将apk中的classes.dex转化成jar文件<br>jdgui 将apk中的classes.dex转化成jar文件</p>
<ul>
<li>将apk文件后缀改为zip并解压，得到其中的classes.dex，将classes.dex复制到d2j-dex2jar.sh所在目录dex2jar-0.0.9.15文件夹。</li>
<li>运行<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./d2j-dex2jar.sh classes.dex</span><br></pre></td></tr></table></figure>
转换结束之后将会出现如下提示：<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">dex2jar</span> classes.dex -&gt;</span> classes-dex2jar.jar</span><br></pre></td></tr></table></figure></li>
<li><a target="_blank" rel="noopener" href="http://jd.benow.ca/">http://jd.benow.ca/</a> 下载jdgui<br><img src="/2016/06/27/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/1.png"><br>使用jdgui打开上述生成的classes-dex2jar.jar就可以看到代码了。<br><img src="/2016/06/27/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/2.png"></li>
</ul>
<h4 id="反编译资源"><a href="#反编译资源" class="headerlink" title="反编译资源"></a>反编译资源</h4><p>一般apktool用于反编译提取apk资源，提取apk资源可以使用如下命令<br>apktool.jar  d  app-signed.apk<br>如果要将反编译完的文件重新打包成apk，只要在命令行中输入apktool.jar b .&#x2F;apkunpackfolder</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android逆向工程/">Android逆向工程</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/27/Android-进阶之-逆向工程/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/27/Android-进阶之-逆向工程/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/27/Android-进阶之-混淆技术/" title="Android 进阶之 混淆技术" itemprop="url">Android 进阶之 混淆技术</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-27T13:01:58.000Z" itemprop="datePublished"> Published 2016-06-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>目前有很多的工具比如apktool等可以对代码进行反编译获得某个Apk的源码，所以我们为了防止代码被盗用，我们在释放版本前需要对代码进行混淆处理。Android SDK已经提供了混淆工具Proguard的支持。Proguard 是一个开源的混淆工具，它的作用简单得说就是通过对代码进行混淆来加大被反编译的难度，即使反编译成功也很难获取到代码的真正语义，使得代码更加的安全。混淆是不可逆的，在混淆过程中将会丢失一些不影响正常运行的信息。除了保护代码不被反编译外还可以精简编译后的程序大小。</p>
<h4 id="添加到项目中"><a href="#添加到项目中" class="headerlink" title="添加到项目中"></a>添加到项目中</h4><p>在使用Android Studio创建新的项目的时候，AS会为我们自动添加对Proguard支持，如下所示：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="literal">false</span></span><br><span class="line">            proguardFiles get<span class="constructor">DefaultProguardFile(&#x27;<span class="params">proguard</span>-<span class="params">android</span>.<span class="params">txt</span>&#x27;)</span>, &#x27;proguard-rules.pro&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>我们的sdk已经为我们提供了两个默认的配置文件proguard-android.txt和proguard-android-optimize.txt。我们可以根据这两个文件根据自己的需求进行修改。这两个文件位于[sdk path]&#x2F;tools&#x2F;proguard&#x2F; 目录下。<br>这两个有什么区别呢根据proguard-android-optimize.txt上面的注释来看proguard-android.txt是关闭了优化标志的，如果不需要优化，那么可以使用关闭优化标志的proguard-android.txt配置文件而不是proguard-android-optimize.txt。添加优化将会引入某些风险，并不是所有的优化都能在Dalvik所有版本上运行。<br>这个目录下还有其他目录存放的内容如下所示：</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="bullet">- </span>bin :该目录下存放的是运行Proguard的脚本，分别有两种模式一种是纯粹的脚本形式proguard.sh，一种是有GUI界面的形式proguardgui.sh。</span><br><span class="line"><span class="bullet">- </span>lib : 一些主要的jar包可以使用 &quot;java -jar ....&quot;形式运行</span><br><span class="line"><span class="bullet">- </span>docs: 一些Progurd使用文档，如果打算深入学习Progurd可以借助这些文档。</span><br><span class="line"><span class="bullet">- </span>examples : 一些配置例子文件。</span><br></pre></td></tr></table></figure>

<p>上面gradle中配置的意思是它会使用sdk提供的proguard-android.txt 以及项目app中的proguard-rules.pro文件中的配置，所以我们可以在proguard-rules.pro进行我们项目专用的混淆配置。</p>
<p>还需要注意的是只有在release模式下打包apk时才会自动运行ProGuard对代码进行混淆，而在debug模式下并不会调用proguard对代码进行混淆。</p>
<p>下面是sdk提供的proguard-android.txt的内容</p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="comment"># This is a configuration file for ProGuard.</span></span><br><span class="line"><span class="comment"># http://proguard.sourceforge.net/index.html#manual/usage.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不使用大小写混合方式命令类名</span></span><br><span class="line">-dontusemixedcaseclassnames</span><br><span class="line"><span class="comment"># 是否混淆第三方jar</span></span><br><span class="line">-dontskipnonpubliclibraryclasses</span><br><span class="line"><span class="comment"># 混淆时是否记录日志</span></span><br><span class="line">-verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optimization is turned off by default. Dex does not like code run</span></span><br><span class="line"><span class="comment"># through the ProGuard optimize and preverify steps (and performs some</span></span><br><span class="line"><span class="comment"># of these optimizations on its own).</span></span><br><span class="line"><span class="comment"># 不优化输入的类文件</span></span><br><span class="line">-dontoptimize</span><br><span class="line"><span class="comment"># 混淆时是否做预校验</span></span><br><span class="line">-dontpreverify</span><br><span class="line"><span class="comment"># Note that if you want to enable optimization, you cannot just</span></span><br><span class="line"><span class="comment"># include optimization flags in your own project configuration file;</span></span><br><span class="line"><span class="comment"># instead you will need to point to the</span></span><br><span class="line"><span class="comment"># &quot;proguard-android-optimize.txt&quot; file instead of this one from your</span></span><br><span class="line"><span class="comment"># project.properties file.</span></span><br><span class="line"><span class="comment"># 保护注解 </span></span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line"><span class="comment"># 保持哪些类不被混淆 </span></span><br><span class="line">-keep public <span class="keyword">class</span> <span class="title class_">com</span>.google.vending.licensing.ILicensingService</span><br><span class="line">-keep public <span class="keyword">class</span> <span class="title class_">com</span>.android.vending.licensing.ILicensingService</span><br><span class="line"></span><br><span class="line"><span class="comment"># For native methods, see http://proguard.sourceforge.net/manual/examples.html#native</span></span><br><span class="line"><span class="comment"># 保持 native 方法不被混淆</span></span><br><span class="line">-keepclasseswithmembernames <span class="keyword">class</span> * &#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># keep setters in Views so that animations can still work.</span></span><br><span class="line"><span class="comment"># see http://proguard.sourceforge.net/manual/examples.html#beans</span></span><br><span class="line"><span class="comment">#  保持指定类的成员  这里是保持 View中的get set方法不被混淆</span></span><br><span class="line">-keepclassmembers public <span class="keyword">class</span> * <span class="keyword">extends</span> android.view.View &#123;</span><br><span class="line">   <span class="literal">void</span> set*(***);</span><br><span class="line">   *** get*();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保持Activity中onClick使用到的方法</span></span><br><span class="line"><span class="comment"># We want to keep methods in Activity that could be used in the XML attribute onClick</span></span><br><span class="line">-keepclassmembers <span class="keyword">class</span> * <span class="keyword">extends</span> android.app.Activity &#123;</span><br><span class="line">   public <span class="literal">void</span> *(android.view.View);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保持枚举 enum 类不被混淆</span></span><br><span class="line"><span class="comment"># For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations</span></span><br><span class="line">-keepclassmembers <span class="keyword">enum</span> * &#123;</span><br><span class="line">    public <span class="keyword">static</span> **[] values();</span><br><span class="line">    public <span class="keyword">static</span> ** valueOf(java.lang.<span class="built_in">String</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保持 Parcelable 不被混淆</span></span><br><span class="line">-keepclassmembers <span class="keyword">class</span> * implements android.os.Parcelable &#123;</span><br><span class="line">  public <span class="keyword">static</span> final android.os.Parcelable$Creator CREATOR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 保持静态类不被混淆</span></span><br><span class="line">-keepclassmembers <span class="keyword">class</span> **.R$* &#123;</span><br><span class="line">    public <span class="keyword">static</span> &lt;fields&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># The support library contains references to newer platform versions.</span></span><br><span class="line"><span class="comment"># Don&#x27;t warn about those in case this app is linking against an older</span></span><br><span class="line"><span class="comment"># platform version.  We know about them, and they are safe.</span></span><br><span class="line">-dontwarn android.support.**</span><br></pre></td></tr></table></figure>
<p>下面是在网上找的一些配置时候常见的标签，这里放在这个地方供大家配置的时候查看：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-include &#123;filename&#125;               从给定的文件中读取配置参数</span></span><br><span class="line"><span class="deletion">-basedirectory &#123;directoryname&#125;    指定base目录</span></span><br><span class="line"><span class="deletion">-injars &#123;class_path&#125;              指定要处理的应用程序jar和目录</span></span><br><span class="line"><span class="deletion">-outjars &#123;class_path&#125;             指定处理完后要输出的jar和目录的名称</span></span><br><span class="line"><span class="deletion">-libraryjars &#123;classpath&#125;          指定要处理的应用程序jar和目录所需要的程序库文件</span></span><br><span class="line"><span class="deletion">-dontskipnonpubliclibraryclasses    指定不去忽略非公共的库类。</span></span><br><span class="line"><span class="deletion">-dontskipnonpubliclibraryclassmembers    指定不去忽略包可见的库类的成员。</span></span><br><span class="line"></span><br><span class="line">保留选项</span><br><span class="line"><span class="deletion">-keep &#123;Modifier&#125; &#123;class_specification&#125;    			  保持指定的类文件和类的成员</span></span><br><span class="line"><span class="deletion">-keepclassmembers &#123;modifier&#125; &#123;class_specification&#125;    保持指定类的成员</span></span><br><span class="line"><span class="deletion">-keepclasseswithmembers &#123;class_specification&#125;         保持指定的类和类的成员，但条件是所有指定的类和类成员是要存在.</span></span><br><span class="line"><span class="deletion">-keepnames &#123;class_specification&#125;   					 保持指定的类和类的成员的名称</span></span><br><span class="line"><span class="deletion">-keepclassmembernames &#123;class_specification&#125;    		 保持指定的类的成员的名称</span></span><br><span class="line"><span class="deletion">-keepclasseswithmembernames &#123;class_specification&#125;    保持指定的类和类的成员的名称</span></span><br><span class="line"><span class="deletion">-printseeds &#123;filename&#125;    							列出类和类的成员-keep选项的清单，标准输出到给定的文件</span></span><br><span class="line"></span><br><span class="line">压缩</span><br><span class="line"><span class="deletion">-dontshrink    不压缩输入的类文件</span></span><br><span class="line"><span class="deletion">-printusage &#123;filename&#125;</span></span><br><span class="line"><span class="deletion">-whyareyoukeeping &#123;class_specification&#125;</span></span><br><span class="line"></span><br><span class="line">优化</span><br><span class="line"><span class="deletion">-dontoptimize    不优化输入的类文件</span></span><br><span class="line"><span class="deletion">-assumenosideeffects &#123;class_specification&#125;    优化时假设指定的方法，没有任何副作用</span></span><br><span class="line"><span class="deletion">-allowaccessmodification    优化时允许访问并修改有修饰符的类和类的成员</span></span><br><span class="line"></span><br><span class="line">混淆</span><br><span class="line"><span class="deletion">-dontobfuscate    不混淆输入的类文件</span></span><br><span class="line"><span class="deletion">-printmapping &#123;filename&#125;</span></span><br><span class="line"><span class="deletion">-applymapping &#123;filename&#125;    重用映射增加混淆</span></span><br><span class="line"><span class="deletion">-obfuscationdictionary &#123;filename&#125;    使用给定文件中的关键字作为要混淆方法的名称</span></span><br><span class="line"><span class="deletion">-overloadaggressively    混淆时应用侵入式重载</span></span><br><span class="line"><span class="deletion">-useuniqueclassmembernames    确定统一的混淆类的成员名称来增加混淆</span></span><br><span class="line"><span class="deletion">-flattenpackagehierarchy &#123;package_name&#125;    重新包装所有重命名的包并放在给定的单一包中</span></span><br><span class="line"><span class="deletion">-repackageclass &#123;package_name&#125;    重新包装所有重命名的类文件中放在给定的单一包中</span></span><br><span class="line"><span class="deletion">-dontusemixedcaseclassnames    混淆时不会产生形形色色的类名</span></span><br><span class="line"><span class="deletion">-keepattributes &#123;attribute_name,...&#125;    保护给定的可选属性，例如LineNumberTable, LocalVariableTable, SourceFile, Deprecated, Synthetic, Signature, and InnerClasses.</span></span><br><span class="line"><span class="deletion">-renamesourcefileattribute &#123;string&#125;    设置源文件中给定的字符串常量</span></span><br></pre></td></tr></table></figure>

<p>在混淆后会在\app\build\outputs\mapping\release目录中产生一个mapping.txt文件它列出了原始的类，方法和字段名与混淆后代码间的映射。当从release版本中收到一个bug报告时，可以用它来翻译被混淆的代码，在Bugly以及网易云捕中都会用到这个文件。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android混淆技术/">Android混淆技术</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/27/Android-进阶之-混淆技术/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/27/Android-进阶之-混淆技术/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/26/Android-进阶之工具的使用-TraceView/" title="Android 进阶之工具的使用 TraceView" itemprop="url">Android 进阶之工具的使用 TraceView</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-26T12:34:45.000Z" itemprop="datePublished"> Published 2016-06-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<p>Trace View 是Android 开发环境提供的一个性能分析工具，它能够通过图形化的方式对要分析的进程进行跟踪，并且展现的粒度可以达到方法级别。</p>
</blockquote>
<h4 id="1-使用方法"><a href="#1-使用方法" class="headerlink" title="1.使用方法"></a>1.使用方法</h4><p>使用方法有两种<br>一种是通过界面的形式：</p>
<ul>
<li>Android Studio -&gt; Tool -&gt; Android -&gt; Android Device Manger -&gt; 打开</li>
<li>选择一个待分析的进程，点击start Method profiling 就开始工作了。</li>
<li>执行要分析的某个操作，最好是进行单个动作的分析。不要大范围的动作输入，以免增加分析的困难。</li>
<li>点击stop profiling profiling 过一小段时间就可以看得到TraceView的主视图。</li>
</ul>
<p>一种是在代码中使用：<br>startMethodTracing();<br>stopMethodTracing();<br>注意这种情况下需要访问到SD卡，所以需要赋予SD卡读写权限.</p>
<p>运行Trace View后会生成一个.trace文件。从手机中导出这个文件<br>运行traceview xxx.trace 就会自动打开图形界面，就可以对这个数据进行分析了。</p>
<h4 id="2-界面介绍"><a href="#2-界面介绍" class="headerlink" title="2.界面介绍"></a>2.界面介绍</h4><p>整个TraceView的主视图分成上下两个部分<br>上面是你测试进程的每个线程的时间轴，每个线程占用一行，线宽度代表了执行该函数本身操作所用的时间，<br>下面是捕获到的每个方法执行的各个性能指标。这里包括JDK中的方法，Android SDK中的方法，native方法以及我们自己实现的方法。</p>
<p>这些方法的前面有一个序号，是按照Inclu CPU时间来排序的。每点击一项就会展开成两项，一个是Children一个是Parents，分别表示这个方法中的子方法，以及当前这个方法正在被哪个方法调用。</p>
<h4 id="3-重要指标"><a href="#3-重要指标" class="headerlink" title="3.重要指标"></a>3.重要指标</h4><p>在了解重要指标之前需要先弄懂两个基本概念：<br>Exclusive time 表示的是该方法本身基本操作，不包括子函数调用的时间<br>Inclusive time 表示该方法调用所用的时间，包括子方法的调用的时间。</p>
<p>一些重要指标的意义：<br>incl CPU time： 这个方法以及这个方法的子方法的总共执行时间，以及在整个Mothod Tracing Time的百分比。<br>excl CPU time： 这个方法的总共执行时间，减去里面子方法的执行时间。<br>Call + RecurCall： 这个方法的调用次数以及递归调用的次数<br>CPU time call： 每次执行的时间</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/工具的使用/">工具的使用</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/26/Android-进阶之工具的使用-TraceView/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/26/Android-进阶之工具的使用-TraceView/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/25/Android-进阶之工具的使用Checkstyle/" title="Android 进阶之工具的使用Checkstyle" itemprop="url">Android 进阶之工具的使用Checkstyle</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-25T13:00:28.000Z" itemprop="datePublished"> Published 2016-06-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><img src="/2016/06/25/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8Checkstyle/1.png"></p>
<h4 id="使用CheckStyle的必要性"><a href="#使用CheckStyle的必要性" class="headerlink" title="使用CheckStyle的必要性"></a>使用CheckStyle的必要性</h4><p>一个软件开发团队往往需要有一个书面代码规范，用来统一我们的编程风格，但是这种靠主观约束的行为往往不是很靠谱，有些新来的员工他们的编程风格往往还会时不时得保持旧有的编程习惯，但是在提交代码的时候Code Reviewer看着一大坨的代码，以及快要到期的问题，只能感叹一下，口头“教育”一下新人，只要不是太难入眼一般就会让过，所以最终的代码经过长时间的维护就会成为一堆难以入眼的代码。所以最好的方式是在每个开发者自己的IDE中集成一个工具能够在修改完代码后对代码进行一次检查。CheckStyle就是为了解决这个需求产生的。</p>
<p>CheckStyle 顾名思义就是检查代码风格的，我们可以通过在一个团队中使用同一份代码风格约束文件来规范每个成员的代码规范。<br>CheckStyle 可以检查如下问题：</p>
<ul>
<li>Javadoc注释</li>
<li>命名约定</li>
<li>标题</li>
<li>Import语句</li>
<li>体积大小</li>
<li>空白</li>
<li>修饰符</li>
<li>类设计等</li>
</ul>
<h4 id="Android-Studio中配置CheckStyle"><a href="#Android-Studio中配置CheckStyle" class="headerlink" title="Android Studio中配置CheckStyle"></a>Android Studio中配置CheckStyle</h4><p>安装CheckStyle十分简单只要在AS插件库中查找CheckStyle-IDEA点击安装，然后重启AS即可。</p>
<p><img src="/2016/06/25/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8Checkstyle/0.png"></p>
<p>在刚刚介绍的时候我们提到了代码风格约束文件，这个文件需要我们自己根据自己的需求定义，但是目前有很多现有的checkstyle 文件，网上较为多的是华为的checkstyle 文件，Googlecheckstyle 文件以及Sun 公司的checkstyle 文件。我们可以基于这些checkstyle 文件修改形成我们自己的checkstyle 文件。</p>
<h4 id="在AS-中添加-checkstyle文件"><a href="#在AS-中添加-checkstyle文件" class="headerlink" title="在AS 中添加 checkstyle文件"></a>在AS 中添加 checkstyle文件</h4><p>当重启后，打开 AndroidStudio 的设置页面 settings -&gt; Other Settings 你会发现多了一个 Checkstyle , 点击打开,如下图。<br><img src="/2016/06/25/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8Checkstyle/3.png"><br>你会看到有一个 + 按钮，点击它即可添加自己的 checkstyle 文件。<br>可以点击面板的左上角下拉框 Rule 来在不同的checkstyle之间进行切换。</p>
<h4 id="启动CheckStyle"><a href="#启动CheckStyle" class="headerlink" title="启动CheckStyle"></a>启动CheckStyle</h4><p>选中一个文件右击在弹出的菜单项中，选择Check Current File来启动。面板上还提供了整个Module，整个Project进行check的按钮这个就不做过多的介绍了。<br><img src="/2016/06/25/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8Checkstyle/2.png"></p>
<h4 id="Google-Java-代码规范"><a href="#Google-Java-代码规范" class="headerlink" title="Google Java 代码规范"></a>Google Java 代码规范</h4><p>为了进一步规范Android开发者的编程规范 Google 提供了一份 Java 代码规范文档下面是它的地址：<br><a target="_blank" rel="noopener" href="http://google-styleguide.googlecode.com/svn/trunk/javaguide.html">http://google-styleguide.googlecode.com/svn/trunk/javaguide.html</a><br>下面是它对应的中文翻译：<br><a target="_blank" rel="noopener" href="http://hawstein.com/posts/google-java-style.html">http://hawstein.com/posts/google-java-style.html</a></p>
<p>其实上面介绍的都并不是重点，CheckStyle部分的重要部分是学会编程规范，以及如何根据编程规范配置checkstyle.xml文件，以及运行checkstyle之后出错的处理。但是需要强调下编程规范这东西不能按部就班，不要照本宣科，需要灵活对待。</p>
<h4 id="checkStyle配置"><a href="#checkStyle配置" class="headerlink" title="checkStyle配置"></a>checkStyle配置</h4><p>checkstyle 提供了很多的配置项可供用户进行配置，下面是官网中提供的配置项：</p>
<p><a target="_blank" rel="noopener" href="http://checkstyle.sourceforge.net/checks.html">http://checkstyle.sourceforge.net/checks.html</a></p>
<p>下面列出这些几百项的check项，需要注意的是每个check项下面还有很多的property。如果展开那就更恐怖了。</p>
<figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">AbbreviationAsWordInName 	        The Check validate abbreviations(consecutive capital letters) length in identifier name, it also allow in enforce camel case naming.</span><br><span class="line">AbstractClassName 	                Ensures that the names of<span class="keyword"> abstract</span> classes conforming to some regular expression.</span><br><span class="line">AnnotationLocation 	                Check location of annotation on language elements.</span><br><span class="line">AnnotationUseStyle 	                This<span class="built_in"> check </span>controls the style with the usage of annotations.</span><br><span class="line">AnonInnerLength 	                Checks for<span class="built_in"> long </span>anonymous inner classes.</span><br><span class="line">ArrayTrailingComma 	                Checks<span class="built_in"> if </span>array initialization contains optional trailing comma.</span><br><span class="line">ArrayTypeStyle 	                    Checks the style of<span class="built_in"> array </span>type definitions.</span><br><span class="line">AtclauseOrder 	                    Checks the order of at-clauses.</span><br><span class="line">AvoidEscapedUnicodeCharacters 	    Restrict using Unicode escapes.</span><br><span class="line">AvoidInlineConditionals 	        Detects inline conditionals.</span><br><span class="line">AvoidNestedBlocks 	                Finds nested blocks.</span><br><span class="line">AvoidStarImport 	                Check that finds import statements that use the * notation.</span><br><span class="line">AvoidStaticImport 	                Check that finds<span class="keyword"> static</span> imports.</span><br><span class="line">BooleanExpressionComplexity 	    Restricts nested boolean operators (&amp;&amp;, ||, &amp;, |<span class="built_in"> and </span>^) to a specified depth (default = 3).</span><br><span class="line">CatchParameterName 	                Checks that catch parameter names conform to a format specified by the format property.</span><br><span class="line">ClassDataAbstractionCoupling 	    This metric measures the number of instantiations of other classes within the given class.</span><br><span class="line">ClassFanOutComplexity 	            The number of other classes a given class relies on.</span><br><span class="line">ClassTypeParameterName 	            Checks that class type parameter names conform to a format specified by the format property.</span><br><span class="line">CommentsIndentation 	            Controls the indentation between comments<span class="built_in"> and </span>surrounding code.</span><br><span class="line">ConstantName 	                    Checks that constant names conform to a format specified by the format property.</span><br><span class="line">CovariantEquals 	                Checks that<span class="built_in"> if </span>a class defines a covariant method equals, then it defines method equals(java.lang.Object).</span><br><span class="line">CustomImportOrder 	                Checks that the groups of import declarations appear in the order specified by the user.</span><br><span class="line">CyclomaticComplexity 	            Checks cyclomatic complexity against a specified limit.</span><br><span class="line">DeclarationOrder 	                Checks that the parts of a class<span class="built_in"> or </span>interface declaration appear in the order suggested by the Code Conventions for the Java Programming Language.</span><br><span class="line">DefaultComesLast 	                Check that the default is after all the cases in a switch statement.</span><br><span class="line">DescendantToken 	                Checks for restricted tokens beneath other tokens.</span><br><span class="line">DesignForExtension 	                Checks that classes are designed for inheritance.</span><br><span class="line">EmptyBlock 	                        Checks for empty blocks.</span><br><span class="line">EmptyCatchBlock 	                Checks for empty catch blocks with few options to skip violation.</span><br><span class="line">EmptyForInitializerPad 	            Checks the padding of an empty for initializer; that is whether a space is required at an empty for initializer,<span class="built_in"> or </span>such spaces are forbidden.</span><br><span class="line">EmptyForIteratorPad 	            Checks the padding of an empty for iterator; that is whether a space is required at an empty for iterator,<span class="built_in"> or </span>such spaces are forbidden.</span><br><span class="line">EmptyLineSeparator 	                Checks for blank line separators.</span><br><span class="line">EmptyStatement 	                    Detects empty statements (standalone &#x27;;&#x27;).</span><br><span class="line">EqualsAvoidNull 	                Checks that any combination of String literals is on the left side of an equals() comparison.</span><br><span class="line">EqualsHashCode 	                    Checks that classes that override equals() also override hashCode().</span><br><span class="line">ExecutableStatementCount 	        Restricts the number of executable statements to a specified limit (default = 30).</span><br><span class="line">ExplicitInitialization 	            Checks<span class="built_in"> if </span>any class<span class="built_in"> or </span>object member explicitly initialized to default for its type value (null for object references, zero for numeric types<span class="built_in"> and </span>char<span class="built_in"> and </span>false for boolean.</span><br><span class="line">FallThrough 	                    Checks for fall through in switch statements Finds locations where a case contains Java code - but lacks a break, return,<span class="built_in"> throw </span>or continue statement.</span><br><span class="line">FileLength 	                        Checks for<span class="built_in"> long </span>source files.</span><br><span class="line">FileTabCharacter 	                Checks to see<span class="built_in"> if </span>a file contains a tab character.</span><br><span class="line">FinalClass 	                        Checks that class which has only<span class="keyword"> private</span><span class="keyword"> constructor</span>s is declared as<span class="keyword"> final</span>.</span><br><span class="line">FinalLocalVariable 	                Ensures that local variables that never get their values changed, must be declared<span class="keyword"> final</span>.</span><br><span class="line">FinalParameters 	                Check that method/constructor/catch/foreach parameters are<span class="keyword"> final</span>.</span><br><span class="line">GenericWhitespace 	                Checks that the whitespace around the Generic tokens &lt;<span class="built_in"> and </span>&gt; are correct to the typical convention.</span><br><span class="line">Header 	                            Checks the header of the source against a fixed header file.</span><br><span class="line">HiddenField 	                    Checks that a local variable<span class="built_in"> or </span>a parameter does<span class="built_in"> not </span>shadow a field that is defined in the same class.</span><br><span class="line">HideUtilityClassConstructor 	    Make sure that utility classes (classes that contain only<span class="keyword"> static</span> methods) do<span class="built_in"> not </span>have a<span class="keyword"> public</span><span class="keyword"> constructor</span>.</span><br><span class="line">IllegalCatch 	                    Catching java.lang.Exception, java.lang.Error<span class="built_in"> or </span>java.lang.RuntimeException is almost never acceptable.</span><br><span class="line">IllegalImport 	                    Checks for imports from a set of illegal packages.</span><br><span class="line">IllegalInstantiation 	            Checks for illegal instantiations where a factory method is preferred.</span><br><span class="line">IllegalThrows 	                    Throwing java.lang.Error<span class="built_in"> or </span>java.lang.RuntimeException is almost never acceptable.</span><br><span class="line">IllegalToken 	                    Checks for illegal tokens.</span><br><span class="line">IllegalTokenText 	                Checks for illegal token text.</span><br><span class="line">IllegalType                     	Checks that particular class are never used as types in variable declarations,<span class="built_in"> return </span>values<span class="built_in"> or </span>parameters.</span><br><span class="line">ImportControl                   	Check that controls what packages can be imported in each package.</span><br><span class="line">ImportOrder                     	Ensures that groups of imports come in a specific order.</span><br><span class="line">Indentation 	                    Checks correct indentation of Java Code.</span><br><span class="line">InnerAssignment 	                Checks for assignments in subexpressions, such as in String s = Integer.toString(i = 2);.</span><br><span class="line">InnerTypeLast 	                    Check nested (internal) classes/interfaces are declared at the bottom of the class after all method<span class="built_in"> and </span>field declarations.</span><br><span class="line">InterfaceIsType 	                Implements Bloch, Effective Java, Item 17 - Use Interfaces only to define types.</span><br><span class="line">InterfaceTypeParameterName 	        Checks that interface type parameter names conform to a format specified by the format property.</span><br><span class="line">JavadocMethod 	                    Checks the Javadoc of a method<span class="built_in"> or </span>constructor.</span><br><span class="line">JavadocPackage 	                    Checks that all packages have a package documentation.</span><br><span class="line">JavadocParagraph 	                Checks Javadoc paragraphs.</span><br><span class="line">JavadocStyle 	                    Custom Checkstyle Check to validate Javadoc.</span><br><span class="line">JavadocTagContinuationIndentation 	Checks the indentation of the continuation lines in at-clauses.</span><br><span class="line">JavadocType 	                    Checks the Javadoc of a type.</span><br><span class="line">JavadocVariable 	                Checks that a variable has Javadoc comment.</span><br><span class="line">JavaNCSS 	                        This<span class="built_in"> check </span>calculates the Non Commenting Source Statements (NCSS) metric for Java source files<span class="built_in"> and </span>methods.</span><br><span class="line">LeftCurly 	                        Checks the placement of left curly braces on types, methods<span class="built_in"> and </span>other blocks:</span><br><span class="line">LineLength 	                        Checks for<span class="built_in"> long </span>lines.</span><br><span class="line">LocalFinalVariableName 	            Checks that local<span class="keyword"> final</span> variable names conform to a format specified by the format property.</span><br><span class="line">LocalVariableName 	                Checks that local, non-final variable names conform to a format specified by the format property.</span><br><span class="line">MagicNumber 	                    Checks for magic numbers.</span><br><span class="line">MemberName 	                        Checks that<span class="built_in"> instance </span>variable names conform to a format specified by the format property.</span><br><span class="line">MethodCount 	                    Checks the number of methods declared in each type.</span><br><span class="line">MethodLength 	                    Checks for<span class="built_in"> long </span>methods.</span><br><span class="line">MethodName 	                        Checks that method names conform to a format specified by the format property.</span><br><span class="line">MethodParamPad 	                    Checks the padding between the identifier of a method definition,<span class="keyword"> constructor</span> definition, method call,<span class="built_in"> or </span>constructor invocation;<span class="built_in"> and </span>the left parenthesis of the parameter list.</span><br><span class="line">MethodTypeParameterName 	        Checks that class type parameter names conform to a format specified by the format property.</span><br><span class="line">MissingCtor 	                    Checks that classes (except<span class="keyword"> abstract</span> one) define a ctor<span class="built_in"> and </span>don&#x27;t rely on the default one.</span><br><span class="line">MissingDeprecated 	                This class is used to verify that both the java.lang.Deprecated annotation is present<span class="built_in"> and </span>the @deprecated Javadoc tag is present when either is present.</span><br><span class="line">MissingOverride 	                This class is used to verify that the java.lang.Override annotation is present when the &#123;@inheritDoc&#125; javadoc tag is present.</span><br><span class="line">MissingSwitchDefault 	            Checks that switch statement has <span class="string">&quot;default&quot;</span> clause.</span><br><span class="line">ModifiedControlVariable 	        Check for ensuring that for loop control variables are<span class="built_in"> not </span>modified inside the for block.</span><br><span class="line">ModifierOrder 	                    Checks that the order of modifiers conforms to the suggestions in the Java Language specification, sections 8.1.1, 8.3.1<span class="built_in"> and </span>8.4.3.</span><br><span class="line">MultipleStringLiterals 	            Checks for multiple occurrences of the same string literal within a single file.</span><br><span class="line">MultipleVariableDeclarations 	    Checks that each variable declaration is in its own statement<span class="built_in"> and </span>on its own line.</span><br><span class="line">MutableException 	                Ensures that exceptions (defined as any class name conforming to some regular expression) are immutable.</span><br><span class="line">NeedBraces 	                        Checks for braces around code blocks.</span><br><span class="line">NestedForDepth 	                    Restricts nested for blocks to a specified depth (default = 1).</span><br><span class="line">NestedIfDepth 	                    Restricts nested<span class="built_in"> if-else </span>blocks to a specified depth (default = 1).</span><br><span class="line">NestedTryDepth 	                    Restricts nested try-catch-finally blocks to a specified depth (default = 1).</span><br><span class="line">NewlineAtEndOfFile 	                Checks that there is a newline at the end of each file.</span><br><span class="line">NoClone 	                        Checks that the clone method is<span class="built_in"> not </span>overridden from the Object class.</span><br><span class="line">NoFinalizer 	                    Checks that no method having zero parameters is defined using the name<span class="keyword"> final</span>ize.</span><br><span class="line">NoLineWrap 	                        Checks that chosen statements are<span class="built_in"> not </span>line-wrapped.</span><br><span class="line">NonEmptyAtclauseDescription 	    Checks that the at-clause tag is followed by description .</span><br><span class="line">NoWhitespaceAfter 	                Checks that there is no whitespace after a token.</span><br><span class="line">NoWhitespaceBefore 	                Checks that there is no whitespace before a token.</span><br><span class="line">NPathComplexity 	                Checks the npath complexity against a specified limit (default = 200).</span><br><span class="line">OneStatementPerLine 	            Checks that there is only one statement per line.</span><br><span class="line">OneTopLevelClass 	                Checks that each top-level class, interfaces<span class="built_in"> or </span>enum resides in a source file of its own.</span><br><span class="line">OperatorWrap 	                    Checks line wrapping for operators.</span><br><span class="line">OuterTypeFilename 	                Checks that the outer type name<span class="built_in"> and </span>the file name match.</span><br><span class="line">OuterTypeNumber 	                Checks for the number of defined types at the <span class="string">&quot;outer&quot;</span> level.</span><br><span class="line">OverloadMethodsDeclarationOrder 	Checks that overload methods are grouped together.</span><br><span class="line">PackageAnnotation 	                This<span class="built_in"> check </span>makes sure that all package annotations are in the package-info.java file.</span><br><span class="line">PackageDeclaration 	                Ensures there is a package declaration<span class="built_in"> and </span>(optionally) in the correct directory.</span><br><span class="line">PackageName 	                    Checks that package names conform to a format specified by the format property.</span><br><span class="line">ParameterAssignment 	            Disallow assignment of parameters.</span><br><span class="line">ParameterName 	                    Checks that parameter names conform to a format specified by the format property.</span><br><span class="line">ParameterNumber 	                Checks the number of parameters that a method<span class="built_in"> or </span>constructor has.</span><br><span class="line">ParenPad 	                        Checks the padding of parentheses; that is whether a space is required after a left parenthesis<span class="built_in"> and </span>before a right parenthesis,<span class="built_in"> or </span>such spaces are forbidden, with the exception that it does<span class="built_in"> not </span>check for padding of the right parenthesis at an empty for iterator.</span><br><span class="line">RedundantImport 	                Checks for imports that are redundant.</span><br><span class="line">RedundantModifier 	                Checks for redundant modifiers in interface<span class="built_in"> and </span>annotation definitions,<span class="keyword"> final</span> modifier on methods of<span class="keyword"> final</span> classes, inner interface declarations that are declared as<span class="keyword"> static</span>, non<span class="keyword"> public</span> class<span class="keyword"> constructor</span>s<span class="built_in"> and </span>enum<span class="keyword"> constructor</span>s, nested enum definitions that are declared as<span class="keyword"> static</span>.</span><br><span class="line">Regexp 	                            A<span class="built_in"> check </span>that makes sure that a specified pattern exists (or not) in the file.</span><br><span class="line">RegexpHeader 	                    Checks the header of the source against a header file that contains a</span><br><span class="line">RegexpMultiline 	                Implementation of a<span class="built_in"> check </span>that looks that matches across multiple lines in any file type.</span><br><span class="line">RegexpOnFilename 	                Implementation of a<span class="built_in"> check </span>that matches based on file<span class="built_in"> and/or </span>folder path.</span><br><span class="line">RegexpSingleline 	                Implementation of a<span class="built_in"> check </span>that looks for a single line in any file type.</span><br><span class="line">RegexpSinglelineJava 	            Implementation of a<span class="built_in"> check </span>that looks for a single line in Java files.</span><br><span class="line">RequireThis 	                    Checks that code doesn&#x27;t rely on the <span class="string">&quot;this&quot;</span> default.</span><br><span class="line">ReturnCount 	                    Restricts<span class="built_in"> return </span>statements to a specified count (default = 2).</span><br><span class="line">RightCurly 	                        Checks the placement of right curly braces.</span><br><span class="line">SeparatorWrap 	                    Checks line wrapping with separators.</span><br><span class="line">SimplifyBooleanExpression       	Checks for overly complicated boolean expressions.</span><br><span class="line">SimplifyBooleanReturn           	Checks for overly complicated boolean<span class="built_in"> return </span>statements.</span><br><span class="line">SingleLineJavadoc 	                Checks that a JavaDoc block which can fit on a single line<span class="built_in"> and </span>doesn&#x27;t contain at-clauses</span><br><span class="line">SingleSpaceSeparator            	Checks that non-whitespace characters are separated by no more than one whitespace.</span><br><span class="line">StaticVariableName 	                Checks that<span class="keyword"> static</span>, non-final variable names conform to a format specified by the format property.</span><br><span class="line">StringLiteralEquality           	Checks that string literals are<span class="built_in"> not </span>used with ==<span class="built_in"> or </span>!=.</span><br><span class="line">SummaryJavadoc                  	Checks that Javadoc summary sentence does<span class="built_in"> not </span>contain phrases that are<span class="built_in"> not </span>recommended to use.</span><br><span class="line">SuperClone 	                        Checks that an overriding clone() method invokes super.clone().</span><br><span class="line">SuperFinalize                   	Checks that an overriding<span class="keyword"> final</span>ize() method invokes super.finalize().</span><br><span class="line">SuppressWarnings                	This<span class="built_in"> check </span>allows you to specify what warnings that</span><br><span class="line">SuppressWarningsHolder           	This<span class="built_in"> check </span>allows for finding code that should<span class="built_in"> not </span>be reported by Checkstyle</span><br><span class="line">ThrowsCount 	                    Restricts throws statements to a specified count (default = 4).</span><br><span class="line">TodoComment 	                    A<span class="built_in"> check </span>for TODO comments.</span><br><span class="line">TrailingComment                 	The<span class="built_in"> check </span>to ensure that requires that comments be the only thing on a line.</span><br><span class="line">Translation 	                    The TranslationCheck class helps to ensure the correct translation of code by checking property files for consistency regarding their keys.</span><br><span class="line">TypecastParenPad 	                Checks the padding of parentheses for typecasts.</span><br><span class="line">TypeName 	                        Checks that type names conform to a format specified by the format property.</span><br><span class="line">UncommentedMain                 	Detects uncommented main methods.</span><br><span class="line">UniqueProperties                	Detects duplicated keys in properties files.</span><br><span class="line">UnnecessaryParentheses            	Checks<span class="built_in"> if </span>unnecessary parentheses are used in a statement<span class="built_in"> or </span>expression.</span><br><span class="line">UnusedImports 	                    Checks for unused import statements.</span><br><span class="line">UpperEll 	                        Checks that<span class="built_in"> long </span>constants are defined with an upper ell.</span><br><span class="line">VariableDeclarationUsageDistance 	Checks the distance between declaration of variable<span class="built_in"> and </span>its first usage.</span><br><span class="line">VisibilityModifier              	Checks visibility of class members.</span><br><span class="line">WhitespaceAfter 	                Checks that a token is followed by whitespace, with the exception that it does<span class="built_in"> not </span>check for whitespace after the semicolon of an empty for iterator.</span><br><span class="line">WhitespaceAround 	                Checks that a token is surrounded by whitespace.</span><br><span class="line">WriteTag 	                        Outputs a JavaDoc tag as information.</span><br></pre></td></tr></table></figure>

<p>一般我们不会自己从头到尾来编写checkstyle.xml，我们可以根据现有的配置表根据需求进行修改。因此我们要做的就是认识每个配置项，学会修改这些配置项。</p>
<h4 id="一些公司的checkStyle配置文件"><a href="#一些公司的checkStyle配置文件" class="headerlink" title="一些公司的checkStyle配置文件"></a>一些公司的checkStyle配置文件</h4><p>下面提供一些公司的checkStyle配置文件供大家参考：<br><a target="_blank" rel="noopener" href="https://github.com/checkstyle/checkstyle/blob/master/src/main/resources/google_checks.xml">Google CheckStyle 地址</a><br><a target="_blank" rel="noopener" href="https://github.com/checkstyle/checkstyle/blob/master/src/main/resources/sun_checks.xml">Sun CheckStyle 地址</a></p>
<p>下面是网上流传较多的华为Checkstyle，我自己的checkstyle也是根据这个进行微调的，由于这个是有注释的所以转载过来给大家，也供自己以后备用：<br>转载自： <a target="_blank" rel="noopener" href="http://blog.csdn.net/will_awoke/article/details/12705611">http://blog.csdn.net/will_awoke/article/details/12705611</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">module</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Puppy Crawl//DTD Check Configuration 1.2//EN&quot;</span> <span class="string">&quot;http://www.puppycrawl.com/dtds/configuration_1_2.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Generated by RHY @will_awoke --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;Checker&quot;</span>&gt;</span>	</span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;charset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span>   </span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;severity&quot;</span> <span class="attr">value</span>=<span class="string">&quot;warning&quot;</span>/&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- Checks for Size Violations.  --&gt;</span> </span><br><span class="line">  <span class="comment">&lt;!-- 检查文件的长度（行） default max=2000 --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;FileLength&quot;</span>&gt;</span>         </span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2500&quot;</span>/&gt;</span>        </span><br><span class="line">  <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- Checks that property files contain the same keys. --&gt;</span> </span><br><span class="line">  <span class="comment">&lt;!-- 检查**.properties配置文件 是否有相同的key</span></span><br><span class="line"><span class="comment">  &lt;module name=&quot;Translation&quot;&gt;         </span></span><br><span class="line"><span class="comment">  &lt;/module&gt;   </span></span><br><span class="line"><span class="comment">  --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;TreeWalker&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Checks for imports    --&gt;</span>               </span><br><span class="line">    <span class="comment">&lt;!-- 必须导入类的完整路径，即不能使用*导入所需的类 --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;AvoidStarImport&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- 检查是否从非法的包中导入了类 illegalPkgs: 定义非法的包名称--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;IllegalImport&quot;</span>/&gt;</span> <span class="comment">&lt;!-- defaults to sun.* packages --&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- 检查是否导入了不必显示导入的类--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;RedundantImport&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- 检查是否导入的包没有使用--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;UnusedImports&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks for whitespace           </span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;EmptyForIteratorPad&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;MethodParamPad&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;NoWhitespaceAfter&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;NoWhitespaceBefore&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;OperatorWrap&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;ParenPad&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;TypecastParenPad&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;WhitespaceAfter&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;WhitespaceAround&quot;/&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- 检查类和接口的javadoc 默认不检查author 和version tags       </span></span><br><span class="line"><span class="comment">      authorFormat: 检查author标签的格式</span></span><br><span class="line"><span class="comment">      versionFormat: 检查version标签的格式</span></span><br><span class="line"><span class="comment">      scope: 可以检查的类的范围，例如：public只能检查public修饰的类，private可以检查所有的类</span></span><br><span class="line"><span class="comment">      excludeScope: 不能检查的类的范围，例如：public，public的类将不被检查，但访问权限小于public的类仍然会检查，其他的权限以此类推</span></span><br><span class="line"><span class="comment">      tokens: 该属性适用的类型，例如：CLASS_DEF,INTERFACE_DEF --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;JavadocType&quot;</span>&gt;</span>  </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;authorFormat&quot;</span> <span class="attr">value</span>=<span class="string">&quot;\S&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;scope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;protected&quot;</span>/&gt;</span>        </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tokens&quot;</span> <span class="attr">value</span>=<span class="string">&quot;CLASS_DEF,INTERFACE_DEF&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 检查方法的javadoc的注释</span></span><br><span class="line"><span class="comment">      scope: 可以检查的方法的范围，例如：public只能检查public修饰的方法，private可以检查所有的方法</span></span><br><span class="line"><span class="comment">      allowMissingParamTags: 是否忽略对参数注释的检查</span></span><br><span class="line"><span class="comment">      allowMissingThrowsTags: 是否忽略对throws注释的检查</span></span><br><span class="line"><span class="comment">      allowMissingReturnTag: 是否忽略对return注释的检查 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;JavadocMethod&quot;</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;scope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;private&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;allowMissingParamTags&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;allowMissingThrowsTags&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;allowMissingReturnTag&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tokens&quot;</span> <span class="attr">value</span>=<span class="string">&quot;METHOD_DEF&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;allowUndeclaredRTE&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;allowThrowsTagsForSubclasses&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="comment">&lt;!--允许get set 方法没有注释--&gt;</span></span><br><span class="line"> 	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;allowMissingPropertyJavadoc&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!-- 检查类变量的注释</span></span><br><span class="line"><span class="comment">      scope: 检查变量的范围，例如：public只能检查public修饰的变量，private可以检查所有的变量 --&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;JavadocVariable&quot;</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;scope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;private&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!--option: 定义左大括号&#x27;&#123;&#x27;显示位置，eol在同一行显示，nl在下一行显示  </span></span><br><span class="line"><span class="comment">      maxLineLength: 大括号&#x27;&#123;&#x27;所在行行最多容纳的字符数  </span></span><br><span class="line"><span class="comment">      tokens: 该属性适用的类型，例：CLASS_DEF,INTERFACE_DEF,METHOD_DEF,CTOR_DEF --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;LeftCurly&quot;</span>&gt;</span> </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;option&quot;</span> <span class="attr">value</span>=<span class="string">&quot;nl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">&lt;!-- NeedBraces 检查是否应该使用括号的地方没有加括号  </span></span><br><span class="line"><span class="comment">      tokens: 定义检查的类型 --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;NeedBraces&quot;</span>/&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks the placement of right curly braces (&#x27;&#125;&#x27;) for  else, try, and catch tokens. The policy to verify is specified using property  option.   </span></span><br><span class="line"><span class="comment">      option: 右大括号是否单独一行显示  </span></span><br><span class="line"><span class="comment">      tokens: 定义检查的类型  --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;RightCurly&quot;</span>&gt;</span>    </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;option&quot;</span> <span class="attr">value</span>=<span class="string">&quot;alone&quot;</span>/&gt;</span> 	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!-- 检查在重写了equals方法后是否重写了hashCode方法 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;EqualsHashCode&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!--  Checks for illegal instantiations where a factory method is preferred.  </span></span><br><span class="line"><span class="comment">      Rationale: Depending on the project, for some classes it might be preferable to create instances through factory methods rather than calling the constructor.  </span></span><br><span class="line"><span class="comment">      A simple example is the java.lang.Boolean class. In order to save memory and CPU cycles, it is preferable to use the predefined constants TRUE and FALSE. Constructor invocations should be replaced by calls to Boolean.valueOf().  </span></span><br><span class="line"><span class="comment">      Some extremely performance sensitive projects may require the use of factory methods for other classes as well, to enforce the usage of number caches or object pools. --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;IllegalInstantiation&quot;</span>&gt;</span>  </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;classes&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java.lang.Boolean&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks for Naming Conventions.   命名规范   --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- local, final variables, including catch parameters --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;LocalFinalVariableName&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- local, non-final variables, including catch parameters--&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;LocalVariableName&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- static, non-final fields --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;StaticVariableName&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;(^[A-Z0-9_]&#123;0,19&#125;$)&quot;</span>/&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- packages --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;PackageName&quot;</span> &gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;^[a-z]+(\.[a-z][a-z0-9]*)*$&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span> </span><br><span class="line">     </span><br><span class="line">    <span class="comment">&lt;!-- classes and interfaces --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;TypeName&quot;</span>&gt;</span>  </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;(^[A-Z][a-zA-Z0-9]&#123;0,19&#125;$)&quot;</span>/&gt;</span> 	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- methods --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;MethodName&quot;</span>&gt;</span>          </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;(^[a-z][a-zA-Z0-9]&#123;0,19&#125;$)&quot;</span>/&gt;</span>         </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- non-static fields --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;MemberName&quot;</span>&gt;</span>  </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;(^[a-z][a-z0-9][a-zA-Z0-9]&#123;0,19&#125;$)&quot;</span>/&gt;</span>         </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- parameters --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;ParameterName&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;(^[a-z][a-zA-Z0-9_]&#123;0,19&#125;$)&quot;</span>/&gt;</span>         </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- constants (static,  final fields) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;ConstantName&quot;</span>&gt;</span> </span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;(^[A-Z0-9_]&#123;0,19&#125;$)&quot;</span>/&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 代码缩进   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;Indentation&quot;</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks for redundant exceptions declared in throws clause such as duplicates, unchecked exceptions or subclasses of another declared exception. </span></span><br><span class="line"><span class="comment">      检查是否抛出了多余的异常  </span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;RedundantThrows&quot;&gt;</span></span><br><span class="line"><span class="comment">    	&lt;property name=&quot;logLoadErrors&quot; value=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">    	&lt;property name=&quot;suppressLoadErrors&quot; value=&quot;true&quot;/&gt; </span></span><br><span class="line"><span class="comment">    &lt;/module&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span> </span><br><span class="line">    </span><br><span class="line">     <span class="comment">&lt;!--  Checks for overly complicated boolean expressions. Currently finds code like  if (b == true), b || true, !false, etc.   </span></span><br><span class="line"><span class="comment">       检查boolean值是否冗余的地方  </span></span><br><span class="line"><span class="comment">       Rationale: Complex boolean logic makes code hard to understand and maintain. --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;SimplifyBooleanExpression&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--  Checks for overly complicated boolean return statements. For example the following code  </span></span><br><span class="line"><span class="comment">       检查是否存在过度复杂的boolean返回值  </span></span><br><span class="line"><span class="comment">       if (valid())  </span></span><br><span class="line"><span class="comment">          return false;  </span></span><br><span class="line"><span class="comment">       else  </span></span><br><span class="line"><span class="comment">          return true;  </span></span><br><span class="line"><span class="comment">       could be written as  </span></span><br><span class="line"><span class="comment">          return !valid();  </span></span><br><span class="line"><span class="comment">       The Idea for this Check has been shamelessly stolen from the equivalent PMD rule. --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;SimplifyBooleanReturn&quot;</span>/&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks that a class which has only private constructors is declared as final.只有私有构造器的类必须声明为final--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;FinalClass&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">     <span class="comment">&lt;!--  Make sure that utility classes (classes that contain only static methods or fields in their API) do not have a public constructor.  </span></span><br><span class="line"><span class="comment">       确保Utils类（只提供static方法和属性的类）没有public构造器。  </span></span><br><span class="line"><span class="comment">       Rationale: Instantiating utility classes does not make sense. Hence the constructors should either be private or (if you want to allow subclassing) protected. A common mistake is forgetting to hide the default constructor.  </span></span><br><span class="line"><span class="comment">       If you make the constructor protected you may want to consider the following constructor implementation technique to disallow instantiating subclasses:  </span></span><br><span class="line"><span class="comment">       public class StringUtils // not final to allow subclassing  </span></span><br><span class="line"><span class="comment">       &#123;  </span></span><br><span class="line"><span class="comment">           protected StringUtils() &#123;  </span></span><br><span class="line"><span class="comment">               throw new UnsupportedOperationException(); // prevents calls from subclass  </span></span><br><span class="line"><span class="comment">           &#125;  </span></span><br><span class="line"><span class="comment">           public static int count(char c, String s) &#123;  </span></span><br><span class="line"><span class="comment">               // ...  </span></span><br><span class="line"><span class="comment">           &#125;  </span></span><br><span class="line"><span class="comment">       &#125; </span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;HideUtilityClassConstructor&quot;/&gt; </span></span><br><span class="line"><span class="comment">    --&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--  Checks visibility of class members. Only static final members may be public; other class members must be private unless property protectedAllowed or packageAllowed is set.  </span></span><br><span class="line"><span class="comment">      检查class成员属性可见性。只有static final 修饰的成员是可以public的。其他的成员属性必需是private的，除非属性protectedAllowed或者packageAllowed设置了true.  </span></span><br><span class="line"><span class="comment">       Public members are not flagged if the name matches the public member regular expression (contains &quot;^serialVersionUID$&quot; by default). <span class="doctag">Note:</span> Checkstyle 2 used to include &quot;^f[A-Z][a-zA-Z0-9]*$&quot; in the default pattern to allow CMP for EJB 1.1 with the default settings. With EJB 2.0 it is not longer necessary to have public access for persistent fields, hence the default has been changed.  </span></span><br><span class="line"><span class="comment">       Rationale: Enforce encapsulation. 强制封装 --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;VisibilityModifier&quot;</span>/&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 每一行只能定义一个变量 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;MultipleVariableDeclarations&quot;</span>&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">     <span class="comment">&lt;!-- Checks the style of array type definitions. Some like Java-style: public static void main(String[] args) and some like C-style: public static void main(String args[])   </span></span><br><span class="line"><span class="comment">       检查再定义数组时，采用java风格还是c风格，例如：int[] num是java风格，int num[]是c风格。默认是java风格--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;ArrayTypeStyle&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks that there are no &quot;magic numbers&quot;, where a magic number is a numeric literal that is not defined as a constant. By default, -1, 0, 1, and 2 are not considered to be magic numbers. </span></span><br><span class="line"><span class="comment">    &lt;module name=&quot;MagicNumber&quot;&gt;   </span></span><br><span class="line"><span class="comment">    &lt;/module&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- A check for <span class="doctag">TODO:</span> comments. Actually it is a generic regular expression matcher on Java comments. To check for other patterns in Java comments, set property format.   </span></span><br><span class="line"><span class="comment">       检查是否存在TODO（待处理） TODO是javaIDE自动生成的。一般代码写完后要去掉。  </span></span><br><span class="line"><span class="comment">     --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;TodoComment&quot;</span>/&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--  Checks that long constants are defined with an upper ell. That is &#x27; L&#x27; and not &#x27;l&#x27;. This is in accordance to the Java Language Specification,  Section 3.10.1.  </span></span><br><span class="line"><span class="comment">      检查是否在long类型是否定义了大写的L.字母小写l和数字1（一）很相似。  </span></span><br><span class="line"><span class="comment">      looks a lot like 1. --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;UpperEll&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--  Checks that switch statement has &quot;default&quot; clause. 检查switch语句是否有‘default’从句  </span></span><br><span class="line"><span class="comment">       Rationale: It&#x27;s usually a good idea to introduce a default case in every switch statement. </span></span><br><span class="line"><span class="comment">       Even if the developer is sure that all currently possible cases are covered, this should be expressed in the default branch,</span></span><br><span class="line"><span class="comment">        e.g. by using an assertion. This way the code is protected aginst later changes, e.g. introduction of new types in an enumeration type. --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;MissingSwitchDefault&quot;</span>/&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--检查switch中case后是否加入了跳出语句，例如：return、break、throw、continue --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;FallThrough&quot;</span>/&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks the number of parameters of a method or constructor. max default 7个. --&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;ParameterNumber&quot;</span>&gt;</span>      </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>/&gt;</span>              </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 每行字符数 --&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;LineLength&quot;</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;200&quot;</span>/&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Checks for long methods and constructors. max default 150行. max=300 设置长度300 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;MethodLength&quot;</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;300&quot;</span>/&gt;</span>                 </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>        </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ModifierOrder 检查修饰符的顺序，默认是 public,protected,private,abstract,static,final,transient,volatile,synchronized,native --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;ModifierOrder&quot;</span>&gt;</span>          </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>      </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 检查是否有多余的修饰符，例如：接口中的方法不必使用public、abstract修饰  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;RedundantModifier&quot;</span>&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--- 字符串比较必须使用 equals() --&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;StringLiteralEquality&quot;</span>&gt;</span>          </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- if-else嵌套语句个数 最多4层 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;NestedIfDepth&quot;</span>&gt;</span>        </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>/&gt;</span>         </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- try-catch 嵌套语句个数 最多2层 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;NestedTryDepth&quot;</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>/&gt;</span>         </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>  </span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!-- 返回个数 --&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;ReturnCount&quot;</span>&gt;</span>        </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>/&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;^$&quot;</span>/&gt;</span>          </span><br><span class="line">    <span class="tag">&lt;/<span class="name">module</span>&gt;</span>                 </span><br><span class="line">  <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="CheckStyle-运行结果分析"><a href="#CheckStyle-运行结果分析" class="headerlink" title="CheckStyle 运行结果分析"></a>CheckStyle 运行结果分析</h4><p>CheckStyle 与FindBug以及Lint相比之下做的比较不足的是在IDE插件中没有提供每个运行结果警告的说明，在遇到问题的时候只能到上面提到的网站上查找原因，并且上述的网站访问速度很慢，但是好在一般点击到报错或者警告的地方一般都会大概知道是真么原因导致，反倒是不是很难。<br>但是今天突然上网的时候看到一篇别人写的博客，上面记录了较为常见的运行结果的说明，为了避免原博客这部分内容丢失所以特地将这篇博客转载过来：</p>
<p>大家也可以通过这个链接访问原始博客：<a target="_blank" rel="noopener" href="http://blog.csdn.net/zhengqiqiqinqin/article/details/8450416">http://blog.csdn.net/zhengqiqiqinqin/article/details/8450416</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>Missing a Javadoc comment:缺少JavaDoc注释</span><br><span class="line"><span class="number">2.</span>First sentence should end with a period:你的注释的第一行文字结束应该加上一个<span class="string">&quot;.&quot;</span></span><br><span class="line"><span class="number">3.</span>Expected <span class="meta">@throws</span> tag <span class="keyword">for</span> <span class="string">&#x27;Exception&#x27;</span>:在注释中希望有<span class="meta">@throws</span>的说明,在方法前得注释中添加这样一行：* <span class="meta">@throws</span> Exception <span class="keyword">if</span> has <span class="title function_">error</span><span class="params">(异常说明)</span></span><br><span class="line"><span class="number">4.</span>Parameter docType should be <span class="keyword">final</span>:参数docType应该为<span class="keyword">final</span>类型 解决方法：在参数docType前面加个<span class="keyword">final</span></span><br><span class="line"><span class="number">5.</span>Variable “ABC” must match pattern “^[a-z][a-zA-Z0-<span class="number">9</span>]*$”变量“ABC”不符合命名规则“^[a-z][a-zA-Z0-<span class="number">9</span>]*$”解决方法：把这个命名改成符合规则的命名 “aBC”</span><br><span class="line"><span class="number">6.</span>Utility classes should not have a <span class="keyword">public</span> or <span class="keyword">default</span> constructor. 接口中的内部类中不应该有公共的或者默认的构造方法</span><br><span class="line">解决方法：在内部类中，定义一个私有的构造方法，然后内部类声明为<span class="keyword">final</span>类型。如果前面有<span class="keyword">static</span>，那么<span class="keyword">final</span>还必须放在<span class="keyword">static</span>之后</span><br><span class="line"><span class="number">7.</span><span class="string">&#x27;&#123;&#x27;</span> is not preceded with whitespace.大括号后面必须空一格</span><br><span class="line"><span class="number">8.</span><span class="string">&#x27;public&#x27;</span> modifier out of order with the JLS suggestions. <span class="keyword">public</span>顺序错误=</span><br><span class="line"><span class="number">9.</span>Method <span class="string">&#x27;deleteChild&#x27;</span> is not designed <span class="keyword">for</span> extension - needs to be <span class="keyword">abstract</span>, <span class="keyword">final</span> or empty. 不是拓展或继承的方法，必须指定<span class="keyword">abstract</span>,<span class="keyword">final</span>或空</span><br><span class="line">1Type is missing a javadoc commentClass 缺少类型说明</span><br><span class="line"><span class="number">2</span>“&#123;” should be on the previous line“&#123;” 应该位于前一行。解决方法：把“&#123;”放到上一行去</span><br><span class="line">3Methos is missing a javadoc comment 方法前面缺少javadoc注释。解决方法：添加javadoc注释 类似这样：</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* set default mock parameter.（方法说明）</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> additionalParameters parameter additional(参数名称)</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> data manager(返回值说明)</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> Exception if has error(异常说明)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="number">4</span> Expected <span class="meta">@throws</span> tag <span class="keyword">for</span> “Exception”在注释中希望有<span class="meta">@throws</span>的说明</span><br><span class="line">解决方法：在方法前得注释中添加这样一行：* <span class="meta">@throws</span> Exception <span class="keyword">if</span> has <span class="title function_">error</span><span class="params">(异常说明)</span></span><br><span class="line"><span class="number">5</span>“.” Is preceeded with whitespace “.” 前面不能有空格。解决方法：把“（”前面的空格去掉</span><br><span class="line"><span class="number">6</span>“.” Is followed by whitespace“.” 后面不能有空格。解决方法：把“）”后面的空格去掉</span><br><span class="line"><span class="number">7</span>“=” is not preceeded with whitespace“=” 前面缺少空格。解决方法：在“=”前面加个空格</span><br><span class="line"><span class="number">8</span>“=” is not followed with whitespace“=” 后面缺少空格。解决方法：在“=”后面加个空格</span><br><span class="line"><span class="number">9</span>“&#125;” should be on the same line“&#125;” 应该与下条语句位于同一行。解决方法：把“&#125;”放到下一行的前面</span><br><span class="line">10Unused <span class="meta">@param</span> tag <span class="keyword">for</span> “unused”没有参数“unused”，不需注释</span><br><span class="line">解决方法：“* <span class="meta">@param</span> unused parameter <span class="title function_">additional</span><span class="params">(参数名称)</span>” 把这行unused参数的注释去掉“</span><br><span class="line">11Variable “CA” missing javadoc变量“CA”缺少javadoc注释</span><br><span class="line">解决方法：在“CA“变量前添加javadoc注释：<span class="comment">/** CA. */</span>（注意：一定记得加上“.”）</span><br><span class="line">12Line longer than 80characters行长度超过<span class="number">80</span> 。解决方法：把它分成多行写。必要时候，可以ctrl+shift+f</span><br><span class="line">13Line contains a tab character行含有”tab” 字符。快速解决方法：可以使用editplus中的format功能，把tab字符转化为空格，然后保存Editplus英文版安装文件在我机子上有。需要的可以来拷贝。注册Editplus，点击安装文件中注册的文件</span><br><span class="line">14Redundant “Public” modifier冗余的“<span class="keyword">public</span>” modifier 。解决方法：冗余的“<span class="keyword">public</span>”</span><br><span class="line">15Final modifier out of order with the JSL suggestion Final modifier的顺序错误</span><br><span class="line">16Avoid using the “.*” form of importImport格式避免使用“.*”</span><br><span class="line">17Redundant <span class="keyword">import</span> from the same <span class="keyword">package</span>从同一个包中Import内容</span><br><span class="line">18Unused <span class="keyword">import</span>-java.util.listImport进来的java.util.list没有被使用。解决方法：去掉导入的多余的类</span><br><span class="line">19Duplicate <span class="keyword">import</span> to line <span class="number">13</span>重复Import同一个内容 解决方法：去掉导入的多余的类</span><br><span class="line">20Import from illegal <span class="keyword">package</span>从非法包中 Import内容</span><br><span class="line"><span class="number">21</span>“<span class="keyword">while</span>” construct must use “&#123;&#125;” “<span class="keyword">while</span>” 语句缺少“&#123;&#125;”</span><br><span class="line">22Variable “sTest1” must be <span class="keyword">private</span> and have accessor method变量“sTest1”应该是<span class="keyword">private</span>的，并且有调用它的方法</span><br><span class="line">23Variable “ABC” must match pattern “^[a-z][a-zA-Z0-<span class="number">9</span>]*$”变量“ABC”不符合命名规则“^[a-z][a-zA-Z0-<span class="number">9</span>]*$”解决方法：把这个命名改成符合规则的命名 “aBC”</span><br><span class="line"><span class="number">24</span>“(” is followed by whitespace“(” 后面不能有空格 <span class="number">25</span>“)”is proceeded by whitespace“)” 前面不能有空格</span><br><span class="line">解决方法：把前面或者后面的空格去掉</span><br><span class="line"><span class="number">25</span>、First sentence should end with a period.解决方法：你的注释的第一行文字结束应该加上一个<span class="string">&quot;.&quot;</span>。</span><br><span class="line"><span class="number">26</span>、Redundant <span class="keyword">throws</span>: <span class="string">&#x27;NameNotFoundException&#x27;</span> is subclass of <span class="string">&#x27;NamingException&#x27;</span>. <span class="string">&#x27;NameNotFoundException &#x27;</span>是<span class="string">&#x27;NamingException&#x27;</span>的子类重复抛出异常。</span><br><span class="line">解决方法：如果抛出两个异常，一个异常类是另一个的子类，那么只需要写父类</span><br><span class="line">去掉NameNotFoundException异常，对应的javadoc注释异常注释说明也需要去掉</span><br><span class="line"><span class="number">27</span>、Parameter docType should be <span class="keyword">final</span>. 参数docType应该为<span class="keyword">final</span>类型 解决方法：在参数docType前面加个<span class="keyword">final</span></span><br><span class="line"><span class="number">28</span>、Line has trailing spaces. 多余的空行 解决方法：去掉这行空行</span><br><span class="line"><span class="number">29.</span>Must have at least one statement. 至少一个声明</span><br><span class="line">解决方法：&#125; <span class="keyword">catch</span> (NumberFormatException nfe) &#123;</span><br><span class="line">LOG.error(<span class="string">&quot;Auto Renews the agreement failed&quot;</span>, nfe);<span class="comment">//异常捕捉里面不能为空，在异常里面加一句话。如打印等等</span></span><br><span class="line"><span class="number">30</span>、<span class="string">&#x27;&gt;&#x27;</span> is not followed by whitespace.并且又有 <span class="string">&#x27;(&#x27;</span> is preceded with whitespace.</span><br><span class="line">定义集合和枚举的时候的时候，最后一个“&gt;”后面要有空格，“（”前面不容许有空格。解决方法：去掉泛型</span><br><span class="line"><span class="number">31</span>、Got an exception - java.lang.RuntimeException: Unable to get <span class="keyword">class</span> <span class="title class_">information</span> <span class="keyword">for</span> <span class="meta">@throws</span> tag <span class="string">&#x27;SystemException&#x27;</span>.原因：不合理的<span class="keyword">throws</span>。</span><br><span class="line">解决方法：要确保某些类型，如某些类、接口不被<span class="keyword">throws</span>。把声明的异常去掉。在实现类中抛出异常</span><br><span class="line">网上参考解决方法：<span class="number">1</span>、这是CheckStyle报的错。通常需要Refreh, clean/build这个Project. 如果不行，可以尝试clean all projects, restart Eclipse.</span><br><span class="line"><span class="number">2</span>、因为编译好的类没有在checkstyle的classpath中.所以, 只要将编译好的class配置到在&lt;checkstyle/&gt;的classpath中就没有这个问题了.另外, 还发现checkstyle的line length好像也有点问题, 明明没有超过<span class="number">120</span>个字符, 却还是报错.无奈, 我把Eclipse中java &gt; code style &gt; formatter中的Maximum line with改成了<span class="number">100</span>, 然后format一下, 基本就没有问题了</span><br><span class="line"><span class="number">32</span>、File does not end with a newline.解决方法：删掉报错的类，新建一个同名的类，把代码全部复制过去</span><br><span class="line"><span class="number">33</span>、Utility classes should not have a <span class="keyword">public</span> or <span class="keyword">default</span> constructor. 接口中的内部类中不应该有公共的或者默认的构造方法</span><br><span class="line">解决方法：在内部类中，定义一个私有的构造方法，然后内部类声明为<span class="keyword">final</span>类型。如果前面有<span class="keyword">static</span>，那么<span class="keyword">final</span>还必须放在<span class="keyword">static</span>之后</span><br><span class="line"><span class="number">34</span>、Variable <span class="string">&#x27;functionCode&#x27;</span> must be <span class="keyword">private</span> and have accessor methods.变量要改成<span class="keyword">private</span>然后提供访问的方法</span><br><span class="line">解决方法：给这些变量的修饰符改成<span class="keyword">private</span>，然后提供set，get方法，并加上对应的方法javadoc注释、参数注释。并在返回值和参数类型前添加<span class="keyword">final</span>。并把调用了这个变量的地方改成通过方法访问</span><br><span class="line"><span class="number">35.</span> <span class="string">&#x27;X&#x27;</span> hides a field.</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> bar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(<span class="type">int</span> bar)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">this</span>.bar = bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getBar</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">全局<span class="keyword">private</span> <span class="type">int</span> bar;和局部<span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(<span class="type">int</span> bar)</span>的bar变量名字重复。</span><br><span class="line">解决方法：把方法里面的参数名称改变下就可以了<span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(<span class="type">int</span> newBar)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">this</span>.bar = newBar;</span><br><span class="line">&#125;。</span><br><span class="line"><span class="number">36</span>、Got an exception - Unexpected character <span class="number">0xfffd</span> in identifier</span><br><span class="line">这是因为CheckStyle不能识别制定的编码格式。</span><br><span class="line">网上参考解决方法：</span><br><span class="line"><span class="number">1</span>、Eclipse中可以配置，在Other--&gt;checker中可以指定</span><br><span class="line"><span class="number">2</span>、可以修改checkstyle配置文件：</span><br><span class="line">&lt;<span class="keyword">module</span> name=<span class="string">&quot;Checker&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;severity&quot;</span> value=<span class="string">&quot;warning&quot;</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;charset&quot;</span> value=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span><br><span class="line">&lt;<span class="keyword">module</span> name=<span class="string">&quot;TreeWalker&quot;</span>&gt;</span><br><span class="line">如果是UTF-<span class="number">8</span>的话，就添加加粗的那条语句，就可以了。</span><br><span class="line"><span class="number">37</span>、 Got an exception - java.lang.RuntimeException: Unable to get <span class="keyword">class</span> <span class="title class_">information</span> <span class="keyword">for</span> <span class="meta">@throws</span> tag *whatever*.</span><br><span class="line">网上参考解决方法：选中CheckSytle的JavaDoc --&gt; Method JavaDoc --&gt; logLoadErrors。如果是CheckStyle自己加载时出错的，打个Log就可以了，不要整出Errors吓人。</span><br><span class="line">还有一处也可能包出同样的错误。Coding Problems --&gt; Redundant Throws --&gt; logLoadErrors选中即可</span><br><span class="line"><span class="number">38</span>、Expected <span class="meta">@param</span> tag <span class="keyword">for</span> <span class="string">&#x27;dataManager&#x27;</span>. 缺少dataManager参数的注释 解决方法：在注释中添加<span class="meta">@param</span> dataManager DataManager</span><br><span class="line">网上一些其他错误的解答：</span><br><span class="line"><span class="number">1.</span> Parameter X should be <span class="keyword">final</span>.</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> bar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(<span class="type">int</span> bar)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">this</span>.bar = bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getBar</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">解释：<span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(<span class="type">int</span> bar)</span>的局部变量，被认为是不可改变的，检查需要加上<span class="keyword">final</span>关键字定义<span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(<span class="keyword">final</span> <span class="type">int</span> bar)</span>此错误，可以忽略不检查。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> Redundant <span class="string">&#x27;X&#x27;</span> modifier.</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CacheHRTreeService</span> <span class="keyword">extends</span> <span class="title class_">Manager</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Organization Tree</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> orgDto</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOrganization</span><span class="params">(OrganizationDTO orgDto)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Organization Tree</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> OrganizationDTO <span class="title function_">getOrganization</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br><span class="line">解释：多余的字段。<span class="keyword">public</span> OrganizationDTO <span class="title function_">getOrganization</span><span class="params">()</span> <span class="keyword">throws</span> Exception;此时<span class="keyword">public</span>为多余的字段，因为interface定义的时候，就是<span class="keyword">public</span>的。需要检查。</span><br><span class="line"><span class="number">3.</span> - Class X should be declared as <span class="keyword">final</span>.</span><br><span class="line">解释：对于单例设计模式，要求返回唯一的类对象。但是HRFactory和ContextFactory为优化的两个类，不需求检查。</span><br><span class="line">其他的单例类，依然需要进行检查。</span><br><span class="line"><span class="number">4.</span> - Method <span class="string">&#x27;addChildrenId&#x27;</span> is not designed <span class="keyword">for</span> extension - needs to be</span><br><span class="line"><span class="keyword">abstract</span>, <span class="keyword">final</span> or empty.</span><br><span class="line">解释：通过父类继承的，此类有点特殊可以忽略此类。</span><br><span class="line"><span class="number">5.</span> Variable <span class="string">&#x27;id&#x27;</span> must be <span class="keyword">private</span> and have accessor methods.解释：BaseHRDTO类，为父类，属性给子类继承，比较特殊。但是其他的类，声名需要加上范围<span class="string">&#x27;private&#x27;</span>关键字。需要检查。</span><br><span class="line"><span class="number">6.</span> -Array brackets at illegal position.解释：代码写法，习惯不一样。需要检查，仅仅提示</span><br></pre></td></tr></table></figure>

<p>其他较好的博客推荐：<br><a target="_blank" rel="noopener" href="http://www.blogjava.net/japper/archive/2012/05/24/379054.html">www.blogjava.net/japper/archive/2012/05/24/379054.html</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/工具的使用/">工具的使用</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/25/Android-进阶之工具的使用Checkstyle/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/25/Android-进阶之工具的使用Checkstyle/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/24/Android-进阶之工具的使用-Lint/" title="Android 进阶之工具的使用 Lint" itemprop="url">Android 进阶之工具的使用 Lint</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-24T12:29:12.000Z" itemprop="datePublished"> Published 2016-06-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Android Lint工具是个静态代码分析工具，它可以在不运行代码和编写测试用例的情况下帮你检查项目代码中的潜在bug以及优化你的代码。</p>
<h4 id="1-Lint-工具的使用："><a href="#1-Lint-工具的使用：" class="headerlink" title="1.Lint 工具的使用："></a>1.Lint 工具的使用：</h4><h6 id="Lint-工具结构："><a href="#Lint-工具结构：" class="headerlink" title="Lint 工具结构："></a>Lint 工具结构：</h6><p>要使用Lint 工具进行检测需要具备如下几个部分元素：<br><img src="/2016/06/24/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Lint/lint.png"></p>
<ul>
<li>应用源代码文件：<br>包括Java文件，XML文件，图标，ProGuard配置文件。</li>
<li>lint.xml文件<br>lint.xml文件是一个配置文件，用于指定你需要执行的lint检测项和自定义问题的严重等级。</li>
<li>lint 工具<br> lint工具是以应用源码以及lint.xml作为输入的一个静态代码扫描工具，它可以通过命令行或者Android Studio IDE工具来启动。它主要检查代码的逻辑结构问题.一般在一个应用发布之前最好使用lint工具对项目代码进行一次检查。</li>
<li>检查结果：<br>lint的最终检查结果会显示在终端或者Android studio 的Event Log上。</li>
</ul>
<h6 id="运行Lint："><a href="#运行Lint：" class="headerlink" title="运行Lint："></a>运行Lint：</h6><p>在Android Studio中可以为某个变异版本运行lint，或者为所有的版本运行lint。只需要在build.gradle中添加如下配置即可：</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">lintOptions &#123;</span><br><span class="line">    // <span class="keyword">set</span> <span class="keyword">to</span> <span class="keyword">true</span> <span class="keyword">to</span> turn <span class="keyword">off</span> analysis progress reporting <span class="keyword">by</span> lint</span><br><span class="line">    quiet <span class="keyword">false</span></span><br><span class="line">    // <span class="keyword">if</span> <span class="keyword">true</span>, stop the gradle build <span class="keyword">if</span> errors are <span class="built_in">found</span></span><br><span class="line">    abortOnError <span class="keyword">false</span></span><br><span class="line">    // <span class="keyword">if</span> <span class="keyword">true</span>, <span class="keyword">only</span> report errors</span><br><span class="line">    ignoreWarnings <span class="keyword">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果要手动运行Lint 可以使用Analyze &gt; Inspect Code.然后选择检测的范围和策略。</p>
<h6 id="使用lint-xml文件配置Lint检查"><a href="#使用lint-xml文件配置Lint检查" class="headerlink" title="使用lint.xml文件配置Lint检查"></a>使用lint.xml文件配置Lint检查</h6><p>我们可以在项目的根目录创建一个lint.xml文件，并在这个文件中指定lint检查选项。<br>lint.xml 文件包含了<lint> 父标签，<lint> 标签下面包含一个或者多个<issue> 元素. 每个 <issue> 使用一个单独的属性值来指定。</issue></issue></lint></lint></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lint</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- list of issues to configure --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">lint</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<issue>项中我们可以禁止某个检查，或者改变某个选项的严重等级。<br>下面是一个例子：</issue></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lint</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Disable the given check in this project --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">&quot;IconMissingDensityFolder&quot;</span> <span class="attr">severity</span>=<span class="string">&quot;ignore&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Ignore the ObsoleteLayoutParam issue in the specified files --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">&quot;ObsoleteLayoutParam&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">&quot;res/layout/activation.xml&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">&quot;res/layout-xlarge/activation.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">issue</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Ignore the UselessLeaf issue in the specified file --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">&quot;UselessLeaf&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">&quot;res/layout/main.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">issue</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Change the severity of hardcoded strings to &quot;error&quot; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">&quot;HardcodedText&quot;</span> <span class="attr">severity</span>=<span class="string">&quot;error&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">lint</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="在Android-Studio-Setting-中配置Lint："><a href="#在Android-Studio-Setting-中配置Lint：" class="headerlink" title="在Android Studio Setting 中配置Lint："></a>在Android Studio Setting 中配置Lint：</h6><p>Lint 会对各个检测项的等级都赋予一个严重级别，我们可以在Android Studio 的 Setting中搜索Inspections选项，在这个页面上你可以对每个检查项设置一个严重等级。在修改检测项级别的时候需要认真看下description，这里描述的是每个检查选项的具体内容。</p>
<h6 id="在Java代码以及XML文件中配置lint检查选项"><a href="#在Java代码以及XML文件中配置lint检查选项" class="headerlink" title="在Java代码以及XML文件中配置lint检查选项"></a>在Java代码以及XML文件中配置lint检查选项</h6><p>除了使用lint.xml以及Android Studio setting对Lint检查进行设定之外，还可以在Java和XML源文件中对Lint检查进行设定。</p>
<p>在Java代码中对Lint进行设置：<br>要禁止对某个指定的Java类或者方法的Lint检查可以在Java代码中添加@SuppressLint注释。</p>
<p>下面的代码会忽略对onCreate方法中的NewApi这个选项的检查,但是其他方法则不会忽略这个选项的检查。</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@SuppressLint</span>(<span class="string">&quot;NewApi&quot;</span>)</span><br><span class="line"><span class="variable">@Override</span></span><br><span class="line">public void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    <span class="selector-tag">super</span><span class="selector-class">.onCreate</span>(savedInstanceState);</span><br><span class="line">    <span class="selector-tag">setContentView</span>(R.layout.main);</span><br></pre></td></tr></table></figure>
<p>下面的例子会忽略FeedProvider类的ParserError项的检查。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">&quot;ParserError&quot;</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">FeedProvider</span> <span class="keyword">extends</span> <span class="title">ContentProvider</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>如果你要忽略所有项的检查可以使用如下的配置：</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SuppressLint(<span class="string">&quot;all&quot;</span>)</span></span><br></pre></td></tr></table></figure>
<p>在XML中配置lint的检查项：</p>
<p>我们可以使用tools:ignore 属性来禁止某个特定属性的检查，为了让这个属性被lint工具识别，必须先添加如下的名称空间：</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> xmlns:tools=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span><br></pre></td></tr></table></figure>
<p>下面的例子展示了如何关闭<LinearLayout> 元素的UnusedResources的检查。这个选项会被它的子元素所继承，它所有的子节点都会忽略这个检查：</LinearLayout></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:ignore</span>=<span class="string">&quot;UnusedResources&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/auto_update_prompt&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要禁止一个或者多个选项可以使用逗号来隔开。</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">tools:</span>ignore=<span class="string">&quot;NewApi,StringFormatInvalid&quot;</span></span><br></pre></td></tr></table></figure>
<p>要禁止所有选项的检查可以i使用如下属性：</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">tools:</span>ignore=<span class="string">&quot;all&quot;</span></span><br></pre></td></tr></table></figure>

<p>深入阅读：<br><a target="_blank" rel="noopener" href="https://testerhome.com/topics/3105">https://testerhome.com/topics/3105</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/工具的使用/">工具的使用</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/24/Android-进阶之工具的使用-Lint/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/24/Android-进阶之工具的使用-Lint/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/23/Android-进阶之工具的使用-LeakCanary/" title="Android 进阶之工具的使用 LeakCanary" itemprop="url">Android 进阶之工具的使用 LeakCanary</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-23T14:27:20.000Z" itemprop="datePublished"> Published 2016-06-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><img src="/2016/06/23/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-LeakCanary/2.png"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/square/leakcanary">GitHub 地址</a></p>
<p>LeakCanary 是用于检测内存泄漏的工具，它相对与MAT十分易用。并且十分直观，它会在通知栏中给出泄漏信息，这些信息可以分享，还可以dump出来。</p>
<h4 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h4><p>那么什么是内存泄漏呢？在之前的内存优化的博客中已经提到过内存泄漏，这里再做下回顾：<br>在Java中每个对象都有自己的有限的生命周期，一超过这个生命周期就会被垃圾回收器标记回收，但是还有一种情况就是它在超过生命周期的时候它的引用还被其他对象引用，这时候它就不能被垃圾回收器正常回收，并腾出空间。就导致了内存泄漏。<br>总之一句话，在应该被回收的时候，却没有被回收就会导致内存泄漏。内存泄漏的结果就是有限的内存被耗尽，最终导致OOM。</p>
<p>那么怎么将LeakCanary呢？下面将会对其一步一步介绍：</p>
<h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><figure class="highlight sml"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">   debugCompile <span class="symbol">&#x27;com</span>.squareup.leakcanary:leakcanary-android:<span class="number">1.4</span>-beta2&#x27;</span><br><span class="line">   releaseCompile <span class="symbol">&#x27;com</span>.squareup.leakcanary:leakcanary-android-no-<span class="keyword">op</span>:<span class="number">1.4</span>-beta2&#x27;</span><br><span class="line">   testCompile <span class="symbol">&#x27;com</span>.squareup.leakcanary:leakcanary-android-no-<span class="keyword">op</span>:<span class="number">1.4</span>-beta2&#x27;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p> 这里有三个依赖分别对应的是debug版本，release版本，测试版本的对应依赖，之所以分成这么多个是因为需要在每个不同的版本表现出不同的行为。</p>
<h4 id="在项目中引入"><a href="#在项目中引入" class="headerlink" title="在项目中引入"></a>在项目中引入</h4><p>创建MyApplication类，在该类中创建getRefWatcher静态方法，通过该静态方法提供LeakCanary.install(this)返回的RefWatcher对象，这个对象用于内存泄漏溢出检测。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span></span>&#123;</span><br><span class="line">    public static <span class="type">RefWatcher</span> getRefWatcher(<span class="type">Context</span> context) &#123;</span><br><span class="line">        <span class="type">MyApplication</span> application = (<span class="type">MyApplication</span>) context</span><br><span class="line">                .getApplicationContext();</span><br><span class="line">        <span class="keyword">return</span> application.refWatcher;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">RefWatcher</span> refWatcher;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        refWatcher = <span class="type">LeakCanary</span>.install(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将MyApplication设置为当前应用。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.idealist.testleakcandy&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">&quot;.MyApplication&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/AppTheme&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击按钮的时候启动AsyncTask，在AsyncTask中睡眠20秒，由于AsyncTask持有外部类MainActivity的引用所以当按钮按下的时候，如果转屏就会发生内存溢出。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.<span class="property">OnClickListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Button</span> mButton;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="title function_">onCreate</span>(<span class="params">Bundle savedInstanceState</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">onCreate</span>(savedInstanceState);</span><br><span class="line">        <span class="title function_">setContentView</span>(R.<span class="property">layout</span>.<span class="property">activity_main</span>);</span><br><span class="line">        <span class="title class_">RefWatcher</span> refWatcher = <span class="title class_">MyApplication</span>.<span class="title function_">getRefWatcher</span>(<span class="variable language_">this</span>);</span><br><span class="line">        refWatcher.<span class="title function_">watch</span>(<span class="variable language_">this</span>);</span><br><span class="line">        mButton = (<span class="title class_">Button</span>) <span class="title function_">findViewById</span>(R.<span class="property">id</span>.<span class="property">buttons</span>);</span><br><span class="line">        mButton.<span class="title function_">setOnClickListener</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">onClick</span>(<span class="params">View v</span>) &#123;</span><br><span class="line">        <span class="title function_">startAsyncTask</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">void</span> <span class="title function_">startAsyncTask</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AsyncTask</span>&lt;<span class="title class_">Void</span>, <span class="title class_">Void</span>, <span class="title class_">Void</span>&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="title class_">Void</span> <span class="title function_">doInBackground</span>(<span class="params">Void... params</span>) &#123;</span><br><span class="line">                <span class="title class_">SystemClock</span>.<span class="title function_">sleep</span>(<span class="number">20000</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.<span class="title function_">execute</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下：<br><img src="/2016/06/23/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-LeakCanary/1.png"></p>
<p>较好的博客：<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/watermusicyes/article/details/46333925">http://blog.csdn.net/watermusicyes/article/details/46333925</a><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/0049e9b344b0">http://www.jianshu.com/p/0049e9b344b0</a><br><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/RvURJv">http://www.tuicool.com/articles/RvURJv</a>
    </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android质量管理工具/">Android质量管理工具</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/23/Android-进阶之工具的使用-LeakCanary/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/23/Android-进阶之工具的使用-LeakCanary/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/22/Android-进阶之工具的使用-Findbugs/" title="Android 进阶之工具的使用 Findbugs" itemprop="url">Android 进阶之工具的使用 Findbugs</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-22T15:07:20.000Z" itemprop="datePublished"> Published 2016-06-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>相对于早期Android开发目前有很多的技术以及工具用于提高代码的质量其中就包含有静态代码分析技术，我们之前介绍过的Lint也是属于这类静态代码分析工具，它不仅能够找到Java代码层次的问题，还可帮你找到布局等XML文件中的问题，在工作中我们每次开发出一个新特性并释放版本的时候就有一个硬性的指标每个类型的Lint问题必须达到什么范围才能申请释放版本。<br>除了Lint我们今天将要介绍一款静态代码分析工具FindBugs，从字面意思很容易看出它的用处就是通过静态代码分析找出潜在的Bug。这个工具十分好用，我自己在开发中也在使用这个工具，并且可以减少很多因为一时疏忽倒置的bug。<br><img src="/2016/06/22/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Findbugs/6.png"><br><a target="_blank" rel="noopener" href="http://findbugs.sourceforge.net/">官方网址</a></p>
<p><a target="_blank" rel="noopener" href="https://plugins.jetbrains.com/plugin/3847?pr=idea">FindBugs Intellij 插件下载地址 </a></p>
<p><a target="_blank" rel="noopener" href="https://gradle.org/docs/current/userguide/findbugs_plugin.html">Gradle FindBugs 插件使用说明 </a></p>
<h4 id="在Android-Studio中安装FindBug："><a href="#在Android-Studio中安装FindBug：" class="headerlink" title="在Android Studio中安装FindBug："></a>在Android Studio中安装FindBug：</h4><p>FindBug在Android Studio中的安装方式和AS的其他插件一样就是到插件库里面搜索Findbug.点击Install，安装结束后重启一次AS即可。<br><img src="/2016/06/22/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Findbugs/1.png"><br>安装完就会在AS的底部多出一个选项卡如下所示：<br><img src="/2016/06/22/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Findbugs/2.png"><br>其中最左边的按钮有三大类，一类是FindBug寻找问题的范围，一类是查找完问题后显示问题的形式，这两个都可以分成文件级，类级别，包级别，模块级别，项目级别。还有一类是常用工具类以及导出结果的工具。</p>
<p>要启动FindBug可以通过上面面板的第一类按钮，或者通过右键弹出的菜单中找到FindBug选项。</p>
<p>下面是为了介绍FindBug的使用做出的一个简单的Bug。<br>通过FindBug就可以找到这个Bug并按照如下的形式显示出来：<br><img src="/2016/06/22/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Findbugs/5.png"></p>
<h4 id="Android-添加过滤"><a href="#Android-添加过滤" class="headerlink" title="Android 添加过滤"></a>Android 添加过滤</h4><p>如果我们在没有进行任何过滤的情况下找到的结果可能会令人失望，它会把自动生成的代码也考虑在内。因此我们在进行Bug查找的时候首先需要添加过滤。<br>下面是过滤掉Android自动生成的代码的配置：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FindBugsFilter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Match</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ignore all issues in resource generation --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Class</span> <span class="attr">name</span>=<span class="string">&quot;~.*\.R\$.*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Match</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Class</span> <span class="attr">name</span>=<span class="string">&quot;~.*\.Manifest\$.*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FindBugsFilter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>另一个需要过滤的可能就是你测试用例的警告，可以使用如下方式进行过滤</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ignore all bugs in test classes, except for those bugs specifically relating to JUnit tests --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Class</span> <span class="attr">name</span>=<span class="string">&quot;~.*\.*Test&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- test classes are suffixed by &#x27;Test&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Not</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Bug</span> <span class="attr">code</span>=<span class="string">&quot;IJU&quot;</span> /&gt;</span> <span class="comment">&lt;!-- &#x27;IJU&#x27; is the code for bugs related to JUnit test code --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Not</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在编写完这些过滤条件就可以在Android Studio中的(File &gt; Settings-&gt;FindBugs-IDEA. -&gt; filter选项卡中添加，下面是对应的页面：</p>
</blockquote>
<p><img src="/2016/06/22/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Findbugs/7.png"></p>
<p>我们还可以自动化运行FindBug静态代码分析，只要将如下的任务写到项目的gradle.build中：</p>
<figure class="highlight isbl"><table><tr><td class="code"><pre><span class="line"><span class="variable">apply</span> <span class="variable">plugin</span>: <span class="string">&#x27;findbugs&#x27;</span></span><br><span class="line"><span class="variable">task</span> <span class="function"><span class="title">findbugs</span>(<span class="variable">type</span>: <span class="variable">FindBugs</span>) &#123;</span></span><br><span class="line"><span class="function">    <span class="variable">ignoreFailures</span> = <span class="variable"><span class="literal">false</span></span></span></span><br><span class="line"><span class="function">    <span class="variable">effort</span> = <span class="string">&quot;default&quot;</span></span></span><br><span class="line"><span class="function">    <span class="variable">reportLevel</span> = <span class="string">&quot;medium&quot;</span></span></span><br><span class="line"><span class="function">    <span class="variable">excludeFilter</span> = <span class="variable">new</span> <span class="title">File</span>(<span class="string">&quot;$&#123;project.rootDir&#125;/findbugs/findbugs-filter.xml&quot;</span>)</span></span><br><span class="line">    <span class="variable">classes</span> = <span class="function"><span class="title">files</span>(<span class="string">&quot;$&#123;project.rootDir&#125;/app/build/intermediates/classes&quot;</span>)</span></span><br><span class="line">    <span class="variable">source</span> = <span class="function"><span class="title">fileTree</span>(<span class="string">&#x27;src/main/java/&#x27;</span>)</span></span><br><span class="line">    <span class="variable">classpath</span> = <span class="function"><span class="title">files</span>()</span></span><br><span class="line">    <span class="variable"><span class="class">reports</span></span> &#123;</span><br><span class="line">        <span class="variable">xml.enabled</span> = <span class="variable"><span class="literal">true</span></span></span><br><span class="line">        <span class="variable">html.enabled</span> = <span class="variable"><span class="literal">true</span></span></span><br><span class="line">        <span class="variable">xml</span> &#123;</span><br><span class="line">            <span class="variable">destination</span> <span class="string">&quot;$project.buildDir/findbugs/findbugs-output.xml&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">html</span> &#123;</span><br><span class="line">            <span class="variable">destination</span> <span class="string">&quot;$project.buildDir/findbugs/findbugs-output.html&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体的配置可以查看<a target="_blank" rel="noopener" href="https://gradle.org/docs/current/dsl/org.gradle.api.plugins.quality.FindBugs.html%E3%80%82">https://gradle.org/docs/current/dsl/org.gradle.api.plugins.quality.FindBugs.html。</a></p>
<h4 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h4><p>在结果的展示方面FindBug和Lint做的都不错，能够做到很详细得罗列出具体的原因，一般一看就明白很清晰，实在看不明白点击下每个项，从代码中也可以推测出具体的意思，这里就不展开介绍了。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android质量管理工具/">Android质量管理工具</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/22/Android-进阶之工具的使用-Findbugs/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/22/Android-进阶之工具的使用-Findbugs/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/21/Android-进阶之工具的使用-Crashlytics/" title="Android 进阶之Android开发中的质量跟踪工具" itemprop="url">Android 进阶之Android开发中的质量跟踪工具</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-21T14:31:11.000Z" itemprop="datePublished"> Published 2016-06-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Bugly 网易云捕 Crashlytic 是目前比较流行的崩溃异常的收集工具，能够及时地跟踪我们发布出去的Apk的质量并有专门的统计功能，能够让我们运筹帷幄之中，发现Bug于千里之外。借来将介绍怎么将Bugly，网易云捕这两款产品应用到我们项目中。<br>在这里我们都只介绍自动导入的方式，如果要手动导入可以到官网查看对应的信息，这个没什么技术含量，一看就会，之所以在这里介绍第一是为了整个知识体系的完整性，其二是为了避免每次都查阅官网耗费时间。</p>
<p>在介绍网易云捕和Bugly之前先贴一个别人关于当前代码质量管理工具对比的文章以便让大家对这些工具有个初步的了解：<br><a target="_blank" rel="noopener" href="http://wwww.blog.csdn.net/zhuobattle/article/details/50848745">移动平台质量跟踪系统对比-crashlytics、网易云捕、友盟、bugly</a></p>
<h3 id="网易云捕"><a href="#网易云捕" class="headerlink" title="网易云捕"></a>网易云捕</h3><p><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/13.png"><br><a href="crash.163.com">官方地址</a><br>一. 库文件导入<br>方式一：自动导入（推荐）</p>
<p>在Module的build.gradle文件中添加依赖和属性配置：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">   defaultConfig &#123;</span><br><span class="line">       ndk &#123;</span><br><span class="line">           <span class="regexp">//</span>设置支持的SO库架构</span><br><span class="line">           abiFilters <span class="string">&quot;armeabi&quot;</span> <span class="regexp">//</span>,<span class="string">&quot;armeabi-v7a&quot;</span>, <span class="string">&quot;x86&quot;</span>,<span class="string">&quot;arm64-v8a&quot;</span>,<span class="string">&quot;x86_64&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">&#x27;com.netease.nis.plugin:bugrpt:latest.release&#x27;</span>  <span class="regexp">//</span>集成最新版本，也可以指定版本号，比如<span class="number">3.6</span>.<span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：自动集成时会自动包含Bugrpt SO库，建议在Module的build.gradle文件中使用NDK的“abiFilter”配置，设置支持的SO库架构。<br>如果在添加“abiFilter”之后Android Studio出现以下提示：</p>
<blockquote>
<p>NDK integration is deprecated in the current plugin. Consider trying the new experimental plugin.<br>则在项目根目录的gradle.properties文件中添加：</p>
</blockquote>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">android.useDeprecatedNdk</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>二. 权限信息配置</p>
<p>需要在AndroidManifest.xml中添加以下权限：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_PHONE_STATE&quot;</span>/&gt;</span><span class="comment">&lt;!-- 获取设备信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span><span class="comment">&lt;!-- 网络通信--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span><span class="comment">&lt;!-- 获取网络状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span>/&gt;</span><span class="comment">&lt;!-- 获取MAC地址--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_LOGS&quot;</span> /&gt;</span><span class="comment">&lt;!-- 获取日志--&gt;</span></span><br></pre></td></tr></table></figure>
<p>在Android M系统以后，android.permission.READ_PHONE_STATE被设定为敏感权限，如果AndroidManifest.xml文件中targetSdkVersion被设置为23以上，且代码中没有请求过该权限，可能导致获取的imei、deviceID等设备信息为空，但是对程序的稳定性并没有影响。</p>
<p>三. AppID配置<br>还需在AndroidManifest.xml的application中添加<meta-data>标签，其中android:value填写您APP的AppID值，可以在”用户中心“-”设置“-”产品信息“中获取。<br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/14.png"></meta-data></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;BUGRPT_APPID&quot;</span>  <span class="attr">android:value</span>=<span class="string">&quot;Please input your Appid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>四. 简单的初始化调用</p>
<p>在项目Application类或者主Activity类的onCreate()方法中添加以下代码：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>init(get<span class="constructor">ApplicationContext()</span>);</span><br></pre></td></tr></table></figure>
<p>如果Java层或NDK代码发生异常时，bugrpt便会捕获到该异常并发送给服务器。</p>
<p>六. 简单例子</p>
<ul>
<li>Java 例子：</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">protected void on<span class="constructor">Create(Bundle <span class="params">savedInstanceState</span>)</span> &#123;  </span><br><span class="line">    super.on<span class="constructor">Create(<span class="params">savedInstanceState</span>)</span>;</span><br><span class="line">    <span class="comment">//1.初始化云捕sdk</span></span><br><span class="line">    com.netease.nis.bugrpt.<span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>get<span class="constructor">Instance()</span>.init(this.get<span class="constructor">ApplicationContext()</span>,null);</span><br><span class="line"></span><br><span class="line">    set<span class="constructor">ContentView(R.<span class="params">layout</span>.<span class="params">activity_main</span>)</span>;   </span><br><span class="line">    btn_crash = (Button)find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">btn_crash</span>)</span>;</span><br><span class="line">    btn_crash.set<span class="constructor">OnClickListener(<span class="params">new</span> OnClickListener()</span> &#123; </span><br><span class="line">        @Override</span><br><span class="line">        public void on<span class="constructor">Click(View <span class="params">v</span>)</span> &#123;</span><br><span class="line">            <span class="comment">//2.测试异常代码</span></span><br><span class="line">            throw <span class="keyword">new</span> <span class="constructor">RuntimeException(<span class="string">&quot;This is a crash!&quot;</span>)</span>;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>NDK 例子<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">   <span class="comment">//导入demo.so</span></span><br><span class="line">　　<span class="title class_">System</span>.<span class="title function_">loadLibrary</span>(<span class="string">&quot;demo&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> native <span class="built_in">void</span> <span class="title function_">msg</span>(<span class="title class_">String</span> s);</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="built_in">void</span> <span class="title function_">onCreate</span>(<span class="params">Bundle savedInstanceState</span>) &#123;  </span><br><span class="line">   <span class="variable language_">super</span>.<span class="title function_">onCreate</span>(savedInstanceState);</span><br><span class="line">   <span class="comment">//1.初始化云捕sdk</span></span><br><span class="line">   com.<span class="property">netease</span>.<span class="property">nis</span>.<span class="property">bugrpt</span>.<span class="property">CrashHandler</span>.<span class="title function_">getInstance</span>().<span class="title function_">init</span>(<span class="variable language_">this</span>.<span class="title function_">getApplicationContext</span>(),<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">   btn_crash.<span class="title function_">setOnClickListener</span>(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">　     　<span class="meta">@Override</span></span><br><span class="line">　     　<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">onClick</span>(<span class="params">View v</span>) &#123;</span><br><span class="line">             <span class="comment">//2.调用ndk层msg函数</span></span><br><span class="line">　　　        　<span class="title function_">msg</span>(<span class="string">&quot;hellondk&quot;</span>);</span><br><span class="line">　     　&#125;</span><br><span class="line">   &#125;);    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
而msg函数则是打印一个字符串最后触发了一个异常，C++实现代码如下：<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">JNIEXPORT <span class="type">void</span> <span class="title">msg</span><span class="params">(JNIEnv *env, jobject  clazz, jstring str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> *pszstr = <span class="literal">NULL</span>; </span><br><span class="line">    pszstr = <span class="built_in">jstringTostring</span>(env, str);</span><br><span class="line">    <span class="built_in">LOGI</span>(<span class="string">&quot;%s&quot;</span>, pszstr);</span><br><span class="line">    <span class="built_in">free</span>(pszstr);</span><br><span class="line">　　<span class="comment">//以下是触发异常的代码</span></span><br><span class="line">    pszstr = <span class="literal">NULL</span>;</span><br><span class="line">    *pszstr = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
可以尝试生成APK之后，点击按钮触发模拟异常，后台便能查询到如下崩溃日志：</li>
</ul>
<p>崩溃日志内容：</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> NATIVE CRASH LOG BY BUGRPT- <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span></span><br><span class="line">CRASH TIME: 1425530709912</span><br><span class="line">CRASH APP: com.example.crash, pid: 12916, tid: 12916</span><br><span class="line">Build fingerprint: &#x27;Meizu/meizu_mx3/mx3<span class="function">:4.4.4</span>/KTU84P/m35x.Flyme_OS_3.7.3.20140909113158<span class="function">:user</span>/release-keys&#x27;</span><br><span class="line">signal 11 <span class="params">(SIGSEGV)</span>, code 1 <span class="params">(SEGV_MAPERR)</span>, fault addr 00000000</span><br><span class="line"><span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span></span><br><span class="line">registers:</span><br><span class="line"> r0 00000000  r1 00000000  r2 00000001  r3 00000000</span><br><span class="line"> r4 774a1458  r5 415ab438  r6 00000000  r7 6d460dd0</span><br><span class="line"> r8 beb81508  r9 6d460dc8  10 415ab448  fp beb8151c</span><br><span class="line"> ip 00000001  sp beb81500  lr 40047ce1  pc 7528edf2  cpsr 60070030</span><br><span class="line"><span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span></span><br><span class="line">callstacks:</span><br><span class="line">         <span class="comment">#00  pc 00000df2  /data/app-lib/com.example.crash-2/libdemo.so (msg + 21)</span></span><br><span class="line">         <span class="comment">#01  pc 0001db8c  /system/lib/libdvm.so (dvmPlatformInvoke + 70)</span></span><br><span class="line">         <span class="comment">#02  pc 0004e174  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread + 18f)</span></span><br><span class="line">         <span class="comment">#03  pc 00026fa0  /system/lib/libdvm.so</span></span><br><span class="line">         <span class="comment">#04  pc 0002dfb8  /system/lib/libdvm.so (_Z11dvmMterpStdP6Thread + 4c)</span></span><br><span class="line">         <span class="comment">#05  pc 0002b61c  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue + b8)</span></span><br><span class="line">         <span class="comment">#06  pc 0006087a  /system/lib/libdvm.so (_Z15dvmInvokeMethodP6ObjectPK6MethodP11ArrayObjectS5_P11ClassObjectb + 189)</span></span><br><span class="line">         <span class="comment">#07  pc 00068896  /system/lib/libdvm.so</span></span><br><span class="line">         <span class="comment">#08  pc 00026fa0  /system/lib/libdvm.so</span></span><br><span class="line">         <span class="comment">#09  pc 0002dfb8  /system/lib/libdvm.so (_Z11dvmMterpStdP6Thread + 4c)</span></span><br><span class="line">         <span class="comment">#10  pc 0002b61c  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue + b8)</span></span><br><span class="line">         <span class="comment">#11  pc 00060596  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list + 151)</span></span><br><span class="line">         <span class="comment">#12  pc 00049d5a  /system/lib/libdvm.so</span></span><br><span class="line">         <span class="comment">#13  pc 0004dec2  /system/lib/libandroid_runtime.so</span></span><br><span class="line">         <span class="comment">#14  pc 0004ebe6  /system/lib/libandroid_runtime.so (_ZN7android14AndroidRuntime5startEPKcS2_ + 161)</span></span><br><span class="line">         <span class="comment">#15  pc 4001a090  /system/bin/app_process</span></span><br><span class="line">         <span class="comment">#16  pc 0000e41e  /system/lib/libc.so (__libc_init + 31)</span></span><br><span class="line"><span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span> <span class="params">---</span></span><br></pre></td></tr></table></figure>
<p>可以很清晰地看出崩溃发生在msg函数的某个偏移，pc为00000df2，可以通过addr2line很方便地转换为出错的代码行号。<br>addr2line -C -f -e libxxx.so 00000df2</p>
<p>五. Proguard混淆配置<br>避免混淆Bugrpt SDK，请在Proguard混淆文件中配置：</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">-keep <span class="keyword">class</span> <span class="title class_">com</span>.netease.nis.bugrpt.** &#123;*;&#125;</span><br></pre></td></tr></table></figure>

<p>六. 配置mapping</p>
<p>生成APK的时候一般都需要进行混淆处理，此时崩溃发生时产生的崩溃堆栈信息都是混淆后的符号，不便于排查BUG。为了能正确地还原回源码时的堆栈，需要配置一下mapping.txt文件，让“云捕”自动化进行反混淆处理。<br>混淆处理时，利用proguard在混淆后会生成一个mapping.txt文件，该文件地址Android Studio则是根据配置生成在指定目录下。</p>
<p>Android Studio:<br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/15.png"><br>只需要把这个mapping.txt文件上传到后台即可。登录云捕系统，选择您的APP后点击“上传mapping“</p>
<p>七.高级设置：<br>我们提供UserStrategy类作为Bugrpt的初始化扩展，开发者可以传入一些自定义信息。通过以下方式传入：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">Context appCtx = this.get<span class="constructor">ApplicationContext()</span>;</span><br><span class="line">UserStrategy strategy = <span class="keyword">new</span> <span class="constructor">UserStrategy(<span class="params">appCtx</span>)</span>;</span><br><span class="line"><span class="comment">//...在这里设置strategy的属性，在bugrpt初始化时传入</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>init(appCtx, strategy);</span><br></pre></td></tr></table></figure>
<p>UserStrategy与CrashHandler类的主要API：</p>
<ul>
<li><p>设置渠道：<br>Bugrpt默认读取AndroidManifest.xml文件中渠道信息,可通过该接口修改渠道信息。</p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">strategy.setChannel(<span class="string">&quot;myChannel&quot;</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure></li>
<li><p>设置用户账户：<br>Bugrpt可以设置用户的账户信息，方便开发者针对性排错。</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">strategy.<span class="built_in">set</span>UserId(<span class="string">&quot;myUserID&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>设置场景：<br>Bugrpt可以设置崩溃场景。</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>set<span class="constructor">UserScene(<span class="string">&quot;myScene&quot;</span>)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>设置自定义Map参数对：<br>Bugrpt支持用户自定义Map参数可以保存发生Crash时的一些自定义的环境信息。在发生Crash时会随着异常信息一起上报并在页面展示。</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>add<span class="constructor">UserParam(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>注意：最多可以有9对自定义的key-value（超过则添加失败），key限长50字节、value限长200字节，过长截断。</p>
</li>
<li><p>主动上报开发者catched的异常<br>开发者可能会关注到某个重要异常的catch情况，我们提供了这样的接口：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;catch (Exception e)&#123;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>upload<span class="constructor">CatchedException(<span class="params">e</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>开发者主动上传信息接口<br>为了方便开发者跟踪代码的执行情况，通过主动上传信息接口获取当前程序执行的一些信息（开发者记录的信息+堆栈信息）。使用示例：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>upload<span class="constructor">TrackRecord(<span class="string">&quot;myTrackLog&quot;</span>)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>开发者记录面包屑接口<br>开发者通过面包屑功能，追踪程序执行的路径信息，这些信息在App Crash的时候一并上传。使用示例：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashHandler</span>.</span></span>leave<span class="constructor">Breadcrumb(<span class="string">&quot;track message&quot;</span>)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ReLinker.loadLibrary接口<br>为了防止Android系统本身的安装逻辑bug导致的java.lang.UnsatisfiedLinkError致命错误，集成了Relinker类的loadLibrary接口，用来替代System.loadLibrary接口。使用说明：<br>在原本使用System.loadLibrary调用处</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>load<span class="constructor">Library(<span class="string">&quot;mylib&quot;</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>替换为Relinker.loadLibrary</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">ReLinker</span>.</span></span>load<span class="constructor">Library(<span class="params">this</span>.<span class="params">getApplicationContext</span>()</span>,<span class="string">&quot;mylib&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/16.png"><br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/17.png"><br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/18.png"><br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/19.png"><br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/20.png"><br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/21.png"></p>
</li>
</ul>
<p>网易除了推出了云捕外还推出了云加密，下面是对应的链接：<br><a target="_blank" rel="noopener" href="http://apk.aq.163.com/#apkpack/help">网易云加密</a></p>
<h3 id="Bugly"><a href="#Bugly" class="headerlink" title="Bugly"></a>Bugly</h3><p><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/22.png"></p>
<p><a target="_blank" rel="noopener" href="https://bugly.qq.com/">官方地址</a><br>Bugly 相对功能会比网易云捕的功能强大些，但是就基本Crash跟踪的话和网易云捕使用方法类似。下面是Bugly的四大核心功能，个人偏向推荐使用这个平台。<br><img src="/2016/06/21/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8-Crashlytics/23.png"></p>
<p>一. 库文件导入</p>
<p>如果您使用Gradle编译Apk，我们强烈推荐您使用自动接入方式配置库文件。Bugly支持JCenter仓库和 Maven仓库。<br>方式1：自动导入（推荐）<br>为了实现更加灵活的配置，Bugly SDK（2.1.5及以上版本）和NDK（SO库）目前已经分开成两个独立的仓库：</p>
<figure class="highlight elm"><table><tr><td class="code"><pre><span class="line"><span class="type">SDK</span>：com.tencent.bugly:crashre<span class="keyword">port</span></span><br><span class="line"><span class="type">NDK</span>：com.tencent.bugly:nativecrashre<span class="keyword">port</span></span><br></pre></td></tr></table></figure>
<p>其中，集成Bugly NDK时，需要同时集成Bugly SDK。<br>单独集成Bugly SDK<br>在Module的build.gradle文件中添加依赖和属性配置：</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span> <span class="string">&#x27;com.tencent.bugly:crashreport:latest.release&#x27;</span> <span class="comment">//其中latest.release指代最新版本号，也可以指定明确的版本号，例如2.1.5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时集成Bugly SDK和NDK<br>在Module的build.gradle文件中添加依赖和属性配置：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">   defaultConfig &#123;</span><br><span class="line">        ndk &#123;</span><br><span class="line">            <span class="regexp">//</span> 设置支持的SO库架构</span><br><span class="line">            abiFilters <span class="string">&#x27;armeabi&#x27;</span> <span class="regexp">//</span>, <span class="string">&#x27;x86&#x27;</span>, <span class="string">&#x27;armeabi-v7a&#x27;</span>, <span class="string">&#x27;x86_64&#x27;</span>, <span class="string">&#x27;arm64-v8a&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">&#x27;com.tencent.bugly:crashreport:latest.release&#x27;</span> <span class="regexp">//</span>其中latest.release指代最新版本号，也可以指定明确的版本号，例如<span class="number">2.1</span>.<span class="number">5</span></span><br><span class="line">    compile <span class="string">&#x27;com.tencent.bugly:nativecrashreport:latest.release&#x27;</span> <span class="regexp">//</span>其中latest.release指代最新版本号，也可以指定明确的版本号，例如<span class="number">2.2</span>.<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：自动集成时会自动包含Bugly SO库，建议在Module的build.gradle文件中使用NDK的“abiFilter”配置，设置支持的SO库架构。<br>如果在添加“abiFilter”之后Android Studio出现以下提示：</p>
<blockquote>
<p>NDK integration is deprecated in the current plugin. Consider trying the new experimental plugin.</p>
</blockquote>
<p>则在项目根目录的gradle.properties文件中添加：</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">android.useDeprecatedNdk</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>为了使APP Crash堆栈的可读性更高，建议您配置符号表文件，更准确地定位问题：<br>纯Java代码的工程：只需要配置混淆后生成的Mapping文件即可；<br>含有Native代码的工程：建议配置符号表工具从Debug SO中提取的Symbol符号表文件。</p>
<p>Bugly支持手动和自动配置两种方式，具体的配置方法请参考如下：</p>
<p>二. Bugly Android符号表配置</p>
<ul>
<li>什么是符号表？</li>
</ul>
<blockquote>
<p>符号表是内存地址与函数名、文件名、行号的映射表。符号表元素如下所示：<br>&lt;起始地址&gt; &lt;结束地址&gt; &lt;函数&gt; [&lt;文件名: 行号&gt;]</p>
</blockquote>
<ul>
<li><p>为什么要配置符号表<br>为了能快速并准确地定位用户APP发生Crash的代码位置，Bugly使用符号表对APP发生Crash的程序堆栈进行解析和还原。</p>
</li>
<li><p>自动配置：使用Android Studio插件</p>
</li>
</ul>
<p>Bugly插件最新版本为：1.3.9，注意插件位于JCenter仓库。<br>在项目的buid.gradle文件的dependencies（buildscript部分）中添加：</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">classpath</span> &#x27;com.tencent.bugly:symtabfileuploader:<span class="number">1</span>.<span class="number">3</span>.<span class="number">9</span>&#x27;</span><br></pre></td></tr></table></figure>
<p>其中1.3.9为插件版本号<br>在module的buid.gradle文件的顶部添加：</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">apply</span> plugin: <span class="string">&#x27;bugly&#x27;</span></span><br><span class="line">bugly &#123;</span><br><span class="line">    <span class="attribute">appId</span> = <span class="string">&#x27;&lt;App ID&gt;&#x27;</span></span><br><span class="line">    appKey = <span class="string">&#x27;&lt;App Key&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了appId和appKey之外，还可以设置其他属性，属性列表如下：<br>属性 	值 	说明<br>appId 	String 	App ID<br>appKey 	String 	App Key<br>execute 	boolean 	插件开关<br>upload 	boolean 	上传开关<br>outputDir 	String 	符号表文件输出路径</p>
<p><Project>&#x2F;build.gradle文件如下：</Project></p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">dependencies</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">classpath</span> <span class="string">&#x27;com.tencent.bugly:symtabfileuploader:1.3.9&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>其中”1.3.9”为Bugly插件版本号，更新插件只需要修改这个版本号并Rebuild一下工程即可。</p>
<p><Project>&#x2F;<Module>&#x2F;build.gradle文件如下：</Module></Project></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">apply</span> plugin: <span class="string">&#x27;bugly&#x27;</span></span><br><span class="line">...</span><br><span class="line">bugly &#123; </span><br><span class="line">    <span class="attribute">appId</span> = <span class="string">&#x27;900000000&#x27;</span></span><br><span class="line">    appKey = <span class="string">&#x27;abcdefghijklmn&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>项目应用了Bugly插件之后，Gradle会新建出一个“uploadReleaseSymtabFile”的任务，该任 务被“assembleRelease”任务依赖，即在Release编译时执行。</p>
<p>uploadReleaseSymtabFile任务将执行以下动作：<br>当项目使用了Proguard，将自动上传生成的mapping文件；<br>当项目使用了NDK，将自动扫描Debug SO文件，生成符号表文件（zip）并自动上传。<br>其中查找Debug SO文件时，首先会扫描默认的NDK路径，如果未找到，将继续扫描 项目路径。</p>
<p>三、参数配置</p>
<p>在AndroidManifest.xml中添加权限：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_PHONE_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_LOGS&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>请避免混淆Bugly，在Proguard混淆文件中增加一行配置：</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">-dontwarn com.tencent.bugly.**</span><br><span class="line">-keep <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">com</span>.tencent.bugly.**&#123;*;&#125;</span><br></pre></td></tr></table></figure>
<p>四、最简单的初始化</p>
<p>获取APP ID并将以下代码复制到项目Application类onCreate()中，Bugly会为自动检测环境并完成配置：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashReport</span>.</span></span>init<span class="constructor">CrashReport(<span class="params">getApplicationContext</span>()</span>, <span class="string">&quot;注册时申请的APPID&quot;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>为了保证运营数据的准确性，建议不要在异步线程初始化Bugly。</p>
<p>第三个参数为SDK调试模式开关，调试模式的行为特性如下：</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">● 输出详细的Bugly SDK的<span class="built_in">Log</span>；</span><br><span class="line">● 每一条Crash都会被立即上报；</span><br><span class="line">● 自定义日志将会在Logcat中输出。</span><br></pre></td></tr></table></figure>
<p>建议在测试阶段建议设置成true，发布时设置为false。<br> 此外，Bugly2.0及以上版本还支持通过“AndroidManifest.xml”来配置APP信息。如果同时又通过代码中配置了APP信息，则最终以代码配置的信息为准。</p>
<p>在“AndroidManifest.xml”的“Application”中增加“metadata”配置项：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">application</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	&lt;!<span class="attr">--</span> 配置<span class="attr">APP</span> <span class="attr">ID</span> <span class="attr">--</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">meta-data</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:name</span>=<span class="string">&quot;BUGLY_APPID&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:value</span>=<span class="string">&quot;&lt;APP ID&gt;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="comment">&lt;!-- 配置APP版本号 --&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">meta-data</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:name</span>=<span class="string">&quot;BUGLY_APP_VERSION&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:value</span>=<span class="string">&quot;&lt;APP Version&gt;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="comment">&lt;!-- 配置APP渠道号 --&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">meta-data</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:name</span>=<span class="string">&quot;BUGLY_APP_CHANNEL&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:value</span>=<span class="string">&quot;&lt;APP Channel&gt;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="comment">&lt;!-- 配置Bugly调试模式（true或者false）--&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">meta-data</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:name</span>=<span class="string">&quot;BUGLY_ENABLE_DEBUG&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	<span class="attr">android:value</span>=<span class="string">&quot;&lt;isDebug&gt;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>不同于“android:versionName”，“BUGLY_APP_VERSION”配置的是Bugly平台的APP版本号。</p>
<p>通过“AndroidManifest.xml”配置后的初始化方法如下：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">CrashReport</span>.</span></span>init<span class="constructor">CrashReport(<span class="params">getApplicationContext</span>()</span>);</span><br></pre></td></tr></table></figure>
<p>同样 Bugly也提供了UserStrage功能，也就是从功能上看网易云盘有的功能Bugly都有，而Buyly还具备一些网易云盘没有的特色功能如ANR等。<br>要进一步了解这些功能可以查看如下链接：</p>
<p><a target="_blank" rel="noopener" href="https://bugly.qq.com/androidmore">https://bugly.qq.com/androidmore</a><br><a target="_blank" rel="noopener" href="https://bugly.qq.com/document">https://bugly.qq.com/document</a><br><a target="_blank" rel="noopener" href="https://bugly.qq.com/betaDocument">https://bugly.qq.com/betaDocument</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android质量管理工具/">Android质量管理工具</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/21/Android-进阶之工具的使用-Crashlytics/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/21/Android-进阶之工具的使用-Crashlytics/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/20/Android-进阶之第三方库的介绍-RxJava-RxAndroid-七/" title="Android 进阶之第三方库的介绍 RxJava &amp;&amp; RxAndroid 七 [学习RxJava必备的文章]" itemprop="url">Android 进阶之第三方库的介绍 RxJava &amp;&amp; RxAndroid 七 [学习RxJava必备的文章]</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-06-20T10:27:20.000Z" itemprop="datePublished"> Published 2016-06-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在开始推荐之前先给大家一个建议，编程是一个实践性很强的技术，不要关看这些资料还得多动手实践：<br>同时记住几句话摘自RxJava Essentials一书的结尾：</p>
<blockquote>
<p>Remember that Observable sequences act like rivers: they flow. You can filter a river, you can transform a river, you can combine two rivers into one, and it will still flow. In the end, it will be the river you want it to be.</p>
</blockquote>
<p>两本书：<br><img src="/2016/06/20/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-RxJava-RxAndroid-%E4%B8%83/1.png"><br><img src="/2016/06/20/Android-%E8%BF%9B%E9%98%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BB%8B%E7%BB%8D-RxJava-RxAndroid-%E4%B8%83/2.png"></p>
<p><a target="_blank" rel="noopener" href="http://gank.io/post/560e15be2dca930e00da1083">给 Android 开发者的 RxJava 详解</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/lzyzsd/article/details/41833541">深入浅出RxJava</a><br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators.html">RxJava官网</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/lzyzsd/article/details/41833541">RxWeekend——RxJava周末狂欢</a><br><a href="mushuichuan.com/2015/12/11/rxjava-operator-1/">RxJava操作符</a><br><a target="_blank" rel="noopener" href="http://futurice.com/blog/top-7-tips-for-rxjava-on-android">Top 7 tips for Rxjava on Android</a><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/943ceaccfdff">Architecting Android with RxJava</a><br>来自Github的资源：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/kaushikgopal/RxJava-Android-Samples">https://github.com/kaushikgopal/RxJava-Android-Samples</a><br><a target="_blank" rel="noopener" href="https://github.com/cn-ljb/rxjava_for_android">https://github.com/cn-ljb/rxjava_for_android</a><br><a target="_blank" rel="noopener" href="https://github.com/THEONE10211024/RxJavaSamples">https://github.com/THEONE10211024/RxJavaSamples</a></p>
<p>要是这些你都啃完了，还不会你发邮件给我，我手把手教你！不过一定不会有这种现象发生的，上面全部都是干货！不过我自己也没完全看完，太多了，需要什么再看什么。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android%E8%BF%9B%E9%98%B6/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android-常用第三方库/">Android 常用第三方库</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/06/20/Android-进阶之第三方库的介绍-RxJava-RxAndroid-七/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/06/20/Android-进阶之第三方库的介绍-RxJava-RxAndroid-七/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/16/">&lt;span&gt;&lt;&#x2F;span&gt;Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/18/">Next&lt;span&gt;&lt;&#x2F;span&gt;</a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">
<div id="authorInfo">
	
		<div class="author-img"></div>		
	
	<div class="social-info" class="clearfix">
		
		
		<a href="https://github.com/tbfungeek" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		
		<a href="mailto:tbfungeek@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		

	</div>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Android-小经验/" title="Android 小经验">Android 小经验<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android-源码分析/" title="Android 源码分析">Android 源码分析<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android其他/" title="Android其他">Android其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android初步/" title="Android初步">Android初步<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android进阶/" title="Android进阶">Android进阶<sup>100</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript理论/" title="JavaScript理论">JavaScript理论<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Objective-C-相关/" title="Objective C 相关">Objective C 相关<sup>24</sup></a></li>
		  
		
		  
			<li><a href="/categories/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/ROS/" title="ROS">ROS<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-工具使用/" title="iOS 工具使用">iOS 工具使用<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-开源库分析/" title="iOS 开源库分析">iOS 开源库分析<sup>36</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-理论基础/" title="iOS 理论基础">iOS 理论基础<sup>14</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS-进阶/" title="iOS 进阶">iOS 进阶<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/个人收藏/" title="个人收藏">个人收藏<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/代码规范/" title="代码规范">代码规范<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/其他/" title="其他">其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/博客分类目录/" title="博客分类目录">博客分类目录<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/叨叨系列/" title="叨叨系列">叨叨系列<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源代码分析/" title="开源代码分析">开源代码分析<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源库分析/" title="开源库分析">开源库分析<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/版本控制/" title="版本控制">版本控制<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/直播/" title="直播">直播<sup>6</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS-开源库分析/" title="iOS 开源库分析">iOS 开源库分析<sup>36</sup></a></li>
			
		
			
				<li><a href="/tags/Android-设计模式/" title="Android 设计模式">Android 设计模式<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Objective-C-相关/" title="Objective C 相关">Objective C 相关<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/Android基础/" title="Android基础">Android基础<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/AOSP-源码/" title="AOSP 源码">AOSP 源码<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Android-常用第三方库/" title="Android 常用第三方库">Android 常用第三方库<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-理论基础/" title="iOS 理论基础">iOS 理论基础<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/ROS/" title="ROS">ROS<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Android-动画进阶/" title="Android 动画进阶">Android 动画进阶<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Android-JNI/" title="Android JNI">Android JNI<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-绘图进阶/" title="Android 绘图进阶">Android 绘图进阶<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android性能优化/" title="Android性能优化">Android性能优化<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自动化测试/" title="Android 自动化测试">Android 自动化测试<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/直播/" title="直播">直播<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-开源源码/" title="Android 开源源码">Android 开源源码<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自定义View进阶/" title="Android 自定义View进阶">Android 自定义View进阶<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-进阶/" title="iOS 进阶">iOS 进阶<sup>4</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://hexo.io" target="_blank" title="Hexo">Hexo</a>
            
          </li>
        
          <li>
            
            	<a href="https://pages.github.com/" target="_blank" title="GitHub">GitHub</a>
            
          </li>
        
          <li>
            
            	<a href="http://pf18.github.io/" target="_blank" title="PF18">PF18</a>
            
          </li>
        
          <li>
            
            	<a href="http://toutiao.io/" target="_blank" title="开发者头条">开发者头条</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.jcodecraeer.com/" target="_blank" title="泡在网上的日子">泡在网上的日子</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/AOSP-%E6%BA%90%E7%A0%81/" style="font-size: 17.14px;">AOSP 源码</a> <a href="/tags/Android-APK-%E7%AD%BE%E5%90%8D/" style="font-size: 10px;">Android APK 签名</a> <a href="/tags/Android-JNI/" style="font-size: 12.86px;">Android JNI</a> <a href="/tags/Android-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6/" style="font-size: 10.71px;">Android 事件处理进阶</a> <a href="/tags/Android-%E5%8A%A8%E7%94%BB%E8%BF%9B%E9%98%B6/" style="font-size: 13.57px;">Android 动画进阶</a> <a href="/tags/Android-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/" style="font-size: 10px;">Android 多线程开发</a> <a href="/tags/Android-%E5%B0%8F%E7%BB%8F%E9%AA%8C/" style="font-size: 10px;">Android 小经验</a> <a href="/tags/Android-%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" style="font-size: 16.43px;">Android 常用第三方库</a> <a href="/tags/Android-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">Android 开发流程</a> <a href="/tags/Android-%E5%BC%80%E6%BA%90%E6%BA%90%E7%A0%81/" style="font-size: 12.14px;">Android 开源源码</a> <a href="/tags/Android-%E7%BB%98%E5%9B%BE%E8%BF%9B%E9%98%B6/" style="font-size: 12.86px;">Android 绘图进阶</a> <a href="/tags/Android-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" style="font-size: 12.86px;">Android 自动化测试</a> <a href="/tags/Android-%E8%87%AA%E5%AE%9A%E4%B9%89View%E8%BF%9B%E9%98%B6/" style="font-size: 12.14px;">Android 自定义View进阶</a> <a href="/tags/Android-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 19.29px;">Android 设计模式</a> <a href="/tags/Android%E5%85%B6%E4%BB%96/" style="font-size: 10px;">Android其他</a> <a href="/tags/Android%E5%9F%BA%E7%A1%80/" style="font-size: 17.86px;">Android基础</a> <a href="/tags/Android%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">Android开发流程</a> <a href="/tags/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 12.86px;">Android性能优化</a> <a href="/tags/Android%E6%B7%B7%E6%B7%86%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">Android混淆技术</a> <a href="/tags/Android%E8%B4%A8%E9%87%8F%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" style="font-size: 11.43px;">Android质量管理工具</a> <a href="/tags/Android%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" style="font-size: 10px;">Android逆向工程</a> <a href="/tags/Git-github/" style="font-size: 10px;">Git && github</a> <a href="/tags/Hexo-%E4%BD%BF%E7%94%A8/" style="font-size: 15px;">Hexo 使用</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux-%E4%BD%BF%E7%94%A8/" style="font-size: 10px;">Linux 使用</a> <a href="/tags/Objective-C-%E7%9B%B8%E5%85%B3/" style="font-size: 18.57px;">Objective C 相关</a> <a href="/tags/OpenCV/" style="font-size: 12.86px;">OpenCV</a> <a href="/tags/ROS/" style="font-size: 14.29px;">ROS</a> <a href="/tags/iOS-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 10.71px;">iOS 工具使用</a> <a href="/tags/iOS-%E5%BC%80%E6%BA%90%E5%BA%93%E5%88%86%E6%9E%90/" style="font-size: 20px;">iOS 开源库分析</a> <a href="/tags/iOS-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" style="font-size: 15.71px;">iOS 理论基础</a> <a href="/tags/iOS-%E8%BF%9B%E9%98%B6/" style="font-size: 12.14px;">iOS 进阶</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 10px;">代码规范</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E5%88%86%E7%B1%BB%E7%9B%AE%E5%BD%95/" style="font-size: 10.71px;">博客分类目录</a> <a href="/tags/%E5%8F%A8%E5%8F%A8%E7%B3%BB%E5%88%97/" style="font-size: 10px;">叨叨系列</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 11.43px;">工具的使用</a> <a href="/tags/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 10.71px;">开源代码分析</a> <a href="/tags/%E5%BC%80%E6%BA%90%E5%BA%93%E5%88%86%E6%9E%90/" style="font-size: 10px;">开源库分析</a> <a href="/tags/%E6%9D%82%E7%B1%BB/" style="font-size: 10px;">杂类</a> <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 12.14px;">树莓派</a> <a href="/tags/%E7%9B%B4%E6%92%AD/" style="font-size: 12.86px;">直播</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E5%B7%A7/" style="font-size: 10.71px;">编程技巧</a> <a href="/tags/%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F/" style="font-size: 10px;">网站收藏</a> <a href="/tags/%E9%87%8D%E8%A6%81%E6%8E%A7%E4%BB%B6/" style="font-size: 11.43px;">重要控件</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
		
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/hsihohuang/kiddochan" target="_blank" title="Kiddochan">Kiddochan</a> © 2022 
		
		<a href="/about" target="_blank" title="Edgar">Edgar</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?7c9443b0374f1cf6b1dbb5ab84d939cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
